;var JSHINT=(function(){var aW,s={"<":true,"<=":true,"==":true,"===":true,"!==":true,"!=":true,">":true,">=":true,"+":true,"-":true,"*":true,"/":true,"%":true},n={asi:true,bitwise:true,boss:true,browser:true,couch:true,curly:true,debug:true,devel:true,dojo:true,eqeqeq:true,eqnull:true,es5:true,esnext:true,evil:true,expr:true,forin:true,funcscope:true,globalstrict:true,immed:true,iterator:true,jquery:true,lastsemic:true,latedef:true,laxbreak:true,laxcomma:true,loopfunc:true,mootools:true,multistr:true,newcap:true,noarg:true,node:true,noempty:true,nonew:true,nonstandard:true,nomen:true,onevar:true,onecase:true,passfail:true,plusplus:true,proto:true,prototypejs:true,regexdash:true,regexp:true,rhino:true,undef:true,scripturl:true,shadow:true,smarttabs:true,strict:true,sub:true,supernew:true,trailing:true,validthis:true,withstmt:true,white:true,wsh:true},ai={maxlen:false,indent:false,maxerr:false,predef:false},aE={bitwise:true,forin:true,newcap:true,nomen:true,plusplus:true,regexp:true,undef:true,white:true,eqeqeq:true,onevar:true},r={eqeq:"eqeqeq",vars:"onevar",windows:"wsh"},aS={ArrayBuffer:false,ArrayBufferView:false,Audio:false,addEventListener:false,applicationCache:false,atob:false,blur:false,btoa:false,clearInterval:false,clearTimeout:false,close:false,closed:false,DataView:false,DOMParser:false,defaultStatus:false,document:false,event:false,FileReader:false,Float32Array:false,Float64Array:false,FormData:false,focus:false,frames:false,getComputedStyle:false,HTMLElement:false,HTMLAnchorElement:false,HTMLBaseElement:false,HTMLBlockquoteElement:false,HTMLBodyElement:false,HTMLBRElement:false,HTMLButtonElement:false,HTMLCanvasElement:false,HTMLDirectoryElement:false,HTMLDivElement:false,HTMLDListElement:false,HTMLFieldSetElement:false,HTMLFontElement:false,HTMLFormElement:false,HTMLFrameElement:false,HTMLFrameSetElement:false,HTMLHeadElement:false,HTMLHeadingElement:false,HTMLHRElement:false,HTMLHtmlElement:false,HTMLIFrameElement:false,HTMLImageElement:false,HTMLInputElement:false,HTMLIsIndexElement:false,HTMLLabelElement:false,HTMLLayerElement:false,HTMLLegendElement:false,HTMLLIElement:false,HTMLLinkElement:false,HTMLMapElement:false,HTMLMenuElement:false,HTMLMetaElement:false,HTMLModElement:false,HTMLObjectElement:false,HTMLOListElement:false,HTMLOptGroupElement:false,HTMLOptionElement:false,HTMLParagraphElement:false,HTMLParamElement:false,HTMLPreElement:false,HTMLQuoteElement:false,HTMLScriptElement:false,HTMLSelectElement:false,HTMLStyleElement:false,HTMLTableCaptionElement:false,HTMLTableCellElement:false,HTMLTableColElement:false,HTMLTableElement:false,HTMLTableRowElement:false,HTMLTableSectionElement:false,HTMLTextAreaElement:false,HTMLTitleElement:false,HTMLUListElement:false,HTMLVideoElement:false,history:false,Int16Array:false,Int32Array:false,Int8Array:false,Image:false,length:false,localStorage:false,location:false,MessageChannel:false,MessageEvent:false,MessagePort:false,moveBy:false,moveTo:false,name:false,navigator:false,onbeforeunload:true,onblur:true,onerror:true,onfocus:true,onload:true,onresize:true,onunload:true,open:false,openDatabase:false,opener:false,Option:false,parent:false,print:false,removeEventListener:false,resizeBy:false,resizeTo:false,screen:false,scroll:false,scrollBy:false,scrollTo:false,sessionStorage:false,setInterval:false,setTimeout:false,SharedWorker:false,status:false,top:false,Uint16Array:false,Uint32Array:false,Uint8Array:false,WebSocket:false,window:false,Worker:false,XMLHttpRequest:false,XMLSerializer:false,XPathEvaluator:false,XPathException:false,XPathExpression:false,XPathNamespace:false,XPathNSResolver:false,XPathResult:false},a6={require:false,respond:false,getRow:false,emit:false,send:false,start:false,sum:false,log:false,exports:false,module:false,provides:false},t={alert:false,confirm:false,console:false,Debug:false,opera:false,prompt:false},P={dojo:false,dijit:false,dojox:false,define:false,require:false},E={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"/":"\\/","\\":"\\\\"},az,aK=["closure","exception","global","label","outer","unused","var"],z,A,aQ,aA,am,j,ba={"$":false,jQuery:false},a4,K,aF,aR,aU={"$":false,"$$":false,Assets:false,Browser:false,Chain:false,Class:false,Color:false,Cookie:false,Core:false,Document:false,DomReady:false,DOMReady:false,Drag:false,Element:false,Elements:false,Event:false,Events:false,Fx:false,Group:false,Hash:false,HtmlTable:false,Iframe:false,IframeShim:false,InputValidator:false,instanceOf:false,Keyboard:false,Locale:false,Mask:false,MooTools:false,Native:false,Options:false,OverText:false,Request:false,Scroller:false,Slick:false,Slider:false,Sortables:false,Spinner:false,Swiff:false,Tips:false,Type:false,typeOf:false,URI:false,Window:false},k,ao={__filename:false,__dirname:false,Buffer:false,console:false,exports:false,GLOBAL:false,global:false,module:false,process:false,require:false,setTimeout:false,clearTimeout:false,setInterval:false,clearInterval:false},C,T,aZ,q,aM,d={"$":false,"$$":false,"$A":false,"$F":false,"$H":false,"$R":false,"$break":false,"$continue":false,"$w":false,Abstract:false,Ajax:false,Class:false,Enumerable:false,Element:false,Event:false,Field:false,Form:false,Hash:false,Insertion:false,ObjectRange:false,PeriodicalExecuter:false,Position:false,Prototype:false,Selector:false,Template:false,Toggle:false,Try:false,Autocompleter:false,Builder:false,Control:false,Draggable:false,Draggables:false,Droppables:false,Effect:false,Sortable:false,SortableObserver:false,Sound:false,Scriptaculous:false},X={defineClass:false,deserialize:false,gc:false,help:false,importPackage:false,java:false,load:false,loadClass:false,print:false,quit:false,readFile:false,readUrl:false,runCommand:false,seal:false,serialize:false,spawn:false,sync:false,toint32:false,version:false},aC,au,a3={Array:false,Boolean:false,Date:false,decodeURI:false,decodeURIComponent:false,encodeURI:false,encodeURIComponent:false,Error:false,"eval":false,EvalError:false,Function:false,hasOwnProperty:false,isFinite:false,isNaN:false,JSON:false,Math:false,Number:false,Object:false,parseInt:false,parseFloat:false,RangeError:false,ReferenceError:false,RegExp:false,String:false,SyntaxError:false,TypeError:false,URIError:false},at={escape:false,unescape:false},G={E:true,LN2:true,LN10:true,LOG2E:true,LOG10E:true,MAX_VALUE:true,MIN_VALUE:true,NEGATIVE_INFINITY:true,PI:true,POSITIVE_INFINITY:true,SQRT1_2:true,SQRT2:true},aw,a={},m,aB,S,M,y,e={ActiveXObject:true,Enumerator:true,GetObject:true,ScriptEngine:true,ScriptEngineBuildVersion:true,ScriptEngineMajorVersion:true,ScriptEngineMinorVersion:true,VBArray:true,WSH:true,WScript:true,XDomainRequest:true};var an,J,ad,Y,ab,aV,L,v,aT;(function(){an=/@cc|<\/?|script|\]\s*\]|<\s*!|&lt/i;J=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/;ad=/^\s*([(){}\[.,:;'"~\?\]#@]|==?=?|\/(\*(jshint|jslint|members?|global)?|=|\/)?|\*[\/=]?|\+(?:=|\++)?|-(?:=|-+)?|%=?|&[&=]?|\|[|=]?|>>?>?=?|<([\/=!]|\!(\[|--)?|<=?)?|\^=?|\!=?=?|[a-zA-Z_$][a-zA-Z0-9_$]*|[0-9]+([xX][0-9a-fA-F]+|\.[0-9]*)?([eE][+\-]?[0-9]+)?)/;Y=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/;ab=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;aV=/\*\/|\/\*/;L=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/;v=/^(?:javascript|jscript|ecmascript|vbscript|mocha|livescript)\s*:/i;aT=/^\s*\/\*\s*falls\sthrough\s*\*\/\s*$/;}());function aq(){}function aP(ax,F){return Object.prototype.hasOwnProperty.call(ax,F);}function a1(F,ax){if(ai[F]===undefined&&n[F]===undefined){ak("Bad option: '"+F+"'.",ax);}}if(typeof Array.isArray!=="function"){Array.isArray=function(F){return Object.prototype.toString.apply(F)==="[object Array]";};}if(typeof Object.create!=="function"){Object.create=function(F){aq.prototype=F;return new aq();};}if(typeof Object.keys!=="function"){Object.keys=function(bb){var F=[],ax;for(ax in bb){if(aP(bb,ax)){F.push(ax);}}return F;};}if(typeof String.prototype.entityify!=="function"){String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");};}if(typeof String.prototype.isAlpha!=="function"){String.prototype.isAlpha=function(){return(this>="a"&&this<="z\uffff")||(this>="A"&&this<="Z\uffff");};}if(typeof String.prototype.isDigit!=="function"){String.prototype.isDigit=function(){return(this>="0"&&this<="9");};}if(typeof String.prototype.supplant!=="function"){String.prototype.supplant=function(F){return this.replace(/\{([^{}]*)\}/g,function(bb,ax){var bc=F[ax];return typeof bc==="string"||typeof bc==="number"?bc:bb;});};}if(typeof String.prototype.name!=="function"){String.prototype.name=function(){if(L.test(this)){return this;}if(Y.test(this)){return'"'+this.replace(ab,function(F){var ax=E[F];if(ax){return ax;}return"\\u"+("0000"+F.charCodeAt().toString(16)).slice(-4);})+'"';}return'"'+this+'"';};}function a8(F,ax){var bb;for(bb in ax){if(aP(ax,bb)){F[bb]=ax[bb];}}}function af(){if(T.couch){a8(aZ,a6);}if(T.rhino){a8(aZ,X);}if(T.prototypejs){a8(aZ,d);}if(T.node){a8(aZ,ao);T.globalstrict=true;}if(T.devel){a8(aZ,t);}if(T.dojo){a8(aZ,P);}if(T.browser){a8(aZ,aS);}if(T.nonstandard){a8(aZ,at);}if(T.jquery){a8(aZ,ba);}if(T.mootools){a8(aZ,aU);}if(T.wsh){a8(aZ,e);}if(T.esnext){M();}if(T.globalstrict&&T.strict!==false){T.strict=true;}}function ap(bc,ax,bb){var F=Math.floor((ax/a4.length)*100);throw {name:"JSHintError",line:ax,character:bb,message:bc+" ("+F+"% scanned).",raw:bc};}function c(bc,F,bb,ax){return JSHINT.undefs.push([bc,F,bb,ax]);}function ak(ax,bh,bf,be,bd,bc){var F,bb,bg;bh=bh||k;if(bh.id==="(end)"){bh=aB;}bb=bh.line||0;F=bh.from||0;bg={id:"(error)",raw:ax,evidence:a4[bb-1]||"",line:bb,character:F,a:bf,b:be,c:bd,d:bc};bg.reason=ax.supplant(bg);JSHINT.errors.push(bg);if(T.passfail){ap("Stopping. ",bb,F);}y+=1;if(y>=T.maxerr){ap("Too many errors.",bb,F);}return bg;}function Z(ax,bc,bd,bb,F,bf,be){return ak(ax,{line:bc,from:bd},bb,F,bf,be);}function aG(ax,bd,bc,F,bf,be){var bb=ak(ax,bd,bc,F,bf,be);}function V(ax,bc,bd,bb,F,bf,be){return aG(ax,{line:bc,from:bd},bb,F,bf,be);}var aj=(function aj(){var bd,be,F,bb;function bc(){var bf,bg;if(F>=a4.length){return false;}bd=1;bb=a4[F];F+=1;if(T.smarttabs){bf=bb.search(/ \t/);}else{bf=bb.search(/ \t|\t /);}if(bf>=0){Z("Mixed spaces and tabs.",F,bf+1);}bb=bb.replace(/\t/g,m);bf=bb.search(J);if(bf>=0){Z("Unsafe character.",F,bf);}if(T.maxlen&&T.maxlen<bb.length){Z("Line too long.",F,bb.length);}bg=T.trailing&&bb.match(/^(.*?)\s+$/);if(bg&&!/^\s+$/.test(bb)){Z("Trailing whitespace.",F,bg[1].length+1);}return true;}function ax(bh,bi){var bg,bf;if(bh==="(color)"||bh==="(range)"){bf={type:bh};}else{if(bh==="(punctuator)"||(bh==="(identifier)"&&aP(a,bi))){bf=a[bi]||a["(error)"];}else{bf=a[bh];}}bf=Object.create(bf);if(bh==="(string)"||bh==="(range)"){if(!T.scripturl&&v.test(bi)){Z("Script URL.",F,be);}}if(bh==="(identifier)"){bf.identifier=true;if(bi==="__proto__"&&!T.proto){Z("The '{a}' property is deprecated.",F,be,bi);}else{if(bi==="__iterator__"&&!T.iterator){Z("'{a}' is only available in JavaScript 1.7.",F,be,bi);}else{if(T.nomen&&(bi.charAt(0)==="_"||bi.charAt(bi.length-1)==="_")){if(!T.node||aB.id==="."||(bi!=="__dirname"&&bi!=="__filename")){Z("Unexpected {a} in '{b}'.",F,be,"dangling '_'",bi);}}}}}bf.value=bi;bf.line=F;bf.character=bd;bf.from=be;bg=bf.id;if(bg!=="(endline)"){q=bg&&(("(,=:[!&|?{};".indexOf(bg.charAt(bg.length-1))>=0)||bg==="return"||bg==="case");}return bf;}return{init:function(bf){if(typeof bf==="string"){a4=bf.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n");}else{a4=bf;}if(a4[0]&&a4[0].substr(0,2)==="#!"){a4[0]="";}F=0;bc();be=1;},range:function(bg,bf){var bi,bh="";be=bd;if(bb.charAt(0)!==bg){V("Expected '{a}' and instead saw '{b}'.",F,bd,bg,bb.charAt(0));}for(;;){bb=bb.slice(1);bd+=1;bi=bb.charAt(0);switch(bi){case"":V("Missing '{a}'.",F,bd,bi);break;case bf:bb=bb.slice(1);bd+=1;return ax("(range)",bh);case"\\":Z("Unexpected '{a}'.",F,bd,bi);}bh+=bi;}},token:function(){var bt,bs,bh,bq,bm,bl,bn,bj,br,bg,bu,bf,bk,bi;function bo(bv){var bx=bv.exec(bb),bw;if(bx){bj=bx[0].length;bw=bx[1];bs=bw.charAt(0);bb=bb.substr(bj);be=bd+bj-bw.length;bd+=bj;return bw;}}function bp(bv){var bC,by,bz="",bB=false;if(j&&bv!=='"'){Z("Strings must use doublequote.",F,bd);}function bx(bE){var bD=parseInt(bb.substr(by+1,bE),16);by+=bE;if(bD>=32&&bD<=126&&bD!==34&&bD!==92&&bD!==39){Z("Unnecessary escapement.",F,bd);}bd+=bE;bC=String.fromCharCode(bD);}by=0;unclosedString:for(;;){while(by>=bb.length){by=0;var bw=F,bA=be;if(!bc()){V("Unclosed string.",bw,bA);break unclosedString;}if(bB){bB=false;}else{Z("Unclosed string.",bw,bA);}}bC=bb.charAt(by);if(bC===bv){bd+=1;bb=bb.substr(by+1);return ax("(string)",bz,bv);}if(bC<" "){if(bC==="\n"||bC==="\r"){break;}Z("Control character in string: {a}.",F,bd+by,bb.slice(0,by));}else{if(bC==="\\"){by+=1;bd+=1;bC=bb.charAt(by);bi=bb.charAt(by+1);switch(bC){case"\\":case'"':case"/":break;case"'":if(j){Z("Avoid \\'.",F,bd);}break;case"b":bC="\b";break;case"f":bC="\f";break;case"n":bC="\n";break;case"r":bC="\r";break;case"t":bC="\t";break;case"0":bC="\0";if(bi>=0&&bi<=7&&aw["use strict"]){Z("Octal literals are not allowed in strict mode.",F,bd);}break;case"u":bx(4);break;case"v":if(j){Z("Avoid \\v.",F,bd);}bC="\v";break;case"x":if(j){Z("Avoid \\x-.",F,bd);}bx(2);break;case"":bB=true;if(T.multistr){if(j){Z("Avoid EOL escapement.",F,bd);}bC="";bd-=1;break;}Z("Bad escapement of EOL. Use option multistr if needed.",F,bd);break;default:Z("Bad escapement.",F,bd);}}}bz+=bC;bd+=1;by+=1;}}for(;;){if(!bb){return ax(bc()?"(endline)":"(end)","");}bu=bo(ad);if(!bu){bu="";bs="";while(bb&&bb<"!"){bb=bb.substr(1);}if(bb){V("Unexpected '{a}'.",F,bd,bb.substr(0,1));bb="";}}else{if(bs.isAlpha()||bs==="_"||bs==="$"){return ax("(identifier)",bu);}if(bs.isDigit()){if(!isFinite(Number(bu))){Z("Bad number '{a}'.",F,bd,bu);}if(bb.substr(0,1).isAlpha()){Z("Missing space after '{a}'.",F,bd,bu);}if(bs==="0"){bq=bu.substr(1,1);if(bq.isDigit()){if(aB.id!=="."){Z("Don't use extra leading zeros '{a}'.",F,bd,bu);}}else{if(j&&(bq==="x"||bq==="X")){Z("Avoid 0x-. '{a}'.",F,bd,bu);}}}if(bu.substr(bu.length-1)==="."){Z("A trailing decimal point can be confused with a dot '{a}'.",F,bd,bu);}return ax("(number)",bu);}switch(bu){case'"':case"'":return bp(bu);case"//":bb="";aB.comment=true;break;case"/*":for(;;){bn=bb.search(aV);if(bn>=0){break;}if(!bc()){V("Unclosed comment.",F,bd);}}bd+=bn+2;if(bb.substr(bn,1)==="/"){V("Nested comment.",F,bd);}bb=bb.substr(bn+2);aB.comment=true;break;case"/*members":case"/*member":case"/*jshint":case"/*jslint":case"/*global":case"*/":return{value:bu,type:"special",line:F,character:bd,from:be};case"":break;case"/":if(aB.id==="/="){V("A regular expression literal can be confused with '/='.",F,be);}if(q){bm=0;bh=0;bj=0;for(;;){bt=true;bs=bb.charAt(bj);bj+=1;switch(bs){case"":V("Unclosed regular expression.",F,be);return ap("Stopping.",F,be);case"/":if(bm>0){Z("{a} unterminated regular expression group(s).",F,be+bj,bm);}bs=bb.substr(0,bj-1);bg={g:true,i:true,m:true};while(bg[bb.charAt(bj)]===true){bg[bb.charAt(bj)]=false;bj+=1;}bd+=bj;bb=bb.substr(bj);bg=bb.charAt(0);if(bg==="/"||bg==="*"){V("Confusing regular expression.",F,be);}return ax("(regexp)",bs);case"\\":bs=bb.charAt(bj);if(bs<" "){Z("Unexpected control character in regular expression.",F,be+bj);}else{if(bs==="<"){Z("Unexpected escaped character '{a}' in regular expression.",F,be+bj,bs);}}bj+=1;break;case"(":bm+=1;bt=false;if(bb.charAt(bj)==="?"){bj+=1;switch(bb.charAt(bj)){case":":case"=":case"!":bj+=1;break;default:Z("Expected '{a}' and instead saw '{b}'.",F,be+bj,":",bb.charAt(bj));}}else{bh+=1;}break;case"|":bt=false;break;case")":if(bm===0){Z("Unescaped '{a}'.",F,be+bj,")");}else{bm-=1;}break;case" ":bg=1;while(bb.charAt(bj)===" "){bj+=1;bg+=1;}if(bg>1){Z("Spaces are hard to count. Use {{a}}.",F,be+bj,bg);}break;case"[":bs=bb.charAt(bj);if(bs==="^"){bj+=1;if(T.regexp){Z("Insecure '{a}'.",F,be+bj,bs);}else{if(bb.charAt(bj)==="]"){V("Unescaped '{a}'.",F,be+bj,"^");}}}if(bs==="]"){Z("Empty class.",F,be+bj-1);}bf=false;bk=false;klass:do{bs=bb.charAt(bj);bj+=1;switch(bs){case"[":case"^":Z("Unescaped '{a}'.",F,be+bj,bs);if(bk){bk=false;}else{bf=true;}break;case"-":if(bf&&!bk){bf=false;bk=true;}else{if(bk){bk=false;}else{if(bb.charAt(bj)==="]"){bk=true;}else{if(T.regexdash!==(bj===2||(bj===3&&bb.charAt(1)==="^"))){Z("Unescaped '{a}'.",F,be+bj-1,"-");}bf=true;}}}break;case"]":if(bk&&!T.regexdash){Z("Unescaped '{a}'.",F,be+bj-1,"-");}break klass;case"\\":bs=bb.charAt(bj);if(bs<" "){Z("Unexpected control character in regular expression.",F,be+bj);}else{if(bs==="<"){Z("Unexpected escaped character '{a}' in regular expression.",F,be+bj,bs);}}bj+=1;if(/[wsd]/i.test(bs)){if(bk){Z("Unescaped '{a}'.",F,be+bj,"-");bk=false;}bf=false;}else{if(bk){bk=false;}else{bf=true;}}break;case"/":Z("Unescaped '{a}'.",F,be+bj-1,"/");if(bk){bk=false;}else{bf=true;}break;case"<":if(bk){bk=false;}else{bf=true;}break;default:if(bk){bk=false;}else{bf=true;}}}while(bs);break;case".":if(T.regexp){Z("Insecure '{a}'.",F,be+bj,bs);}break;case"]":case"?":case"{":case"}":case"+":case"*":Z("Unescaped '{a}'.",F,be+bj,bs);}if(bt){switch(bb.charAt(bj)){case"?":case"+":case"*":bj+=1;if(bb.charAt(bj)==="?"){bj+=1;}break;case"{":bj+=1;bs=bb.charAt(bj);if(bs<"0"||bs>"9"){Z("Expected a number and instead saw '{a}'.",F,be+bj,bs);}bj+=1;br=+bs;for(;;){bs=bb.charAt(bj);if(bs<"0"||bs>"9"){break;}bj+=1;br=+bs+(br*10);}bl=br;if(bs===","){bj+=1;bl=Infinity;bs=bb.charAt(bj);if(bs>="0"&&bs<="9"){bj+=1;bl=+bs;for(;;){bs=bb.charAt(bj);if(bs<"0"||bs>"9"){break;}bj+=1;bl=+bs+(bl*10);}}}if(bb.charAt(bj)!=="}"){Z("Expected '{a}' and instead saw '{b}'.",F,be+bj,"}",bs);}else{bj+=1;}if(bb.charAt(bj)==="?"){bj+=1;}if(br>bl){Z("'{a}' should not be greater than '{b}'.",F,be+bj,br,bl);}}}}bs=bb.substr(0,bj-1);bd+=bj;bb=bb.substr(bj);return ax("(regexp)",bs);}return ax("(punctuator)",bu);case"#":return ax("(punctuator)",bu);default:return ax("(punctuator)",bu);}}}}};}());function u(F,ax){if(F==="hasOwnProperty"){ak("'hasOwnProperty' is a really bad name.");}if(aP(az,F)&&!az["(global)"]){if(az[F]===true){if(T.latedef){ak("'{a}' was used before it was defined.",k,F);}}else{if(!T.shadow&&ax!=="exception"){ak("'{a}' is already defined.",k,F);}}}az[F]=ax;if(az["(global)"]){A[F]=az;if(aP(aQ,F)){if(T.latedef){ak("'{a}' was used before it was defined.",k,F);}delete aQ[F];}}else{aC[F]=az;}}function w(){var ax,be,bd,bf=k.value,bc,F,bb;switch(bf){case"*/":aG("Unbegun comment.");break;case"/*members":case"/*member":bf="/*members";if(!aR){aR={};}be=aR;break;case"/*jshint":case"/*jslint":be=T;bd=n;break;case"/*global":be=aZ;break;default:aG("What?");}bc=aj.token();loop:for(;;){for(;;){if(bc.type==="special"&&bc.value==="*/"){break loop;}if(bc.id!=="(endline)"&&bc.id!==","){break;}bc=aj.token();}if(bc.type!=="(string)"&&bc.type!=="(identifier)"&&bf!=="/*members"){aG("Bad option.",bc);}bb=aj.token();if(bb.id===":"){bb=aj.token();if(be===aR){aG("Expected '{a}' and instead saw '{b}'.",bc,"*/",":");}if(bf==="/*jshint"){a1(bc.value,bc);}if(bc.value==="indent"&&(bf==="/*jshint"||bf==="/*jslint")){ax=+bb.value;if(typeof ax!=="number"||!isFinite(ax)||ax<=0||Math.floor(ax)!==ax){aG("Expected a small integer and instead saw '{a}'.",bb,bb.value);}be.white=true;be.indent=ax;}else{if(bc.value==="maxerr"&&(bf==="/*jshint"||bf==="/*jslint")){ax=+bb.value;if(typeof ax!=="number"||!isFinite(ax)||ax<=0||Math.floor(ax)!==ax){aG("Expected a small integer and instead saw '{a}'.",bb,bb.value);}be.maxerr=ax;}else{if(bc.value==="maxlen"&&(bf==="/*jshint"||bf==="/*jslint")){ax=+bb.value;if(typeof ax!=="number"||!isFinite(ax)||ax<=0||Math.floor(ax)!==ax){aG("Expected a small integer and instead saw '{a}'.",bb,bb.value);}be.maxlen=ax;}else{if(bc.value==="validthis"){if(az["(global)"]){aG("Option 'validthis' can't be used in a global scope.");}else{if(bb.value==="true"||bb.value==="false"){be[bc.value]=bb.value==="true";}else{aG("Bad option value.",bb);}}}else{if(bb.value==="true"||bb.value==="false"){if(bf==="/*jslint"){F=r[bc.value]||bc.value;be[F]=bb.value==="true";if(aE[F]!==undefined){be[F]=!be[F];}}else{be[bc.value]=bb.value==="true";}}else{aG("Bad option value.",bb);}}}}}bc=aj.token();}else{if(bf==="/*jshint"||bf==="/*jslint"){aG("Missing option value.",bc);}be[bc.value]=false;bc=bb;}}if(bd){af();}}function aN(bc){var bb=bc||0,F=0,ax;while(F<=bb){ax=K[F];if(!ax){ax=K[F]=aj.token();}F+=1;}return ax;}function ac(ax,F){switch(aB.id){case"(number)":if(k.id==="."){ak("A dot following a number can be confused with a decimal point.",aB);}break;case"-":if(k.id==="-"||k.id==="--"){ak("Confusing minusses.");}break;case"+":if(k.id==="+"||k.id==="++"){ak("Confusing plusses.");}break;}if(aB.type==="(string)"||aB.identifier){aW=aB.value;}if(ax&&k.id!==ax){if(F){if(k.id==="(end)"){ak("Unmatched '{a}'.",F,F.id);}else{ak("Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.",k,ax,F.id,F.line,k.value);}}else{if(k.type!=="(identifier)"||k.value!==ax){ak("Expected '{a}' and instead saw '{b}'.",k,ax,k.value);}}}aM=aB;aB=k;for(;;){k=K.shift()||aj.token();if(k.id==="(end)"||k.id==="(error)"){return;}if(k.type==="special"){w();}else{if(k.id!=="(endline)"){break;}}}}function aD(bb,bc){var bd,ax=false,F=false;if(k.id==="(end)"){aG("Unexpected early end of program.",aB);}ac();if(bc){aW="anonymous";az["(verb)"]=aB.value;}if(bc===true&&aB.fud){bd=aB.fud();}else{if(aB.nud){bd=aB.nud();}else{if(k.type==="(number)"&&aB.id==="."){ak("A leading decimal point can be confused with a dot: '.{a}'.",aB,k.value);ac();return aB;}else{aG("Expected an identifier and instead saw '{a}'.",aB,aB.id);}}while(bb<k.lbp){ax=aB.value==="Array";F=aB.value==="Object";if(bd&&(bd.value||(bd.first&&bd.first.value))){if(bd.value!=="new"||(bd.first&&bd.first.value&&bd.first.value===".")){ax=false;if(bd.value!==aB.value){F=false;}}}ac();if(ax&&aB.id==="("&&k.id===")"){ak("Use the array literal notation [].",aB);}if(F&&aB.id==="("&&k.id===")"){ak("Use the object literal notation {}.",aB);}if(aB.led){bd=aB.led(bd);}else{aG("Expected an operator and instead saw '{a}'.",aB,aB.id);}}}return bd;}function ar(ax,F){ax=ax||aB;F=F||k;if(T.white){if(ax.character!==F.from&&ax.line===F.line){ax.from+=(ax.character-ax.from);ak("Unexpected space after '{a}'.",ax,ax.value);}}}function aJ(ax,F){ax=ax||aB;F=F||k;if(T.white&&(ax.character!==F.from||ax.line!==F.line)){ak("Unexpected space before '{a}'.",F,F.value);}}function R(ax,F){ax=ax||aB;F=F||k;if(T.white&&!ax.comment){if(ax.line===F.line){ar(ax,F);}}}function Q(ax,F){if(T.white){ax=ax||aB;F=F||k;if(ax.line===F.line&&ax.character===F.from){ax.from+=(ax.character-ax.from);ak("Missing space after '{a}'.",ax,ax.value);}}}function ah(ax,F){ax=ax||aB;F=F||k;if(!T.laxbreak&&ax.line!==F.line){ak("Bad line breaking before '{a}'.",F,F.id);}else{if(T.white){ax=ax||aB;F=F||k;if(ax.character===F.from){ax.from+=(ax.character-ax.from);ak("Missing space after '{a}'.",ax,ax.value);}}}}function b(F){var ax;if(T.white&&k.id!=="(end)"){ax=am+(F||0);if(k.from!==ax){ak("Expected '{a}' to have an indentation at {b} instead at {c}.",k,k.value,ax,k.from);}}}function a7(F){F=F||aB;if(F.line!==k.line){ak("Line breaking error '{a}'.",F,F.value);}}function al(){if(aB.line!==k.line){if(!T.laxcomma){if(al.first){ak("Comma warnings can be turned off with 'laxcomma'");al.first=false;}ak("Bad line breaking before '{a}'.",aB,k.id);}}else{if(!aB.comment&&aB.character!==k.from&&T.white){aB.from+=(aB.character-aB.from);ak("Unexpected space after '{a}'.",aB,aB.value);}}ac(",");Q(aB,k);}function O(ax,bb){var F=a[ax];if(!F||typeof F!=="object"){a[ax]=F={id:ax,lbp:bb,value:ax};}return F;}function aL(F){return O(F,0);}function g(ax,bb){var F=aL(ax);F.identifier=F.reserved=true;F.fud=bb;return F;}function aY(ax,bb){var F=g(ax,bb);F.block=true;return F;}function B(F){var ax=F.id.charAt(0);if((ax>="a"&&ax<="z")||(ax>="A"&&ax<="Z")){F.identifier=F.reserved=true;}return F;}function aH(ax,bb){var F=O(ax,150);B(F);F.nud=(typeof bb==="function")?bb:function(){this.right=aD(150);this.arity="unary";if(this.id==="++"||this.id==="--"){if(T.plusplus){ak("Unexpected use of '{a}'.",this,this.id);}else{if((!this.right.identifier||this.right.reserved)&&this.right.id!=="."&&this.right.id!=="["){ak("Bad operand.",this);}}}return this;};return F;}function aa(ax,bb){var F=aL(ax);F.type=ax;F.nud=bb;return F;}function p(ax,bb){var F=aa(ax,bb);F.identifier=F.reserved=true;return F;}function U(ax,F){return p(ax,function(){if(typeof F==="function"){F(this);}return this;});}function x(bb,bc,bd,ax){var F=O(bb,bd);B(F);F.led=function(be){if(!ax){ah(aM,aB);Q(aB,k);}if(bb==="in"&&be.id==="!"){ak("Confusing use of '{a}'.",be,"!");}if(typeof bc==="function"){return bc(be,this);}else{this.left=be;this.right=aD(bd);return this;}};return F;}function a2(ax,bb){var F=O(ax,100);F.led=function(bd){ah(aM,aB);Q(aB,k);var bc=aD(100);if((bd&&bd.id==="NaN")||(bc&&bc.id==="NaN")){ak("Use the isNaN function to compare with NaN.",this);}else{if(bb){bb.apply(this,[bd,bc]);}}if(bd.id==="!"){ak("Confusing use of '{a}'.",bd,"!");}if(bc.id==="!"){ak("Confusing use of '{a}'.",bc,"!");}this.left=bd;this.right=bc;return this;};return F;}function a9(F){return F&&((F.type==="(number)"&&+F.value===0)||(F.type==="(string)"&&F.value==="")||(F.type==="null"&&!T.eqnull)||F.type==="true"||F.type==="false"||F.type==="undefined");}function ag(F,ax){O(F,20).exps=true;return x(F,function(bd,bc){var bb;bc.left=bd;if(aZ[bd.value]===false&&aC[bd.value]["(global)"]===true){ak("Read only.",bd);}else{if(bd["function"]){ak("'{a}' is a function.",bd,bd.value);}}if(bd){if(T.esnext&&az[bd.value]==="const"){ak("Attempting to override '{a}' which is a constant",bd,bd.value);}if(bd.id==="."||bd.id==="["){if(!bd.left||bd.left.value==="arguments"){ak("Bad assignment.",bc);}bc.right=aD(19);return bc;}else{if(bd.identifier&&!bd.reserved){if(az[bd.value]==="exception"){ak("Do not assign to the exception parameter.",bd);}bc.right=aD(19);return bc;}}if(bd===a["function"]){ak("Expected an identifier in an assignment and instead saw a function invocation.",aB);}}aG("Bad assignment.",bc);},20);}function ay(ax,bb,bc){var F=O(ax,bc);B(F);F.led=(typeof bb==="function")?bb:function(bd){if(T.bitwise){ak("Unexpected use of '{a}'.",this,this.id);}this.left=bd;this.right=aD(bc);return this;};return F;}function i(F){O(F,20).exps=true;return x(F,function(bb,ax){if(T.bitwise){ak("Unexpected use of '{a}'.",ax,ax.id);}Q(aM,aB);Q(aB,k);if(bb){if(bb.id==="."||bb.id==="["||(bb.identifier&&!bb.reserved)){aD(19);return ax;}if(bb===a["function"]){ak("Expected an identifier in an assignment, and instead saw a function invocation.",aB);}return ax;}aG("Bad assignment.",ax);},20);}function av(ax,bb){var F=O(ax,150);F.led=function(bc){if(T.plusplus){ak("Unexpected use of '{a}'.",this,this.id);}else{if((!bc.identifier||bc.reserved)&&bc.id!=="."&&bc.id!=="["){ak("Bad operand.",this);}}this.left=bc;return this;};return F;}function l(F){if(k.identifier){ac();if(aB.reserved&&!T.es5){if(!F||aB.value!=="undefined"){ak("Expected an identifier and instead saw '{a}' (a reserved word).",aB,aB.id);}}return aB.value;}}function ae(F){var ax=l(F);if(ax){return ax;}if(aB.id==="function"&&k.id==="("){ak("Missing name in function declaration.");}else{aG("Expected an identifier and instead saw '{a}'.",k,k.value);}}function W(bb){var ax=0,F;if(k.id!==";"||C){return;}for(;;){F=aN(ax);if(F.reach){return;}if(F.id!=="(endline)"){if(F.id==="function"){if(!T.latedef){break;}ak("Inner functions should be listed at the top of the outer function.",F);break;}ak("Unreachable '{a}' after '{b}'.",F,F.value,bb);break;}ax+=1;}}function a5(bd){var ax=am,bc,bb=aC,F=k;if(F.id===";"){ac(";");return;}if(F.identifier&&!F.reserved&&aN().id===":"){ac();ac(":");aC=Object.create(bb);u(F.value,"label");if(!k.labelled){ak("Label '{a}' on {b} statement.",k,F.value,k.value);}if(v.test(F.value+":")){ak("Label '{a}' looks like a javascript url.",F,F.value);}k.label=F.value;F=k;}if(!bd){b();}bc=aD(0,true);if(!F.block){if(!T.expr&&(!bc||!bc.exps)){ak("Expected an assignment or function call and instead saw an expression.",aB);}else{if(T.nonew&&bc.id==="("&&bc.left.id==="new"){ak("Do not use 'new' for side effects.");}}if(k.id===","){return al();}if(k.id!==";"){if(!T.asi){if(!T.lastsemic||k.id!=="}"||k.line!==aB.line){Z("Missing semicolon.",aB.line,aB.character);}}}else{ar(aB,k);ac(";");Q(aB,k);}}am=ax;aC=bb;return bc;}function aI(bc){var F=[],ax,bb;while(!k.reach&&k.id!=="(end)"){if(k.id===";"){bb=aN();if(!bb||bb.id!=="("){ak("Unnecessary semicolon.");}ac(";");}else{F.push(a5(bc===k.line));}}return F;}function aX(){var ax,bb,F;for(;;){if(k.id==="(string)"){bb=aN(0);if(bb.id==="(endline)"){ax=1;do{F=aN(ax);ax=ax+1;}while(F.id==="(endline)");if(F.id!==";"){if(F.id!=="(string)"&&F.id!=="(number)"&&F.id!=="(regexp)"&&F.identifier!==true&&F.id!=="}"){break;}ak("Missing semicolon.",k);}else{bb=F;}}else{if(bb.id==="}"){ak("Missing semicolon.",bb);}else{if(bb.id!==";"){break;}}}b();ac();if(aw[aB.value]){ak('Unnecessary directive "{a}".',aB,aB.value);}if(aB.value==="use strict"){T.newcap=true;T.undef=true;}aw[aB.value]=true;if(bb.id===";"){ac(";");}continue;}break;}}function D(bg,ax,bc){var bf,be=aA,F=am,bb,bj=aC,bh,bi,bd;aA=bg;if(!bg||!T.funcscope){aC=Object.create(aC);}Q(aB,k);bh=k;if(k.id==="{"){ac("{");bi=aB.line;if(k.id!=="}"){am+=T.indent;while(!bg&&k.from>am){am+=T.indent;}if(bc){bb={};for(bd in aw){if(aP(aw,bd)){bb[bd]=aw[bd];}}aX();if(T.strict&&az["(context)"]["(global)"]){if(!bb["use strict"]&&!aw["use strict"]){ak('Missing "use strict" statement.');}}}bf=aI(bi);if(bc){aw=bb;}am-=T.indent;if(bi!==k.line){b();}}else{if(bi!==k.line){b();}}ac("}",bh);am=F;}else{if(!bg){aG("Expected '{a}' and instead saw '{b}'.",k,"{",k.value);}else{if(!ax||T.curly){ak("Expected '{a}' and instead saw '{b}'.",k,"{",k.value);}C=true;am+=T.indent;bf=[a5(k.line===aB.line)];am-=T.indent;C=false;}}az["(verb)"]=null;if(!bg||!T.funcscope){aC=bj;}aA=be;if(bg&&T.noempty&&(!bf||bf.length===0)){ak("Empty block.");}return bf;}function h(F){if(aR&&typeof aR[F]!=="boolean"){ak("Unexpected /*member '{a}'.",aB,F);}if(typeof aF[F]==="number"){aF[F]+=1;}else{aF[F]=1;}}function a0(bc){var bb=bc.value,ax=bc.line,F=aQ[bb];if(typeof F==="function"){F=false;}if(!F){F=[ax];aQ[bb]=F;}else{if(F[F.length-1]!==ax){F.push(ax);}}}aa("(number)",function(){return this;});aa("(string)",function(){return this;});a["(identifier)"]={type:"(identifier)",lbp:0,identifier:true,nud:function(){var F=this.value,ax=aC[F],bb;if(typeof ax==="function"){ax=undefined;}else{if(typeof ax==="boolean"){bb=az;az=z[0];u(F,"var");ax=az;az=bb;}}if(az===ax){switch(az[F]){case"unused":az[F]="var";break;case"unction":az[F]="function";this["function"]=true;break;case"function":this["function"]=true;break;case"label":ak("'{a}' is a statement label.",aB,F);break;}}else{if(az["(global)"]){if(T.undef&&typeof aZ[F]!=="boolean"){if(!(aW==="typeof"||aW==="delete")||(k&&(k.value==="."||k.value==="["))){c(az,"'{a}' is not defined.",aB,F);}}a0(aB);}else{switch(az[F]){case"closure":case"function":case"var":case"unused":ak("'{a}' used out of scope.",aB,F);break;case"label":ak("'{a}' is a statement label.",aB,F);break;case"outer":case"global":break;default:if(ax===true){az[F]=true;}else{if(ax===null){ak("'{a}' is not allowed.",aB,F);a0(aB);}else{if(typeof ax!=="object"){if(T.undef){if(!(aW==="typeof"||aW==="delete")||(k&&(k.value==="."||k.value==="["))){c(az,"'{a}' is not defined.",aB,F);}}az[F]=true;a0(aB);}else{switch(ax[F]){case"function":case"unction":this["function"]=true;ax[F]="closure";az[F]=ax["(global)"]?"global":"outer";break;case"var":case"unused":ax[F]="closure";az[F]=ax["(global)"]?"global":"outer";break;case"closure":case"parameter":az[F]=ax["(global)"]?"global":"outer";break;case"label":ak("'{a}' is a statement label.",aB,F);}}}}}}}return this;},led:function(){aG("Expected an operator and instead saw '{a}'.",k,k.value);}};aa("(regexp)",function(){return this;});aL("(endline)");aL("(begin)");aL("(end)").reach=true;aL("</").reach=true;aL("<!");aL("<!--");aL("-->");aL("(error)").reach=true;aL("}").reach=true;aL(")");aL("]");aL('"').reach=true;aL("'").reach=true;aL(";");aL(":").reach=true;aL(",");aL("#");aL("@");p("else");p("case").reach=true;p("catch");p("default").reach=true;p("finally");U("arguments",function(F){if(aw["use strict"]&&az["(global)"]){ak("Strict violation.",F);}});U("eval");U("false");U("Infinity");U("NaN");U("null");U("this",function(F){if(aw["use strict"]&&!T.validthis&&((az["(statement)"]&&az["(name)"].charAt(0)>"Z")||az["(global)"])){ak("Possible strict violation.",F);}});U("true");U("undefined");ag("=","assign",20);ag("+=","assignadd",20);ag("-=","assignsub",20);ag("*=","assignmult",20);ag("/=","assigndiv",20).nud=function(){aG("A regular expression literal can be confused with '/='.");};ag("%=","assignmod",20);i("&=","assignbitand",20);i("|=","assignbitor",20);i("^=","assignbitxor",20);i("<<=","assignshiftleft",20);i(">>=","assignshiftright",20);i(">>>=","assignshiftrightunsigned",20);x("?",function(ax,F){F.left=ax;F.right=aD(10);ac(":");F["else"]=aD(10);return F;},30);x("||","or",40);x("&&","and",50);ay("|","bitor",70);ay("^","bitxor",80);ay("&","bitand",90);a2("==",function(ax,F){var bb=T.eqnull&&(ax.value==="null"||F.value==="null");if(!bb&&T.eqeqeq){ak("Expected '{a}' and instead saw '{b}'.",this,"===","==");}else{if(a9(ax)){ak("Use '{a}' to compare with '{b}'.",this,"===",ax.value);}else{if(a9(F)){ak("Use '{a}' to compare with '{b}'.",this,"===",F.value);}}}return this;});a2("===");a2("!=",function(ax,F){var bb=T.eqnull&&(ax.value==="null"||F.value==="null");if(!bb&&T.eqeqeq){ak("Expected '{a}' and instead saw '{b}'.",this,"!==","!=");}else{if(a9(ax)){ak("Use '{a}' to compare with '{b}'.",this,"!==",ax.value);}else{if(a9(F)){ak("Use '{a}' to compare with '{b}'.",this,"!==",F.value);}}}return this;});a2("!==");a2("<");a2(">");a2("<=");a2(">=");ay("<<","shiftleft",120);ay(">>","shiftright",120);ay(">>>","shiftrightunsigned",120);x("in","in",120);x("instanceof","instanceof",120);x("+",function(bb,ax){var F=aD(130);if(bb&&F&&bb.id==="(string)"&&F.id==="(string)"){bb.value+=F.value;bb.character=F.character;if(!T.scripturl&&v.test(bb.value)){ak("JavaScript URL.",bb);}return bb;}ax.left=bb;ax.right=F;return ax;},130);aH("+","num");aH("+++",function(){ak("Confusing pluses.");this.right=aD(150);this.arity="unary";return this;});x("+++",function(F){ak("Confusing pluses.");this.left=F;this.right=aD(130);return this;},130);x("-","sub",130);aH("-","neg");aH("---",function(){ak("Confusing minuses.");this.right=aD(150);this.arity="unary";return this;});x("---",function(F){ak("Confusing minuses.");this.left=F;this.right=aD(130);return this;},130);x("*","mult",140);x("/","div",140);x("%","mod",140);av("++","postinc");aH("++","preinc");a["++"].exps=true;av("--","postdec");aH("--","predec");a["--"].exps=true;aH("delete",function(){var F=aD(0);if(!F||(F.id!=="."&&F.id!=="[")){ak("Variables should not be deleted.");}this.first=F;return this;}).exps=true;aH("~",function(){if(T.bitwise){ak("Unexpected '{a}'.",this,"~");}aD(150);return this;});aH("!",function(){this.right=aD(150);this.arity="unary";if(s[this.right.id]===true){ak("Confusing use of '{a}'.",this,"!");}return this;});aH("typeof","typeof");aH("new",function(){var ax=aD(155),F;if(ax&&ax.id!=="function"){if(ax.identifier){ax["new"]=true;switch(ax.value){case"Number":case"String":case"Boolean":case"Math":case"JSON":ak("Do not use {a} as a constructor.",aB,ax.value);break;case"Function":if(!T.evil){ak("The Function constructor is eval.");}break;case"Date":case"RegExp":break;default:if(ax.id!=="function"){F=ax.value.substr(0,1);if(T.newcap&&(F<"A"||F>"Z")){ak("A constructor name should start with an uppercase letter.",aB);}}}}else{if(ax.id!=="."&&ax.id!=="["&&ax.id!=="("){ak("Bad constructor.",aB);}}}else{if(!T.supernew){ak("Weird construction. Delete 'new'.",this);}}ar(aB,k);if(k.id!=="("&&!T.supernew){ak("Missing '()' invoking a constructor.");}this.first=ax;return this;});a["new"].exps=true;aH("void").exps=true;x(".",function(bb,ax){ar(aM,aB);aJ();var F=ae();if(typeof F==="string"){h(F);}ax.left=bb;ax.right=F;if(bb&&bb.value==="arguments"&&(F==="callee"||F==="caller")){if(T.noarg){ak("Avoid arguments.{a}.",bb,F);}else{if(aw["use strict"]){aG("Strict violation.");}}}else{if(!T.evil&&bb&&bb.value==="document"&&(F==="write"||F==="writeln")){ak("document.write can be a form of eval.",bb);}}if(!T.evil&&(F==="eval"||F==="execScript")){ak("eval is evil.");}return ax;},160,true);x("(",function(bb,F){if(aM.id!=="}"&&aM.id!==")"){aJ(aM,aB);}R();if(T.immed&&!bb.immed&&bb.id==="function"){ak("Wrap an immediate function invocation in parentheses to assist the reader in understanding that the expression is the result of a function, and not the function itself.");}var bc=0,ax=[];if(bb){if(bb.type==="(identifier)"){if(bb.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)){if(bb.value!=="Number"&&bb.value!=="String"&&bb.value!=="Boolean"&&bb.value!=="Date"){if(bb.value==="Math"){ak("Math is not a function.",bb);}else{if(T.newcap){ak("Missing 'new' prefix when invoking a constructor.",bb);}}}}}}if(k.id!==")"){for(;;){ax[ax.length]=aD(10);bc+=1;if(k.id!==","){break;}al();}}ac(")");R(aM,aB);if(typeof bb==="object"){if(bb.value==="parseInt"&&bc===1){ak("Missing radix parameter.",bb);}if(!T.evil){if(bb.value==="eval"||bb.value==="Function"||bb.value==="execScript"){ak("eval is evil.",bb);}else{if(ax[0]&&ax[0].id==="(string)"&&(bb.value==="setTimeout"||bb.value==="setInterval")){ak("Implied eval is evil. Pass a function instead of a string.",bb);}}}if(!bb.identifier&&bb.id!=="."&&bb.id!=="["&&bb.id!=="("&&bb.id!=="&&"&&bb.id!=="||"&&bb.id!=="?"){ak("Bad invocation.",bb);}}F.left=bb;return F;},155,true).exps=true;aH("(",function(){R();if(k.id==="function"){k.immed=true;}var F=aD(0);ac(")",this);R(aM,aB);if(T.immed&&F.id==="function"){if(k.id==="("||(k.id==="."&&(aN().value==="call"||aN().value==="apply"))){ak("Move the invocation into the parens that contain the function.",k);}else{ak("Do not wrap function literals in parens unless they are to be immediately invoked.",this);}}return F;});x("[",function(bc,ax){aJ(aM,aB);R();var bb=aD(0),F;if(bb&&bb.type==="(string)"){if(!T.evil&&(bb.value==="eval"||bb.value==="execScript")){ak("eval is evil.",ax);}h(bb.value);if(!T.sub&&L.test(bb.value)){F=a[bb.value];if(!F||!F.reserved){ak("['{a}'] is better written in dot notation.",bb,bb.value);}}}ac("]",ax);R(aM,aB);ax.left=bc;ax.right=bb;return ax;},160,true);aH("[",function(){var F=aB.line!==k.line;this.first=[];if(F){am+=T.indent;if(k.from===am+T.indent){am+=T.indent;}}while(k.id!=="(end)"){while(k.id===","){ak("Extra comma.");ac(",");}if(k.id==="]"){break;}if(F&&aB.line!==k.line){b();}this.first.push(aD(10));if(k.id===","){al();if(k.id==="]"&&!T.es5){ak("Extra comma.",aB);break;}}else{break;}}if(F){am-=T.indent;b();}ac("]",this);return this;},160);function f(){var F=l(true);if(!F){if(k.id==="(string)"){F=k.value;ac();}else{if(k.id==="(number)"){F=k.value.toString();ac();}}}return F;}function N(){var ax,F=k,bb=[];ac("(");R();if(k.id===")"){ac(")");return;}for(;;){ax=ae(true);bb.push(ax);u(ax,"parameter");if(k.id===","){al();}else{ac(")",F);R(aM,aB);return bb;}}}function I(bb,bc){var bd,ax=T,F=aC;T=Object.create(T);aC=Object.create(aC);az={"(name)":bb||'"'+aW+'"',"(line)":k.line,"(context)":az,"(breakage)":0,"(loopage)":0,"(scope)":aC,"(statement)":bc};bd=az;aB.funct=az;z.push(az);if(bb){u(bb,"function");}az["(params)"]=N();D(false,false,true);aC=F;T=ax;az["(last)"]=aB.line;az=az["(context)"];return bd;}(function(F){F.nud=function(){var bj,bg,bf,be,bb,bk;var bi={};function bc(bl,bm){if(bi[bl]&&aP(bi,bl)){ak("Duplicate member '{a}'.",k,bf);}else{bi[bl]={};}bi[bl].basic=true;bi[bl].basicToken=bm;}function bd(bl,bm){if(bi[bl]&&aP(bi,bl)){if(bi[bl].basic||bi[bl].setter){ak("Duplicate member '{a}'.",k,bf);}}else{bi[bl]={};}bi[bl].setter=true;bi[bl].setterToken=bm;}function bh(bl){if(bi[bl]&&aP(bi,bl)){if(bi[bl].basic||bi[bl].getter){ak("Duplicate member '{a}'.",k,bf);}}else{bi[bl]={};}bi[bl].getter=true;bi[bl].getterToken=aB;}bj=aB.line!==k.line;if(bj){am+=T.indent;if(k.from===am+T.indent){am+=T.indent;}}for(;;){if(k.id==="}"){break;}if(bj){b();}if(k.value==="get"&&aN().id!==":"){ac("get");if(!T.es5){aG("get/set are ES5 features.");}bf=f();if(!bf){aG("Missing property name.");}bh(bf);bk=k;ar(aB,k);bg=I();bb=bg["(params)"];if(bb){ak("Unexpected parameter '{a}' in get {b} function.",bk,bb[0],bf);}ar(aB,k);}else{if(k.value==="set"&&aN().id!==":"){ac("set");if(!T.es5){aG("get/set are ES5 features.");}bf=f();if(!bf){aG("Missing property name.");}bd(bf,k);bk=k;ar(aB,k);bg=I();bb=bg["(params)"];if(!bb||bb.length!==1){ak("Expected a single parameter in set {a} function.",bk,bf);}}else{bf=f();bc(bf,k);if(typeof bf!=="string"){break;}ac(":");Q(aB,k);aD(10);}}h(bf);if(k.id===","){al();if(k.id===","){ak("Extra comma.",aB);}else{if(k.id==="}"&&!T.es5){ak("Extra comma.",aB);}}}else{break;}}if(bj){am-=T.indent;b();}ac("}",this);if(T.es5){for(var ax in bi){if(aP(bi,ax)&&bi[ax].setter&&!bi[ax].getter){ak("Setter is defined without getter.",bi[ax].setterToken);}}}return this;};F.fud=function(){aG("Expected to see a statement and instead saw a block.",aB);};}(aL("{")));M=function(){var F=g("const",function(bc){var bd,ax,bb;this.first=[];for(;;){Q(aB,k);bd=ae();if(az[bd]==="const"){ak("const '"+bd+"' has already been declared");}if(az["(global)"]&&aZ[bd]===false){ak("Redefinition of '{a}'.",aB,bd);}u(bd,"const");if(bc){break;}ax=aB;this.first.push(aB);if(k.id!=="="){ak("const '{a}' is initialized to 'undefined'.",aB,bd);}if(k.id==="="){Q(aB,k);ac("=");Q(aB,k);if(k.id==="undefined"){ak("It is not necessary to initialize '{a}' to 'undefined'.",aB,bd);}if(aN(0).id==="="&&k.identifier){aG("Constant {a} was not declared correctly.",k,k.value);}bb=aD(0);ax.first=bb;}if(k.id!==","){break;}al();}return this;});F.exps=true;};var aO=g("var",function(bb){var bc,F,ax;if(az["(onevar)"]&&T.onevar){ak("Too many var statements.");}else{if(!az["(global)"]){az["(onevar)"]=true;}}this.first=[];for(;;){Q(aB,k);bc=ae();if(T.esnext&&az[bc]==="const"){ak("const '"+bc+"' has already been declared");}if(az["(global)"]&&aZ[bc]===false){ak("Redefinition of '{a}'.",aB,bc);}u(bc,"unused");if(bb){break;}F=aB;this.first.push(aB);if(k.id==="="){Q(aB,k);ac("=");Q(aB,k);if(k.id==="undefined"){ak("It is not necessary to initialize '{a}' to 'undefined'.",aB,bc);}if(aN(0).id==="="&&k.identifier){aG("Variable {a} was not declared correctly.",k,k.value);}ax=aD(0);F.first=ax;}if(k.id!==","){break;}al();}return this;});aO.exps=true;aY("function",function(){if(aA){ak("Function declarations should not be placed in blocks. Use a function expression or move the statement to the top of the outer function.",aB);}var F=ae();if(T.esnext&&az[F]==="const"){ak("const '"+F+"' has already been declared");}ar(aB,k);u(F,"unction");I(F,true);if(k.id==="("&&k.line===aB.line){aG("Function declarations are not invocable. Wrap the whole function invocation in parens.");}return this;});aH("function",function(){var F=l();if(F){ar(aB,k);}else{Q(aB,k);}I(F);if(!T.loopfunc&&az["(loopage)"]){ak("Don't make functions within a loop.");}return this;});aY("if",function(){var F=k;ac("(");Q(this,F);R();aD(20);if(k.id==="="){if(!T.boss){ak("Expected a conditional expression and instead saw an assignment.");}ac("=");aD(20);}ac(")",F);R(aM,aB);D(true,true);if(k.id==="else"){Q(aB,k);ac("else");if(k.id==="if"||k.id==="switch"){a5(true);}else{D(true,true);}}return this;});aY("try",function(){var F,bb,ax;D(false);if(k.id==="catch"){ac("catch");Q(aB,k);ac("(");ax=aC;aC=Object.create(ax);bb=k.value;if(k.type!=="(identifier)"){ak("Expected an identifier and instead saw '{a}'.",k,bb);}else{u(bb,"exception");}ac();ac(")");D(false);F=true;aC=ax;}if(k.id==="finally"){ac("finally");D(false);return;}else{if(!F){aG("Expected '{a}' and instead saw '{b}'.",k,"catch",k.value);}}return this;});aY("while",function(){var F=k;az["(breakage)"]+=1;az["(loopage)"]+=1;ac("(");Q(this,F);R();aD(20);if(k.id==="="){if(!T.boss){ak("Expected a conditional expression and instead saw an assignment.");}ac("=");aD(20);}ac(")",F);R(aM,aB);D(true,true);az["(breakage)"]-=1;az["(loopage)"]-=1;return this;}).labelled=true;aY("with",function(){var F=k;if(aw["use strict"]){aG("'with' is not allowed in strict mode.",aB);}else{if(!T.withstmt){ak("Don't use 'with'.",aB);}}ac("(");Q(this,F);R();aD(0);ac(")",F);R(aM,aB);D(true,true);return this;});aY("switch",function(){var F=k,ax=false;az["(breakage)"]+=1;ac("(");Q(this,F);R();this.condition=aD(20);ac(")",F);R(aM,aB);Q(aB,k);F=k;ac("{");Q(aB,k);am+=T.indent;this.cases=[];for(;;){switch(k.id){case"case":switch(az["(verb)"]){case"break":case"case":case"continue":case"return":case"switch":case"throw":break;default:if(!aT.test(a4[k.line-2])){ak("Expected a 'break' statement before 'case'.",aB);}}b(-T.indent);ac("case");this.cases.push(aD(20));ax=true;ac(":");az["(verb)"]="case";break;case"default":switch(az["(verb)"]){case"break":case"continue":case"return":case"throw":break;default:if(!aT.test(a4[k.line-2])){ak("Expected a 'break' statement before 'default'.",aB);}}b(-T.indent);ac("default");ax=true;ac(":");break;case"}":am-=T.indent;b();ac("}",F);if(this.cases.length===1||this.condition.id==="true"||this.condition.id==="false"){if(!T.onecase){ak("This 'switch' should be an 'if'.",this);}}az["(breakage)"]-=1;az["(verb)"]=undefined;return;case"(end)":aG("Missing '{a}'.",k,"}");return;default:if(ax){switch(aB.id){case",":aG("Each value should have its own case label.");return;case":":ax=false;aI();break;default:aG("Missing ':' on a case clause.",aB);return;}}else{if(aB.id===":"){ac(":");aG("Unexpected '{a}'.",aB,":");aI();}else{aG("Expected '{a}' and instead saw '{b}'.",k,"case",k.value);return;}}}}}).labelled=true;g("debugger",function(){if(!T.debug){ak("All 'debugger' statements should be removed.");}return this;}).exps=true;(function(){var F=g("do",function(){az["(breakage)"]+=1;az["(loopage)"]+=1;this.first=D(true);ac("while");var ax=k;Q(aB,ax);ac("(");R();aD(20);if(k.id==="="){if(!T.boss){ak("Expected a conditional expression and instead saw an assignment.");}ac("=");aD(20);}ac(")",ax);R(aM,aB);az["(breakage)"]-=1;az["(loopage)"]-=1;return this;});F.labelled=true;F.exps=true;}());aY("for",function(){var ax,F=k;az["(breakage)"]+=1;az["(loopage)"]+=1;ac("(");Q(this,F);R();if(aN(k.id==="var"?1:0).id==="in"){if(k.id==="var"){ac("var");aO.fud.call(aO,true);}else{switch(az[k.value]){case"unused":az[k.value]="var";break;case"var":break;default:ak("Bad for in variable '{a}'.",k,k.value);}ac();}ac("in");aD(20);ac(")",F);ax=D(true,true);if(T.forin&&ax&&(ax.length>1||typeof ax[0]!=="object"||ax[0].value!=="if")){ak("The body of a for in should be wrapped in an if statement to filter unwanted properties from the prototype.",this);}az["(breakage)"]-=1;az["(loopage)"]-=1;return this;}else{if(k.id!==";"){if(k.id==="var"){ac("var");aO.fud.call(aO);}else{for(;;){aD(0,"for");if(k.id!==","){break;}al();}}}a7(aB);ac(";");if(k.id!==";"){aD(20);if(k.id==="="){if(!T.boss){ak("Expected a conditional expression and instead saw an assignment.");}ac("=");aD(20);}}a7(aB);ac(";");if(k.id===";"){aG("Expected '{a}' and instead saw '{b}'.",k,")",";");}if(k.id!==")"){for(;;){aD(0,"for");if(k.id!==","){break;}al();}}ac(")",F);R(aM,aB);D(true,true);az["(breakage)"]-=1;az["(loopage)"]-=1;return this;}}).labelled=true;g("break",function(){var F=k.value;if(az["(breakage)"]===0){ak("Unexpected '{a}'.",k,this.value);}if(!T.asi){a7(this);}if(k.id!==";"){if(aB.line===k.line){if(az[F]!=="label"){ak("'{a}' is not a statement label.",k,F);}else{if(aC[F]!==az){ak("'{a}' is out of scope.",k,F);}}this.first=k;ac();}}W("break");return this;}).exps=true;g("continue",function(){var F=k.value;if(az["(breakage)"]===0){ak("Unexpected '{a}'.",k,this.value);}if(!T.asi){a7(this);}if(k.id!==";"){if(aB.line===k.line){if(az[F]!=="label"){ak("'{a}' is not a statement label.",k,F);}else{if(aC[F]!==az){ak("'{a}' is out of scope.",k,F);}}this.first=k;ac();}}else{if(!az["(loopage)"]){ak("Unexpected '{a}'.",k,this.value);}}W("continue");return this;}).exps=true;g("return",function(){if(this.line===k.line){if(k.id==="(regexp)"){ak("Wrap the /regexp/ literal in parens to disambiguate the slash operator.");}if(k.id!==";"&&!k.reach){Q(aB,k);if(aN().value==="="&&!T.boss){Z("Did you mean to return a conditional instead of an assignment?",aB.line,aB.character+1);}this.first=aD(0);}}else{if(!T.asi){a7(this);}}W("return");return this;}).exps=true;g("throw",function(){a7(this);Q(aB,k);this.first=aD(20);W("throw");return this;}).exps=true;p("class");p("const");p("enum");p("export");p("extends");p("import");p("super");p("let");p("yield");p("implements");p("interface");p("package");p("private");p("protected");p("public");p("static");function o(){function F(){var bc={},bb=k;ac("{");if(k.id!=="}"){for(;;){if(k.id==="(end)"){aG("Missing '}' to match '{' from line {a}.",k,bb.line);}else{if(k.id==="}"){ak("Unexpected comma.",aB);break;}else{if(k.id===","){aG("Unexpected comma.",k);}else{if(k.id!=="(string)"){ak("Expected a string and instead saw {a}.",k,k.value);}}}}if(bc[k.value]===true){ak("Duplicate key '{a}'.",k,k.value);}else{if((k.value==="__proto__"&&!T.proto)||(k.value==="__iterator__"&&!T.iterator)){ak("The '{a}' key may produce unexpected results.",k,k.value);}else{bc[k.value]=true;}}ac();ac(":");o();if(k.id!==","){break;}ac(",");}}ac("}");}function ax(){var bb=k;ac("[");if(k.id!=="]"){for(;;){if(k.id==="(end)"){aG("Missing ']' to match '[' from line {a}.",k,bb.line);}else{if(k.id==="]"){ak("Unexpected comma.",aB);break;}else{if(k.id===","){aG("Unexpected comma.",k);}}}o();if(k.id!==","){break;}ac(",");}}ac("]");}switch(k.id){case"{":F();break;case"[":ax();break;case"true":case"false":case"null":case"(number)":case"(string)":ac();break;case"-":ac("-");if(aB.character!==k.from){ak("Unexpected space after '-'.",aB);}ar(aB,k);ac("(number)");break;default:aG("Expected a JSON value.",k);}}var H=function(bm,ax,bf){var bj,bd,bc,bk,bl,bb={};JSHINT.errors=[];JSHINT.undefs=[];aZ=Object.create(a3);a8(aZ,bf||{});if(ax){bj=ax.predef;if(bj){if(Array.isArray(bj)){for(bd=0;bd<bj.length;bd+=1){aZ[bj[bd]]=true;}}else{if(typeof bj==="object"){bc=Object.keys(bj);for(bd=0;bd<bc.length;bd+=1){aZ[bc[bd]]=!!bj[bc[bd]];}}}}bl=Object.keys(ax);for(bk=0;bk<bl.length;bk++){bb[bl[bk]]=ax[bl[bk]];}}T=bb;T.indent=T.indent||4;T.maxerr=T.maxerr||50;m="";for(bd=0;bd<T.indent;bd+=1){m+=" ";}am=1;A=Object.create(aZ);aC=A;az={"(global)":true,"(name)":"(global)","(scope)":aC,"(breakage)":0,"(loopage)":0};z=[az];S=[];au=null;aF={};aR=null;aQ={};aA=false;K=[];j=false;y=0;aj.init(bm);q=true;aw={};aM=aB=k=a["(begin)"];for(var F in ax){if(aP(ax,F)){a1(F,aB);}}af();a8(aZ,bf||{});al.first=true;try{ac();switch(k.id){case"{":case"[":T.laxbreak=true;j=true;o();break;default:aX();if(aw["use strict"]&&!T.globalstrict){ak('Use the function form of "use strict".',aM);}aI();}ac("(end)");var be=function(bn,bo){do{if(typeof bo[bn]==="string"){if(bo[bn]==="unused"){bo[bn]="var";}else{if(bo[bn]==="unction"){bo[bn]="closure";}}return true;}bo=bo["(context)"];}while(bo);return false;};var bi=function(bo,bn){if(!aQ[bo]){return;}var bq=[];for(var bp=0;bp<aQ[bo].length;bp+=1){if(aQ[bo][bp]!==bn){bq.push(aQ[bo][bp]);}}if(bq.length===0){delete aQ[bo];}else{aQ[bo]=bq;}};for(bd=0;bd<JSHINT.undefs.length;bd+=1){bc=JSHINT.undefs[bd].slice(0);if(be(bc[2].value,bc[0])){bi(bc[2].value,bc[2].line);}else{ak.apply(ak,bc.slice(1));}}}catch(bg){if(bg){var bh=k||{};JSHINT.errors.push({raw:bg.raw,reason:bg.message,line:bg.line||bh.line,character:bg.character||bh.from},null);}}return JSHINT.errors.length===0;};H.data=function(){var be={functions:[],options:T},bd,bf,bj=[],bh,bg,bb,bc=[],F,ax=[],bi;if(H.errors.length){be.errors=H.errors;}if(j){be.json=true;}for(F in aQ){if(aP(aQ,F)){bj.push({name:F,line:aQ[F]});}}if(bj.length>0){be.implieds=bj;}if(S.length>0){be.urls=S;}bf=Object.keys(aC);if(bf.length>0){be.globals=bf;}for(bg=1;bg<z.length;bg+=1){bh=z[bg];bd={};for(bb=0;bb<aK.length;bb+=1){bd[aK[bb]]=[];}for(F in bh){if(aP(bh,F)&&F.charAt(0)!=="("){bi=bh[F];if(bi==="unction"){bi="unused";}if(Array.isArray(bd[bi])){bd[bi].push(F);if(bi==="unused"){ax.push({name:F,line:bh["(line)"],"function":bh["(name)"]});}}}}for(bb=0;bb<aK.length;bb+=1){if(bd[aK[bb]].length===0){delete bd[aK[bb]];}}bd.name=bh["(name)"];bd.param=bh["(params)"];bd.line=bh["(line)"];bd.last=bh["(last)"];be.functions.push(bd);}if(ax.length>0){be.unused=ax;}bc=[];for(F in aF){if(typeof aF[F]==="number"){be.member=aF;break;}}return be;};H.report=function(bh){var bf=H.data();var bm=[],bl,bk,be,bj,bg,bd,bc,bb="",ax,F=[],bn;function bi(br,bs){var bo,bq,bp;if(bs){F.push("<div><i>"+br+"</i> ");bs=bs.sort();for(bq=0;bq<bs.length;bq+=1){if(bs[bq]!==bp){bp=bs[bq];F.push((bo?", ":"")+bp);bo=true;}}F.push("</div>");}}if(bf.errors||bf.implieds||bf.unused){be=true;F.push("<div id=errors><i>Error:</i>");if(bf.errors){for(bg=0;bg<bf.errors.length;bg+=1){bl=bf.errors[bg];if(bl){bk=bl.evidence||"";F.push("<p>Problem"+(isFinite(bl.line)?" at line "+bl.line+" character "+bl.character:"")+": "+bl.reason.entityify()+"</p><p class=evidence>"+(bk&&(bk.length>80?bk.slice(0,77)+"...":bk).entityify())+"</p>");}}}if(bf.implieds){bn=[];for(bg=0;bg<bf.implieds.length;bg+=1){bn[bg]="<code>"+bf.implieds[bg].name+"</code>&nbsp;<i>"+bf.implieds[bg].line+"</i>";}F.push("<p><i>Implied global:</i> "+bn.join(", ")+"</p>");}if(bf.unused){bn=[];for(bg=0;bg<bf.unused.length;bg+=1){bn[bg]="<code><u>"+bf.unused[bg].name+"</u></code>&nbsp;<i>"+bf.unused[bg].line+"</i> <code>"+bf.unused[bg]["function"]+"</code>";}F.push("<p><i>Unused variable:</i> "+bn.join(", ")+"</p>");}if(bf.json){F.push("<p>JSON: bad.</p>");}F.push("</div>");}if(!bh){F.push("<br><div id=functions>");if(bf.urls){bi("URLs<br>",bf.urls,"<br>");}if(bf.json&&!be){F.push("<p>JSON: good.</p>");}else{if(bf.globals){F.push("<div><i>Global</i> "+bf.globals.sort().join(", ")+"</div>");}else{F.push("<div><i>No new global variables introduced.</i></div>");}}for(bg=0;bg<bf.functions.length;bg+=1){bj=bf.functions[bg];F.push("<br><div class=function><i>"+bj.line+"-"+bj.last+"</i> "+(bj.name||"")+"("+(bj.param?bj.param.join(", "):"")+")</div>");bi("<big><b>Unused</b></big>",bj.unused);bi("Closure",bj.closure);bi("Variable",bj["var"]);bi("Exception",bj.exception);bi("Outer",bj.outer);bi("Global",bj.global);bi("Label",bj.label);}if(bf.member){bm=Object.keys(bf.member);if(bm.length){bm=bm.sort();bb="<br><pre id=members>/*members ";bc=10;for(bg=0;bg<bm.length;bg+=1){bd=bm[bg];ax=bd.name();if(bc+ax.length>72){F.push(bb+"<br>");bb="    ";bc=1;}bc+=ax.length+2;if(bf.member[bd]===1){ax="<i>"+ax+"</i>";}if(bg<bm.length-1){ax+=", ";}bb+=ax;}F.push(bb+"<br>*/</pre>");}F.push("</div>");}}return F.join("");};H.jshint=H;return H;}());if(typeof exports==="object"&&exports){exports.JSHINT=JSHINT;}
;var exports=exports||{};var CSSLint=(function(){
    ;var parserlib={};(function(){function EventTarget(){this._listeners={};}EventTarget.prototype={constructor:EventTarget,addListener:function(type,listener){if(!this._listeners[type]){this._listeners[type]=[];}this._listeners[type].push(listener);},fire:function(event){if(typeof event=="string"){event={type:event};}if(typeof event.target!="undefined"){event.target=this;}if(typeof event.type=="undefined"){throw new Error("Event object missing 'type' property.");}if(this._listeners[event.type]){var listeners=this._listeners[event.type].concat();for(var i=0,len=listeners.length;i<len;i++){listeners[i].call(this,event);}}},removeListener:function(type,listener){if(this._listeners[type]){var listeners=this._listeners[type];for(var i=0,len=listeners.length;i<len;i++){if(listeners[i]===listener){listeners.splice(i,1);break;}}}}};function StringReader(text){this._input=text.replace(/\n\r?/g,"\n");this._line=1;this._col=1;this._cursor=0;}StringReader.prototype={constructor:StringReader,getCol:function(){return this._col;},getLine:function(){return this._line;},eof:function(){return(this._cursor==this._input.length);},peek:function(count){var c=null;count=(typeof count=="undefined"?1:count);if(this._cursor<this._input.length){c=this._input.charAt(this._cursor+count-1);}return c;},read:function(){var c=null;if(this._cursor<this._input.length){if(this._input.charAt(this._cursor)=="\n"){this._line++;this._col=1;}else{this._col++;}c=this._input.charAt(this._cursor++);}return c;},mark:function(){this._bookmark={cursor:this._cursor,line:this._line,col:this._col};},reset:function(){if(this._bookmark){this._cursor=this._bookmark.cursor;this._line=this._bookmark.line;this._col=this._bookmark.col;delete this._bookmark;}},readTo:function(pattern){var buffer="",c;while(buffer.length<pattern.length||buffer.lastIndexOf(pattern)!=buffer.length-pattern.length){c=this.read();if(c){buffer+=c;}else{throw new Error('Expected "'+pattern+'" at line '+this._line+", col "+this._col+".");}}return buffer;},readWhile:function(filter){var buffer="",c=this.read();while(c!==null&&filter(c)){buffer+=c;c=this.read();}return buffer;},readMatch:function(matcher){var source=this._input.substring(this._cursor),value=null;if(typeof matcher=="string"){if(source.indexOf(matcher)===0){value=this.readCount(matcher.length);}}else{if(matcher instanceof RegExp){if(matcher.test(source)){value=this.readCount(RegExp.lastMatch.length);}}}return value;},readCount:function(count){var buffer="";while(count--){buffer+=this.read();}return buffer;}};function SyntaxError(message,line,col){this.col=col;this.line=line;this.message=message;}SyntaxError.prototype=new Error();function SyntaxUnit(text,line,col,type){this.col=col;this.line=line;this.text=text;this.type=type;}SyntaxUnit.fromToken=function(token){return new SyntaxUnit(token.value,token.startLine,token.startCol);};SyntaxUnit.prototype={constructor:SyntaxUnit,valueOf:function(){return this.toString();},toString:function(){return this.text;}};function TokenStreamBase(input,tokenData){this._reader=input?new StringReader(input.toString()):null;this._token=null;this._tokenData=tokenData;this._lt=[];this._ltIndex=0;this._ltIndexCache=[];}TokenStreamBase.createTokenData=function(tokens){var nameMap=[],typeMap={},tokenData=tokens.concat([]),i=0,len=tokenData.length+1;tokenData.UNKNOWN=-1;tokenData.unshift({name:"EOF"});for(;i<len;i++){nameMap.push(tokenData[i].name);tokenData[tokenData[i].name]=i;if(tokenData[i].text){typeMap[tokenData[i].text]=i;}}tokenData.name=function(tt){return nameMap[tt];};tokenData.type=function(c){return typeMap[c];};return tokenData;};TokenStreamBase.prototype={constructor:TokenStreamBase,match:function(tokenTypes,channel){if(!(tokenTypes instanceof Array)){tokenTypes=[tokenTypes];}var tt=this.get(channel),i=0,len=tokenTypes.length;while(i<len){if(tt==tokenTypes[i++]){return true;}}this.unget();return false;},mustMatch:function(tokenTypes,channel){var token;if(!(tokenTypes instanceof Array)){tokenTypes=[tokenTypes];}if(!this.match.apply(this,arguments)){token=this.LT(1);throw new SyntaxError("Expected "+this._tokenData[tokenTypes[0]].name+" at line "+token.startLine+", col "+token.startCol+".",token.startLine,token.startCol);}},advance:function(tokenTypes,channel){while(this.LA(0)!==0&&!this.match(tokenTypes,channel)){this.get();}return this.LA(0);},get:function(channel){var tokenInfo=this._tokenData,reader=this._reader,value,i=0,len=tokenInfo.length,found=false,token,info;if(this._lt.length&&this._ltIndex>=0&&this._ltIndex<this._lt.length){i++;this._token=this._lt[this._ltIndex++];info=tokenInfo[this._token.type];while((info.channel!==undefined&&channel!==info.channel)&&this._ltIndex<this._lt.length){this._token=this._lt[this._ltIndex++];info=tokenInfo[this._token.type];i++;}if((info.channel===undefined||channel===info.channel)&&this._ltIndex<=this._lt.length){this._ltIndexCache.push(i);return this._token.type;}}token=this._getToken();if(token.type>-1&&!tokenInfo[token.type].hide){token.channel=tokenInfo[token.type].channel;this._token=token;this._lt.push(token);this._ltIndexCache.push(this._lt.length-this._ltIndex+i);if(this._lt.length>5){this._lt.shift();}if(this._ltIndexCache.length>5){this._ltIndexCache.shift();}this._ltIndex=this._lt.length;}info=tokenInfo[token.type];if(info&&(info.hide||(info.channel!==undefined&&channel!==info.channel))){return this.get(channel);}else{return token.type;}},LA:function(index){var total=index,tt;if(index>0){if(index>5){throw new Error("Too much lookahead.");}while(total){tt=this.get();total--;}while(total<index){this.unget();total++;}}else{if(index<0){if(this._lt[this._ltIndex+index]){tt=this._lt[this._ltIndex+index].type;}else{throw new Error("Too much lookbehind.");}}else{tt=this._token.type;}}return tt;},LT:function(index){this.LA(index);return this._lt[this._ltIndex+index-1];},peek:function(){return this.LA(1);},token:function(){return this._token;},tokenName:function(tokenType){if(tokenType<0||tokenType>this._tokenData.length){return"UNKNOWN_TOKEN";}else{return this._tokenData[tokenType].name;}},tokenType:function(tokenName){return this._tokenData[tokenName]||-1;},unget:function(){if(this._ltIndexCache.length){this._ltIndex-=this._ltIndexCache.pop();this._token=this._lt[this._ltIndex-1];}else{throw new Error("Too much lookahead.");}}};parserlib.util={StringReader:StringReader,SyntaxError:SyntaxError,SyntaxUnit:SyntaxUnit,EventTarget:EventTarget,TokenStreamBase:TokenStreamBase};})();(function(){var EventTarget=parserlib.util.EventTarget,TokenStreamBase=parserlib.util.TokenStreamBase,StringReader=parserlib.util.StringReader,SyntaxError=parserlib.util.SyntaxError,SyntaxUnit=parserlib.util.SyntaxUnit;var Colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",activeBorder:"Active window border.",activecaption:"Active window caption.",appworkspace:"Background color of multiple document interface.",background:"Desktop background.",buttonface:"The face background color for 3-D elements that appear 3-D due to one layer of surrounding border.",buttonhighlight:"The color of the border facing the light source for 3-D elements that appear 3-D due to one layer of surrounding border.",buttonshadow:"The color of the border away from the light source for 3-D elements that appear 3-D due to one layer of surrounding border.",buttontext:"Text on push buttons.",captiontext:"Text in caption, size box, and scrollbar arrow box.",graytext:"Grayed (disabled) text. This color is set to #000 if the current display driver does not support a solid gray color.",highlight:"Item(s) selected in a control.",highlighttext:"Text of item(s) selected in a control.",inactiveborder:"Inactive window border.",inactivecaption:"Inactive window caption.",inactivecaptiontext:"Color of text in an inactive caption.",infobackground:"Background color for tooltip controls.",infotext:"Text color for tooltip controls.",menu:"Menu background.",menutext:"Text in menus.",scrollbar:"Scroll bar gray area.",threeddarkshadow:"The color of the darker (generally outer) of the two borders away from the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border.",threedface:"The face background color for 3-D elements that appear 3-D due to two concentric layers of surrounding border.",threedhighlight:"The color of the lighter (generally outer) of the two borders facing the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border.",threedlightshadow:"The color of the darker (generally inner) of the two borders facing the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border.",threedshadow:"The color of the lighter (generally inner) of the two borders away from the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border.",window:"Window background.",windowframe:"Window frame.",windowtext:"Text in windows."};function Combinator(text,line,col){SyntaxUnit.call(this,text,line,col,Parser.COMBINATOR_TYPE);this.type="unknown";if(/^\s+$/.test(text)){this.type="descendant";}else{if(text==">"){this.type="child";}else{if(text=="+"){this.type="adjacent-sibling";}else{if(text=="~"){this.type="sibling";}}}}}Combinator.prototype=new SyntaxUnit();Combinator.prototype.constructor=Combinator;function MediaFeature(name,value){SyntaxUnit.call(this,"("+name+(value!==null?":"+value:"")+")",name.startLine,name.startCol,Parser.MEDIA_FEATURE_TYPE);this.name=name;this.value=value;}MediaFeature.prototype=new SyntaxUnit();MediaFeature.prototype.constructor=MediaFeature;function MediaQuery(modifier,mediaType,features,line,col){SyntaxUnit.call(this,(modifier?modifier+" ":"")+(mediaType?mediaType:"")+(mediaType&&features.length>0?" and ":"")+features.join(" and "),line,col,Parser.MEDIA_QUERY_TYPE);this.modifier=modifier;this.mediaType=mediaType;this.features=features;}MediaQuery.prototype=new SyntaxUnit();MediaQuery.prototype.constructor=MediaQuery;function Parser(options){EventTarget.call(this);this.options=options||{};this._tokenStream=null;}Parser.DEFAULT_TYPE=0;Parser.COMBINATOR_TYPE=1;Parser.MEDIA_FEATURE_TYPE=2;Parser.MEDIA_QUERY_TYPE=3;Parser.PROPERTY_NAME_TYPE=4;Parser.PROPERTY_VALUE_TYPE=5;Parser.PROPERTY_VALUE_PART_TYPE=6;Parser.SELECTOR_TYPE=7;Parser.SELECTOR_PART_TYPE=8;Parser.SELECTOR_SUB_PART_TYPE=9;Parser.prototype=function(){var proto=new EventTarget(),prop,additions={constructor:Parser,DEFAULT_TYPE:0,COMBINATOR_TYPE:1,MEDIA_FEATURE_TYPE:2,MEDIA_QUERY_TYPE:3,PROPERTY_NAME_TYPE:4,PROPERTY_VALUE_TYPE:5,PROPERTY_VALUE_PART_TYPE:6,SELECTOR_TYPE:7,SELECTOR_PART_TYPE:8,SELECTOR_SUB_PART_TYPE:9,_stylesheet:function(){var tokenStream=this._tokenStream,charset=null,count,token,tt;this.fire("startstylesheet");this._charset();this._skipCruft();while(tokenStream.peek()==Tokens.IMPORT_SYM){this._import();this._skipCruft();}while(tokenStream.peek()==Tokens.NAMESPACE_SYM){this._namespace();this._skipCruft();}tt=tokenStream.peek();while(tt>Tokens.EOF){try{switch(tt){case Tokens.MEDIA_SYM:this._media();this._skipCruft();break;case Tokens.PAGE_SYM:this._page();this._skipCruft();break;case Tokens.FONT_FACE_SYM:this._font_face();this._skipCruft();break;case Tokens.KEYFRAMES_SYM:this._keyframes();this._skipCruft();break;case Tokens.VIEWPORT_SYM:this._viewport();this._skipCruft();break;case Tokens.UNKNOWN_SYM:tokenStream.get();if(!this.options.strict){this.fire({type:"error",error:null,message:"Unknown @ rule: "+tokenStream.LT(0).value+".",line:tokenStream.LT(0).startLine,col:tokenStream.LT(0).startCol});count=0;while(tokenStream.advance([Tokens.LBRACE,Tokens.RBRACE])==Tokens.LBRACE){count++;}while(count){tokenStream.advance([Tokens.RBRACE]);count--;}}else{throw new SyntaxError("Unknown @ rule.",tokenStream.LT(0).startLine,tokenStream.LT(0).startCol);}break;case Tokens.S:this._readWhitespace();break;default:if(!this._ruleset()){switch(tt){case Tokens.CHARSET_SYM:token=tokenStream.LT(1);this._charset(false);throw new SyntaxError("@charset not allowed here.",token.startLine,token.startCol);case Tokens.IMPORT_SYM:token=tokenStream.LT(1);this._import(false);throw new SyntaxError("@import not allowed here.",token.startLine,token.startCol);case Tokens.NAMESPACE_SYM:token=tokenStream.LT(1);this._namespace(false);throw new SyntaxError("@namespace not allowed here.",token.startLine,token.startCol);default:tokenStream.get();this._unexpectedToken(tokenStream.token());}}}}catch(ex){if(ex instanceof SyntaxError&&!this.options.strict){this.fire({type:"error",error:ex,message:ex.message,line:ex.line,col:ex.col});}else{throw ex;}}tt=tokenStream.peek();}if(tt!=Tokens.EOF){this._unexpectedToken(tokenStream.token());}this.fire("endstylesheet");},_charset:function(emit){var tokenStream=this._tokenStream,charset,token,line,col;if(tokenStream.match(Tokens.CHARSET_SYM)){line=tokenStream.token().startLine;col=tokenStream.token().startCol;this._readWhitespace();tokenStream.mustMatch(Tokens.STRING);token=tokenStream.token();charset=token.value;this._readWhitespace();tokenStream.mustMatch(Tokens.SEMICOLON);if(emit!==false){this.fire({type:"charset",charset:charset,line:line,col:col});}}},_import:function(emit){var tokenStream=this._tokenStream,tt,uri,importToken,mediaList=[];tokenStream.mustMatch(Tokens.IMPORT_SYM);importToken=tokenStream.token();this._readWhitespace();tokenStream.mustMatch([Tokens.STRING,Tokens.URI]);uri=tokenStream.token().value.replace(/(?:url\()?["']([^"']+)["']\)?/,"$1");this._readWhitespace();mediaList=this._media_query_list();tokenStream.mustMatch(Tokens.SEMICOLON);this._readWhitespace();if(emit!==false){this.fire({type:"import",uri:uri,media:mediaList,line:importToken.startLine,col:importToken.startCol});}},_namespace:function(emit){var tokenStream=this._tokenStream,line,col,prefix,uri;tokenStream.mustMatch(Tokens.NAMESPACE_SYM);line=tokenStream.token().startLine;col=tokenStream.token().startCol;this._readWhitespace();if(tokenStream.match(Tokens.IDENT)){prefix=tokenStream.token().value;this._readWhitespace();}tokenStream.mustMatch([Tokens.STRING,Tokens.URI]);uri=tokenStream.token().value.replace(/(?:url\()?["']([^"']+)["']\)?/,"$1");this._readWhitespace();tokenStream.mustMatch(Tokens.SEMICOLON);this._readWhitespace();if(emit!==false){this.fire({type:"namespace",prefix:prefix,uri:uri,line:line,col:col});}},_media:function(){var tokenStream=this._tokenStream,line,col,mediaList;tokenStream.mustMatch(Tokens.MEDIA_SYM);line=tokenStream.token().startLine;col=tokenStream.token().startCol;this._readWhitespace();mediaList=this._media_query_list();tokenStream.mustMatch(Tokens.LBRACE);this._readWhitespace();this.fire({type:"startmedia",media:mediaList,line:line,col:col});while(true){if(tokenStream.peek()==Tokens.PAGE_SYM){this._page();}else{if(tokenStream.peek()==Tokens.FONT_FACE_SYM){this._font_face();}else{if(!this._ruleset()){break;}}}}tokenStream.mustMatch(Tokens.RBRACE);this._readWhitespace();this.fire({type:"endmedia",media:mediaList,line:line,col:col});},_media_query_list:function(){var tokenStream=this._tokenStream,mediaList=[];this._readWhitespace();if(tokenStream.peek()==Tokens.IDENT||tokenStream.peek()==Tokens.LPAREN){mediaList.push(this._media_query());}while(tokenStream.match(Tokens.COMMA)){this._readWhitespace();mediaList.push(this._media_query());}return mediaList;},_media_query:function(){var tokenStream=this._tokenStream,type=null,ident=null,token=null,expressions=[];if(tokenStream.match(Tokens.IDENT)){ident=tokenStream.token().value.toLowerCase();if(ident!="only"&&ident!="not"){tokenStream.unget();ident=null;}else{token=tokenStream.token();}}this._readWhitespace();if(tokenStream.peek()==Tokens.IDENT){type=this._media_type();if(token===null){token=tokenStream.token();}}else{if(tokenStream.peek()==Tokens.LPAREN){if(token===null){token=tokenStream.LT(1);}expressions.push(this._media_expression());}}if(type===null&&expressions.length===0){return null;}else{this._readWhitespace();while(tokenStream.match(Tokens.IDENT)){if(tokenStream.token().value.toLowerCase()!="and"){this._unexpectedToken(tokenStream.token());}this._readWhitespace();expressions.push(this._media_expression());}}return new MediaQuery(ident,type,expressions,token.startLine,token.startCol);},_media_type:function(){return this._media_feature();},_media_expression:function(){var tokenStream=this._tokenStream,feature=null,token,expression=null;tokenStream.mustMatch(Tokens.LPAREN);feature=this._media_feature();this._readWhitespace();if(tokenStream.match(Tokens.COLON)){this._readWhitespace();token=tokenStream.LT(1);expression=this._expression();}tokenStream.mustMatch(Tokens.RPAREN);this._readWhitespace();return new MediaFeature(feature,(expression?new SyntaxUnit(expression,token.startLine,token.startCol):null));},_media_feature:function(){var tokenStream=this._tokenStream;tokenStream.mustMatch(Tokens.IDENT);return SyntaxUnit.fromToken(tokenStream.token());},_page:function(){var tokenStream=this._tokenStream,line,col,identifier=null,pseudoPage=null;tokenStream.mustMatch(Tokens.PAGE_SYM);line=tokenStream.token().startLine;col=tokenStream.token().startCol;this._readWhitespace();if(tokenStream.match(Tokens.IDENT)){identifier=tokenStream.token().value;if(identifier.toLowerCase()==="auto"){this._unexpectedToken(tokenStream.token());}}if(tokenStream.peek()==Tokens.COLON){pseudoPage=this._pseudo_page();}this._readWhitespace();this.fire({type:"startpage",id:identifier,pseudo:pseudoPage,line:line,col:col});this._readDeclarations(true,true);this.fire({type:"endpage",id:identifier,pseudo:pseudoPage,line:line,col:col});},_margin:function(){var tokenStream=this._tokenStream,line,col,marginSym=this._margin_sym();if(marginSym){line=tokenStream.token().startLine;col=tokenStream.token().startCol;this.fire({type:"startpagemargin",margin:marginSym,line:line,col:col});this._readDeclarations(true);this.fire({type:"endpagemargin",margin:marginSym,line:line,col:col});return true;}else{return false;}},_margin_sym:function(){var tokenStream=this._tokenStream;if(tokenStream.match([Tokens.TOPLEFTCORNER_SYM,Tokens.TOPLEFT_SYM,Tokens.TOPCENTER_SYM,Tokens.TOPRIGHT_SYM,Tokens.TOPRIGHTCORNER_SYM,Tokens.BOTTOMLEFTCORNER_SYM,Tokens.BOTTOMLEFT_SYM,Tokens.BOTTOMCENTER_SYM,Tokens.BOTTOMRIGHT_SYM,Tokens.BOTTOMRIGHTCORNER_SYM,Tokens.LEFTTOP_SYM,Tokens.LEFTMIDDLE_SYM,Tokens.LEFTBOTTOM_SYM,Tokens.RIGHTTOP_SYM,Tokens.RIGHTMIDDLE_SYM,Tokens.RIGHTBOTTOM_SYM])){return SyntaxUnit.fromToken(tokenStream.token());}else{return null;}},_pseudo_page:function(){var tokenStream=this._tokenStream;tokenStream.mustMatch(Tokens.COLON);tokenStream.mustMatch(Tokens.IDENT);return tokenStream.token().value;},_font_face:function(){var tokenStream=this._tokenStream,line,col;tokenStream.mustMatch(Tokens.FONT_FACE_SYM);line=tokenStream.token().startLine;col=tokenStream.token().startCol;this._readWhitespace();this.fire({type:"startfontface",line:line,col:col});this._readDeclarations(true);this.fire({type:"endfontface",line:line,col:col});},_viewport:function(){var tokenStream=this._tokenStream,line,col;tokenStream.mustMatch(Tokens.VIEWPORT_SYM);line=tokenStream.token().startLine;col=tokenStream.token().startCol;this._readWhitespace();this.fire({type:"startviewport",line:line,col:col});this._readDeclarations(true);this.fire({type:"endviewport",line:line,col:col});},_operator:function(inFunction){var tokenStream=this._tokenStream,token=null;if(tokenStream.match([Tokens.SLASH,Tokens.COMMA])||(inFunction&&tokenStream.match([Tokens.PLUS,Tokens.STAR,Tokens.MINUS]))){token=tokenStream.token();this._readWhitespace();}return token?PropertyValuePart.fromToken(token):null;},_combinator:function(){var tokenStream=this._tokenStream,value=null,token;if(tokenStream.match([Tokens.PLUS,Tokens.GREATER,Tokens.TILDE])){token=tokenStream.token();value=new Combinator(token.value,token.startLine,token.startCol);this._readWhitespace();}return value;},_unary_operator:function(){var tokenStream=this._tokenStream;if(tokenStream.match([Tokens.MINUS,Tokens.PLUS])){return tokenStream.token().value;}else{return null;}},_property:function(){var tokenStream=this._tokenStream,value=null,hack=null,tokenValue,token,line,col;if(tokenStream.peek()==Tokens.STAR&&this.options.starHack){tokenStream.get();token=tokenStream.token();hack=token.value;line=token.startLine;col=token.startCol;}if(tokenStream.match(Tokens.IDENT)){token=tokenStream.token();tokenValue=token.value;if(tokenValue.charAt(0)=="_"&&this.options.underscoreHack){hack="_";tokenValue=tokenValue.substring(1);}value=new PropertyName(tokenValue,hack,(line||token.startLine),(col||token.startCol));this._readWhitespace();}return value;},_ruleset:function(){var tokenStream=this._tokenStream,tt,selectors;try{selectors=this._selectors_group();}catch(ex){if(ex instanceof SyntaxError&&!this.options.strict){this.fire({type:"error",error:ex,message:ex.message,line:ex.line,col:ex.col});tt=tokenStream.advance([Tokens.RBRACE]);if(tt==Tokens.RBRACE){}else{throw ex;}}else{throw ex;}return true;}if(selectors){this.fire({type:"startrule",selectors:selectors,line:selectors[0].line,col:selectors[0].col});this._readDeclarations(true);this.fire({type:"endrule",selectors:selectors,line:selectors[0].line,col:selectors[0].col});}return selectors;},_selectors_group:function(){var tokenStream=this._tokenStream,selectors=[],selector;selector=this._selector();if(selector!==null){selectors.push(selector);while(tokenStream.match(Tokens.COMMA)){this._readWhitespace();selector=this._selector();if(selector!==null){selectors.push(selector);}else{this._unexpectedToken(tokenStream.LT(1));}}}return selectors.length?selectors:null;},_selector:function(){var tokenStream=this._tokenStream,selector=[],nextSelector=null,combinator=null,ws=null;nextSelector=this._simple_selector_sequence();if(nextSelector===null){return null;}selector.push(nextSelector);do{combinator=this._combinator();if(combinator!==null){selector.push(combinator);nextSelector=this._simple_selector_sequence();if(nextSelector===null){this._unexpectedToken(tokenStream.LT(1));}else{selector.push(nextSelector);}}else{if(this._readWhitespace()){ws=new Combinator(tokenStream.token().value,tokenStream.token().startLine,tokenStream.token().startCol);combinator=this._combinator();nextSelector=this._simple_selector_sequence();if(nextSelector===null){if(combinator!==null){this._unexpectedToken(tokenStream.LT(1));}}else{if(combinator!==null){selector.push(combinator);}else{selector.push(ws);}selector.push(nextSelector);}}else{break;}}}while(true);return new Selector(selector,selector[0].line,selector[0].col);},_simple_selector_sequence:function(){var tokenStream=this._tokenStream,elementName=null,modifiers=[],selectorText="",components=[function(){return tokenStream.match(Tokens.HASH)?new SelectorSubPart(tokenStream.token().value,"id",tokenStream.token().startLine,tokenStream.token().startCol):null;},this._class,this._attrib,this._pseudo,this._negation],i=0,len=components.length,component=null,found=false,line,col;line=tokenStream.LT(1).startLine;col=tokenStream.LT(1).startCol;elementName=this._type_selector();if(!elementName){elementName=this._universal();}if(elementName!==null){selectorText+=elementName;}while(true){if(tokenStream.peek()===Tokens.S){break;}while(i<len&&component===null){component=components[i++].call(this);}if(component===null){if(selectorText===""){return null;}else{break;}}else{i=0;modifiers.push(component);selectorText+=component.toString();component=null;}}return selectorText!==""?new SelectorPart(elementName,modifiers,selectorText,line,col):null;},_type_selector:function(){var tokenStream=this._tokenStream,ns=this._namespace_prefix(),elementName=this._element_name();if(!elementName){if(ns){tokenStream.unget();if(ns.length>1){tokenStream.unget();}}return null;}else{if(ns){elementName.text=ns+elementName.text;elementName.col-=ns.length;}return elementName;}},_class:function(){var tokenStream=this._tokenStream,token;if(tokenStream.match(Tokens.DOT)){tokenStream.mustMatch(Tokens.IDENT);token=tokenStream.token();return new SelectorSubPart("."+token.value,"class",token.startLine,token.startCol-1);}else{return null;}},_element_name:function(){var tokenStream=this._tokenStream,token;if(tokenStream.match(Tokens.IDENT)){token=tokenStream.token();return new SelectorSubPart(token.value,"elementName",token.startLine,token.startCol);}else{return null;}},_namespace_prefix:function(){var tokenStream=this._tokenStream,value="";if(tokenStream.LA(1)===Tokens.PIPE||tokenStream.LA(2)===Tokens.PIPE){if(tokenStream.match([Tokens.IDENT,Tokens.STAR])){value+=tokenStream.token().value;}tokenStream.mustMatch(Tokens.PIPE);value+="|";}return value.length?value:null;},_universal:function(){var tokenStream=this._tokenStream,value="",ns;ns=this._namespace_prefix();if(ns){value+=ns;}if(tokenStream.match(Tokens.STAR)){value+="*";}return value.length?value:null;},_attrib:function(){var tokenStream=this._tokenStream,value=null,ns,token;if(tokenStream.match(Tokens.LBRACKET)){token=tokenStream.token();value=token.value;value+=this._readWhitespace();ns=this._namespace_prefix();if(ns){value+=ns;}tokenStream.mustMatch(Tokens.IDENT);value+=tokenStream.token().value;value+=this._readWhitespace();if(tokenStream.match([Tokens.PREFIXMATCH,Tokens.SUFFIXMATCH,Tokens.SUBSTRINGMATCH,Tokens.EQUALS,Tokens.INCLUDES,Tokens.DASHMATCH])){value+=tokenStream.token().value;value+=this._readWhitespace();tokenStream.mustMatch([Tokens.IDENT,Tokens.STRING]);value+=tokenStream.token().value;value+=this._readWhitespace();}tokenStream.mustMatch(Tokens.RBRACKET);return new SelectorSubPart(value+"]","attribute",token.startLine,token.startCol);}else{return null;}},_pseudo:function(){var tokenStream=this._tokenStream,pseudo=null,colons=":",line,col;if(tokenStream.match(Tokens.COLON)){if(tokenStream.match(Tokens.COLON)){colons+=":";}if(tokenStream.match(Tokens.IDENT)){pseudo=tokenStream.token().value;line=tokenStream.token().startLine;col=tokenStream.token().startCol-colons.length;}else{if(tokenStream.peek()==Tokens.FUNCTION){line=tokenStream.LT(1).startLine;col=tokenStream.LT(1).startCol-colons.length;pseudo=this._functional_pseudo();}}if(pseudo){pseudo=new SelectorSubPart(colons+pseudo,"pseudo",line,col);}}return pseudo;},_functional_pseudo:function(){var tokenStream=this._tokenStream,value=null;if(tokenStream.match(Tokens.FUNCTION)){value=tokenStream.token().value;value+=this._readWhitespace();value+=this._expression();tokenStream.mustMatch(Tokens.RPAREN);value+=")";}return value;},_expression:function(){var tokenStream=this._tokenStream,value="";while(tokenStream.match([Tokens.PLUS,Tokens.MINUS,Tokens.DIMENSION,Tokens.NUMBER,Tokens.STRING,Tokens.IDENT,Tokens.LENGTH,Tokens.FREQ,Tokens.ANGLE,Tokens.TIME,Tokens.RESOLUTION,Tokens.SLASH])){value+=tokenStream.token().value;value+=this._readWhitespace();}return value.length?value:null;},_negation:function(){var tokenStream=this._tokenStream,line,col,value="",arg,subpart=null;if(tokenStream.match(Tokens.NOT)){value=tokenStream.token().value;line=tokenStream.token().startLine;col=tokenStream.token().startCol;value+=this._readWhitespace();arg=this._negation_arg();value+=arg;value+=this._readWhitespace();tokenStream.match(Tokens.RPAREN);value+=tokenStream.token().value;subpart=new SelectorSubPart(value,"not",line,col);subpart.args.push(arg);}return subpart;},_negation_arg:function(){var tokenStream=this._tokenStream,args=[this._type_selector,this._universal,function(){return tokenStream.match(Tokens.HASH)?new SelectorSubPart(tokenStream.token().value,"id",tokenStream.token().startLine,tokenStream.token().startCol):null;},this._class,this._attrib,this._pseudo],arg=null,i=0,len=args.length,elementName,line,col,part;line=tokenStream.LT(1).startLine;col=tokenStream.LT(1).startCol;while(i<len&&arg===null){arg=args[i].call(this);i++;}if(arg===null){this._unexpectedToken(tokenStream.LT(1));}if(arg.type=="elementName"){part=new SelectorPart(arg,[],arg.toString(),line,col);}else{part=new SelectorPart(null,[arg],arg.toString(),line,col);}return part;},_declaration:function(){var tokenStream=this._tokenStream,property=null,expr=null,prio=null,error=null,invalid=null,propertyName="";property=this._property();if(property!==null){tokenStream.mustMatch(Tokens.COLON);this._readWhitespace();expr=this._expr();if(!expr||expr.length===0){this._unexpectedToken(tokenStream.LT(1));}prio=this._prio();propertyName=property.toString();if(this.options.starHack&&property.hack=="*"||this.options.underscoreHack&&property.hack=="_"){propertyName=property.text;}try{this._validateProperty(propertyName,expr);}catch(ex){invalid=ex;}this.fire({type:"property",property:property,value:expr,important:prio,line:property.line,col:property.col,invalid:invalid});return true;}else{return false;}},_prio:function(){var tokenStream=this._tokenStream,result=tokenStream.match(Tokens.IMPORTANT_SYM);this._readWhitespace();return result;},_expr:function(inFunction){var tokenStream=this._tokenStream,values=[],value=null,operator=null;value=this._term();if(value!==null){values.push(value);do{operator=this._operator(inFunction);if(operator){values.push(operator);}value=this._term();if(value===null){break;}else{values.push(value);}}while(true);}return values.length>0?new PropertyValue(values,values[0].line,values[0].col):null;},_term:function(){var tokenStream=this._tokenStream,unary=null,value=null,token,line,col;unary=this._unary_operator();if(unary!==null){line=tokenStream.token().startLine;col=tokenStream.token().startCol;}if(tokenStream.peek()==Tokens.IE_FUNCTION&&this.options.ieFilters){value=this._ie_function();if(unary===null){line=tokenStream.token().startLine;col=tokenStream.token().startCol;}}else{if(tokenStream.match([Tokens.NUMBER,Tokens.PERCENTAGE,Tokens.LENGTH,Tokens.ANGLE,Tokens.TIME,Tokens.FREQ,Tokens.STRING,Tokens.IDENT,Tokens.URI,Tokens.UNICODE_RANGE])){value=tokenStream.token().value;if(unary===null){line=tokenStream.token().startLine;col=tokenStream.token().startCol;}this._readWhitespace();}else{token=this._hexcolor();if(token===null){if(unary===null){line=tokenStream.LT(1).startLine;col=tokenStream.LT(1).startCol;}if(value===null){if(tokenStream.LA(3)==Tokens.EQUALS&&this.options.ieFilters){value=this._ie_function();}else{value=this._function();}}}else{value=token.value;if(unary===null){line=token.startLine;col=token.startCol;}}}}return value!==null?new PropertyValuePart(unary!==null?unary+value:value,line,col):null;},_function:function(){var tokenStream=this._tokenStream,functionText=null,expr=null,lt;if(tokenStream.match(Tokens.FUNCTION)){functionText=tokenStream.token().value;this._readWhitespace();expr=this._expr(true);functionText+=expr;if(this.options.ieFilters&&tokenStream.peek()==Tokens.EQUALS){do{if(this._readWhitespace()){functionText+=tokenStream.token().value;}if(tokenStream.LA(0)==Tokens.COMMA){functionText+=tokenStream.token().value;}tokenStream.match(Tokens.IDENT);functionText+=tokenStream.token().value;tokenStream.match(Tokens.EQUALS);functionText+=tokenStream.token().value;lt=tokenStream.peek();while(lt!=Tokens.COMMA&&lt!=Tokens.S&&lt!=Tokens.RPAREN){tokenStream.get();functionText+=tokenStream.token().value;lt=tokenStream.peek();}}while(tokenStream.match([Tokens.COMMA,Tokens.S]));}tokenStream.match(Tokens.RPAREN);functionText+=")";this._readWhitespace();}return functionText;},_ie_function:function(){var tokenStream=this._tokenStream,functionText=null,expr=null,lt;if(tokenStream.match([Tokens.IE_FUNCTION,Tokens.FUNCTION])){functionText=tokenStream.token().value;do{if(this._readWhitespace()){functionText+=tokenStream.token().value;}if(tokenStream.LA(0)==Tokens.COMMA){functionText+=tokenStream.token().value;}tokenStream.match(Tokens.IDENT);functionText+=tokenStream.token().value;tokenStream.match(Tokens.EQUALS);functionText+=tokenStream.token().value;lt=tokenStream.peek();while(lt!=Tokens.COMMA&&lt!=Tokens.S&&lt!=Tokens.RPAREN){tokenStream.get();functionText+=tokenStream.token().value;lt=tokenStream.peek();}}while(tokenStream.match([Tokens.COMMA,Tokens.S]));tokenStream.match(Tokens.RPAREN);functionText+=")";this._readWhitespace();}return functionText;},_hexcolor:function(){var tokenStream=this._tokenStream,token=null,color;if(tokenStream.match(Tokens.HASH)){token=tokenStream.token();color=token.value;if(!/#[a-f0-9]{3,6}/i.test(color)){throw new SyntaxError("Expected a hex color but found '"+color+"' at line "+token.startLine+", col "+token.startCol+".",token.startLine,token.startCol);}this._readWhitespace();}return token;},_keyframes:function(){var tokenStream=this._tokenStream,token,tt,name,prefix="";tokenStream.mustMatch(Tokens.KEYFRAMES_SYM);token=tokenStream.token();if(/^@\-([^\-]+)\-/.test(token.value)){prefix=RegExp.$1;}this._readWhitespace();name=this._keyframe_name();this._readWhitespace();tokenStream.mustMatch(Tokens.LBRACE);this.fire({type:"startkeyframes",name:name,prefix:prefix,line:token.startLine,col:token.startCol});this._readWhitespace();tt=tokenStream.peek();while(tt==Tokens.IDENT||tt==Tokens.PERCENTAGE){this._keyframe_rule();this._readWhitespace();tt=tokenStream.peek();}this.fire({type:"endkeyframes",name:name,prefix:prefix,line:token.startLine,col:token.startCol});this._readWhitespace();tokenStream.mustMatch(Tokens.RBRACE);},_keyframe_name:function(){var tokenStream=this._tokenStream,token;tokenStream.mustMatch([Tokens.IDENT,Tokens.STRING]);return SyntaxUnit.fromToken(tokenStream.token());},_keyframe_rule:function(){var tokenStream=this._tokenStream,token,keyList=this._key_list();this.fire({type:"startkeyframerule",keys:keyList,line:keyList[0].line,col:keyList[0].col});this._readDeclarations(true);this.fire({type:"endkeyframerule",keys:keyList,line:keyList[0].line,col:keyList[0].col});},_key_list:function(){var tokenStream=this._tokenStream,token,key,keyList=[];keyList.push(this._key());this._readWhitespace();while(tokenStream.match(Tokens.COMMA)){this._readWhitespace();keyList.push(this._key());this._readWhitespace();}return keyList;},_key:function(){var tokenStream=this._tokenStream,token;if(tokenStream.match(Tokens.PERCENTAGE)){return SyntaxUnit.fromToken(tokenStream.token());}else{if(tokenStream.match(Tokens.IDENT)){token=tokenStream.token();if(/from|to/i.test(token.value)){return SyntaxUnit.fromToken(token);}tokenStream.unget();}}this._unexpectedToken(tokenStream.LT(1));},_skipCruft:function(){while(this._tokenStream.match([Tokens.S,Tokens.CDO,Tokens.CDC])){}},_readDeclarations:function(checkStart,readMargins){var tokenStream=this._tokenStream,tt;this._readWhitespace();if(checkStart){tokenStream.mustMatch(Tokens.LBRACE);}this._readWhitespace();try{while(true){if(tokenStream.match(Tokens.SEMICOLON)||(readMargins&&this._margin())){}else{if(this._declaration()){if(!tokenStream.match(Tokens.SEMICOLON)){break;}}else{break;}}this._readWhitespace();}tokenStream.mustMatch(Tokens.RBRACE);this._readWhitespace();}catch(ex){if(ex instanceof SyntaxError&&!this.options.strict){this.fire({type:"error",error:ex,message:ex.message,line:ex.line,col:ex.col});tt=tokenStream.advance([Tokens.SEMICOLON,Tokens.RBRACE]);if(tt==Tokens.SEMICOLON){this._readDeclarations(false,readMargins);}else{if(tt!=Tokens.RBRACE){throw ex;}}}else{throw ex;}}},_readWhitespace:function(){var tokenStream=this._tokenStream,ws="";while(tokenStream.match(Tokens.S)){ws+=tokenStream.token().value;}return ws;},_unexpectedToken:function(token){throw new SyntaxError("Unexpected token '"+token.value+"' at line "+token.startLine+", col "+token.startCol+".",token.startLine,token.startCol);},_verifyEnd:function(){if(this._tokenStream.LA(1)!=Tokens.EOF){this._unexpectedToken(this._tokenStream.LT(1));}},_validateProperty:function(property,value){Validation.validate(property,value);},parse:function(input){this._tokenStream=new TokenStream(input,Tokens);this._stylesheet();},parseStyleSheet:function(input){return this.parse(input);},parseMediaQuery:function(input){this._tokenStream=new TokenStream(input,Tokens);var result=this._media_query();this._verifyEnd();return result;},parsePropertyValue:function(input){this._tokenStream=new TokenStream(input,Tokens);this._readWhitespace();var result=this._expr();this._readWhitespace();this._verifyEnd();return result;},parseRule:function(input){this._tokenStream=new TokenStream(input,Tokens);this._readWhitespace();var result=this._ruleset();this._readWhitespace();this._verifyEnd();return result;},parseSelector:function(input){this._tokenStream=new TokenStream(input,Tokens);this._readWhitespace();var result=this._selector();this._readWhitespace();this._verifyEnd();return result;},parseStyleAttribute:function(input){input+="}";this._tokenStream=new TokenStream(input,Tokens);this._readDeclarations();}};for(prop in additions){if(additions.hasOwnProperty(prop)){proto[prop]=additions[prop];}}return proto;}();var Properties={"alignment-adjust":"auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical | <percentage> | <length>","alignment-baseline":"baseline | use-script | before-edge | text-before-edge | after-edge | text-after-edge | central | middle | ideographic | alphabetic | hanging | mathematical",animation:1,"animation-delay":{multi:"<time>",comma:true},"animation-direction":{multi:"normal | alternate",comma:true},"animation-duration":{multi:"<time>",comma:true},"animation-iteration-count":{multi:"<number> | infinite",comma:true},"animation-name":{multi:"none | <ident>",comma:true},"animation-play-state":{multi:"running | paused",comma:true},"animation-timing-function":1,"-moz-animation-delay":{multi:"<time>",comma:true},"-moz-animation-direction":{multi:"normal | alternate",comma:true},"-moz-animation-duration":{multi:"<time>",comma:true},"-moz-animation-iteration-count":{multi:"<number> | infinite",comma:true},"-moz-animation-name":{multi:"none | <ident>",comma:true},"-moz-animation-play-state":{multi:"running | paused",comma:true},"-ms-animation-delay":{multi:"<time>",comma:true},"-ms-animation-direction":{multi:"normal | alternate",comma:true},"-ms-animation-duration":{multi:"<time>",comma:true},"-ms-animation-iteration-count":{multi:"<number> | infinite",comma:true},"-ms-animation-name":{multi:"none | <ident>",comma:true},"-ms-animation-play-state":{multi:"running | paused",comma:true},"-webkit-animation-delay":{multi:"<time>",comma:true},"-webkit-animation-direction":{multi:"normal | alternate",comma:true},"-webkit-animation-duration":{multi:"<time>",comma:true},"-webkit-animation-iteration-count":{multi:"<number> | infinite",comma:true},"-webkit-animation-name":{multi:"none | <ident>",comma:true},"-webkit-animation-play-state":{multi:"running | paused",comma:true},"-o-animation-delay":{multi:"<time>",comma:true},"-o-animation-direction":{multi:"normal | alternate",comma:true},"-o-animation-duration":{multi:"<time>",comma:true},"-o-animation-iteration-count":{multi:"<number> | infinite",comma:true},"-o-animation-name":{multi:"none | <ident>",comma:true},"-o-animation-play-state":{multi:"running | paused",comma:true},appearance:"icon | window | desktop | workspace | document | tooltip | dialog | button | push-button | hyperlink | radio-button | checkbox | menu-item | tab | menu | menubar | pull-down-menu | pop-up-menu | list-menu | radio-group | checkbox-group | outline-tree | range | field | combo-box | signature | password | normal | none | inherit",azimuth:function(expression){var simple="<angle> | leftwards | rightwards | inherit",direction="left-side | far-left | left | center-left | center | center-right | right | far-right | right-side",behind=false,valid=false,part;if(!ValidationTypes.isAny(expression,simple)){if(ValidationTypes.isAny(expression,"behind")){behind=true;valid=true;}if(ValidationTypes.isAny(expression,direction)){valid=true;if(!behind){ValidationTypes.isAny(expression,"behind");}}}if(expression.hasNext()){part=expression.next();if(valid){throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}else{throw new ValidationError("Expected (<'azimuth'>) but found '"+part+"'.",part.line,part.col);}}},"backface-visibility":"visible | hidden",background:1,"background-attachment":{multi:"<attachment>",comma:true},"background-clip":{multi:"<box>",comma:true},"background-color":"<color> | inherit","background-image":{multi:"<bg-image>",comma:true},"background-origin":{multi:"<box>",comma:true},"background-position":{multi:"<bg-position>",comma:true},"background-repeat":{multi:"<repeat-style>"},"background-size":{multi:"<bg-size>",comma:true},"baseline-shift":"baseline | sub | super | <percentage> | <length>",behavior:1,binding:1,bleed:"<length>","bookmark-label":"<content> | <attr> | <string>","bookmark-level":"none | <integer>","bookmark-state":"open | closed","bookmark-target":"none | <uri> | <attr>",border:"<border-width> || <border-style> || <color>","border-bottom":"<border-width> || <border-style> || <color>","border-bottom-color":"<color> | inherit","border-bottom-left-radius":"<x-one-radius>","border-bottom-right-radius":"<x-one-radius>","border-bottom-style":"<border-style>","border-bottom-width":"<border-width>","border-collapse":"collapse | separate | inherit","border-color":{multi:"<color> | inherit",max:4},"border-image":1,"border-image-outset":{multi:"<length> | <number>",max:4},"border-image-repeat":{multi:"stretch | repeat | round",max:2},"border-image-slice":function(expression){var valid=false,numeric="<number> | <percentage>",fill=false,count=0,max=4,part;if(ValidationTypes.isAny(expression,"fill")){fill=true;valid=true;}while(expression.hasNext()&&count<max){valid=ValidationTypes.isAny(expression,numeric);if(!valid){break;}count++;}if(!fill){ValidationTypes.isAny(expression,"fill");}else{valid=true;}if(expression.hasNext()){part=expression.next();if(valid){throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}else{throw new ValidationError("Expected ([<number> | <percentage>]{1,4} && fill?) but found '"+part+"'.",part.line,part.col);}}},"border-image-source":"<image> | none","border-image-width":{multi:"<length> | <percentage> | <number> | auto",max:4},"border-left":"<border-width> || <border-style> || <color>","border-left-color":"<color> | inherit","border-left-style":"<border-style>","border-left-width":"<border-width>","border-radius":function(expression){var valid=false,simple="<length> | <percentage> | inherit",slash=false,fill=false,count=0,max=8,part;while(expression.hasNext()&&count<max){valid=ValidationTypes.isAny(expression,simple);if(!valid){if(expression.peek()=="/"&&count>0&&!slash){slash=true;max=count+5;expression.next();}else{break;}}count++;}if(expression.hasNext()){part=expression.next();if(valid){throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}else{throw new ValidationError("Expected (<'border-radius'>) but found '"+part+"'.",part.line,part.col);}}},"border-right":"<border-width> || <border-style> || <color>","border-right-color":"<color> | inherit","border-right-style":"<border-style>","border-right-width":"<border-width>","border-spacing":{multi:"<length> | inherit",max:2},"border-style":{multi:"<border-style>",max:4},"border-top":"<border-width> || <border-style> || <color>","border-top-color":"<color> | inherit","border-top-left-radius":"<x-one-radius>","border-top-right-radius":"<x-one-radius>","border-top-style":"<border-style>","border-top-width":"<border-width>","border-width":{multi:"<border-width>",max:4},bottom:"<margin-width> | inherit","box-align":"start | end | center | baseline | stretch","box-decoration-break":"slice |clone","box-direction":"normal | reverse | inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single | multiple","box-ordinal-group":"<integer>","box-orient":"horizontal | vertical | inline-axis | block-axis | inherit","box-pack":"start | end | center | justify","box-shadow":function(expression){var result=false,part;if(!ValidationTypes.isAny(expression,"none")){Validation.multiProperty("<shadow>",expression,true,Infinity);}else{if(expression.hasNext()){part=expression.next();throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}}},"box-sizing":"content-box | border-box | inherit","break-after":"auto | always | avoid | left | right | page | column | avoid-page | avoid-column","break-before":"auto | always | avoid | left | right | page | column | avoid-page | avoid-column","break-inside":"auto | avoid | avoid-page | avoid-column","caption-side":"top | bottom | inherit",clear:"none | right | left | both | inherit",clip:1,color:"<color> | inherit","color-profile":1,"column-count":"<integer> | auto","column-fill":"auto | balance","column-gap":"<length> | normal","column-rule":"<border-width> || <border-style> || <color>","column-rule-color":"<color>","column-rule-style":"<border-style>","column-rule-width":"<border-width>","column-span":"none | all","column-width":"<length> | auto",columns:1,content:1,"counter-increment":1,"counter-reset":1,crop:"<shape> | auto",cue:"cue-after | cue-before | inherit","cue-after":1,"cue-before":1,cursor:1,direction:"ltr | rtl | inherit",display:"inline | block | list-item | inline-block | table | inline-table | table-row-group | table-header-group | table-footer-group | table-row | table-column-group | table-column | table-cell | table-caption | box | inline-box | grid | inline-grid | none | inherit | -moz-box | -moz-inline-block | -moz-inline-box | -moz-inline-grid | -moz-inline-stack | -moz-inline-table | -moz-grid | -moz-grid-group | -moz-grid-line | -moz-groupbox | -moz-deck | -moz-popup | -moz-stack | -moz-marker | -webkit-box | -webkit-inline-box","dominant-baseline":1,"drop-initial-after-adjust":"central | middle | after-edge | text-after-edge | ideographic | alphabetic | mathematical | <percentage> | <length>","drop-initial-after-align":"baseline | use-script | before-edge | text-before-edge | after-edge | text-after-edge | central | middle | ideographic | alphabetic | hanging | mathematical","drop-initial-before-adjust":"before-edge | text-before-edge | central | middle | hanging | mathematical | <percentage> | <length>","drop-initial-before-align":"caps-height | baseline | use-script | before-edge | text-before-edge | after-edge | text-after-edge | central | middle | ideographic | alphabetic | hanging | mathematical","drop-initial-size":"auto | line | <length> | <percentage>","drop-initial-value":"initial | <integer>",elevation:"<angle> | below | level | above | higher | lower | inherit","empty-cells":"show | hide | inherit",filter:1,fit:"fill | hidden | meet | slice","fit-position":1,"float":"left | right | none | inherit","float-offset":1,font:1,"font-family":1,"font-size":"<absolute-size> | <relative-size> | <length> | <percentage> | inherit","font-size-adjust":"<number> | none | inherit","font-stretch":"normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded | inherit","font-style":"normal | italic | oblique | inherit","font-variant":"normal | small-caps | inherit","font-weight":"normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | inherit","grid-cell-stacking":"columns | rows | layer","grid-column":1,"grid-columns":1,"grid-column-align":"start | end | center | stretch","grid-column-sizing":1,"grid-column-span":"<integer>","grid-flow":"none | rows | columns","grid-layer":"<integer>","grid-row":1,"grid-rows":1,"grid-row-align":"start | end | center | stretch","grid-row-span":"<integer>","grid-row-sizing":1,"hanging-punctuation":1,height:"<margin-width> | inherit","hyphenate-after":"<integer> | auto","hyphenate-before":"<integer> | auto","hyphenate-character":"<string> | auto","hyphenate-lines":"no-limit | <integer>","hyphenate-resource":1,hyphens:"none | manual | auto",icon:1,"image-orientation":"angle | auto","image-rendering":1,"image-resolution":1,"inline-box-align":"initial | last | <integer>",left:"<margin-width> | inherit","letter-spacing":"<length> | normal | inherit","line-height":"<number> | <length> | <percentage> | normal | inherit","line-break":"auto | loose | normal | strict","line-stacking":1,"line-stacking-ruby":"exclude-ruby | include-ruby","line-stacking-shift":"consider-shifts | disregard-shifts","line-stacking-strategy":"inline-line-height | block-line-height | max-height | grid-height","list-style":1,"list-style-image":"<uri> | none | inherit","list-style-position":"inside | outside | inherit","list-style-type":"disc | circle | square | decimal | decimal-leading-zero | lower-roman | upper-roman | lower-greek | lower-latin | upper-latin | armenian | georgian | lower-alpha | upper-alpha | none | inherit",margin:{multi:"<margin-width> | inherit",max:4},"margin-bottom":"<margin-width> | inherit","margin-left":"<margin-width> | inherit","margin-right":"<margin-width> | inherit","margin-top":"<margin-width> | inherit",mark:1,"mark-after":1,"mark-before":1,marks:1,"marquee-direction":1,"marquee-play-count":1,"marquee-speed":1,"marquee-style":1,"max-height":"<length> | <percentage> | none | inherit","max-width":"<length> | <percentage> | none | inherit","min-height":"<length> | <percentage> | inherit","min-width":"<length> | <percentage> | inherit","move-to":1,"nav-down":1,"nav-index":1,"nav-left":1,"nav-right":1,"nav-up":1,opacity:"<number> | inherit",orphans:"<integer> | inherit",outline:1,"outline-color":"<color> | invert | inherit","outline-offset":1,"outline-style":"<border-style> | inherit","outline-width":"<border-width> | inherit",overflow:"visible | hidden | scroll | auto | inherit","overflow-style":1,"overflow-x":1,"overflow-y":1,padding:{multi:"<padding-width> | inherit",max:4},"padding-bottom":"<padding-width> | inherit","padding-left":"<padding-width> | inherit","padding-right":"<padding-width> | inherit","padding-top":"<padding-width> | inherit",page:1,"page-break-after":"auto | always | avoid | left | right | inherit","page-break-before":"auto | always | avoid | left | right | inherit","page-break-inside":"auto | avoid | inherit","page-policy":1,pause:1,"pause-after":1,"pause-before":1,perspective:1,"perspective-origin":1,phonemes:1,pitch:1,"pitch-range":1,"play-during":1,"pointer-events":"auto | none | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all | inherit",position:"static | relative | absolute | fixed | inherit","presentation-level":1,"punctuation-trim":1,quotes:1,"rendering-intent":1,resize:1,rest:1,"rest-after":1,"rest-before":1,richness:1,right:"<margin-width> | inherit",rotation:1,"rotation-point":1,"ruby-align":1,"ruby-overhang":1,"ruby-position":1,"ruby-span":1,size:1,speak:"normal | none | spell-out | inherit","speak-header":"once | always | inherit","speak-numeral":"digits | continuous | inherit","speak-punctuation":"code | none | inherit","speech-rate":1,src:1,stress:1,"string-set":1,"table-layout":"auto | fixed | inherit","tab-size":"<integer> | <length>",target:1,"target-name":1,"target-new":1,"target-position":1,"text-align":"left | right | center | justify | inherit","text-align-last":1,"text-decoration":1,"text-emphasis":1,"text-height":1,"text-indent":"<length> | <percentage> | inherit","text-justify":"auto | none | inter-word | inter-ideograph | inter-cluster | distribute | kashida","text-outline":1,"text-overflow":1,"text-rendering":"auto | optimizeSpeed | optimizeLegibility | geometricPrecision | inherit","text-shadow":1,"text-transform":"capitalize | uppercase | lowercase | none | inherit","text-wrap":"normal | none | avoid",top:"<margin-width> | inherit",transform:1,"transform-origin":1,"transform-style":1,transition:1,"transition-delay":1,"transition-duration":1,"transition-property":1,"transition-timing-function":1,"unicode-bidi":"normal | embed | bidi-override | inherit","user-modify":"read-only | read-write | write-only | inherit","user-select":"none | text | toggle | element | elements | all | inherit","vertical-align":"auto | use-script | baseline | sub | super | top | text-top | central | middle | bottom | text-bottom | <percentage> | <length>",visibility:"visible | hidden | collapse | inherit","voice-balance":1,"voice-duration":1,"voice-family":1,"voice-pitch":1,"voice-pitch-range":1,"voice-rate":1,"voice-stress":1,"voice-volume":1,volume:1,"white-space":"normal | pre | nowrap | pre-wrap | pre-line | inherit | -pre-wrap | -o-pre-wrap | -moz-pre-wrap | -hp-pre-wrap","white-space-collapse":1,widows:"<integer> | inherit",width:"<length> | <percentage> | auto | inherit","word-break":"normal | keep-all | break-all","word-spacing":"<length> | normal | inherit","word-wrap":1,"z-index":"<integer> | auto | inherit",zoom:"<number> | <percentage> | normal"};function PropertyName(text,hack,line,col){SyntaxUnit.call(this,text,line,col,Parser.PROPERTY_NAME_TYPE);this.hack=hack;}PropertyName.prototype=new SyntaxUnit();PropertyName.prototype.constructor=PropertyName;PropertyName.prototype.toString=function(){return(this.hack?this.hack:"")+this.text;};function PropertyValue(parts,line,col){SyntaxUnit.call(this,parts.join(" "),line,col,Parser.PROPERTY_VALUE_TYPE);this.parts=parts;}PropertyValue.prototype=new SyntaxUnit();PropertyValue.prototype.constructor=PropertyValue;function PropertyValueIterator(value){this._i=0;this._parts=value.parts;this._marks=[];this.value=value;}PropertyValueIterator.prototype.count=function(){return this._parts.length;};PropertyValueIterator.prototype.isFirst=function(){return this._i===0;};PropertyValueIterator.prototype.hasNext=function(){return(this._i<this._parts.length);};PropertyValueIterator.prototype.mark=function(){this._marks.push(this._i);};PropertyValueIterator.prototype.peek=function(count){return this.hasNext()?this._parts[this._i+(count||0)]:null;};PropertyValueIterator.prototype.next=function(){return this.hasNext()?this._parts[this._i++]:null;};PropertyValueIterator.prototype.previous=function(){return this._i>0?this._parts[--this._i]:null;};PropertyValueIterator.prototype.restore=function(){if(this._marks.length){this._i=this._marks.pop();}};function PropertyValuePart(text,line,col){SyntaxUnit.call(this,text,line,col,Parser.PROPERTY_VALUE_PART_TYPE);this.type="unknown";var temp;if(/^([+\-]?[\d\.]+)([a-z]+)$/i.test(text)){this.type="dimension";this.value=+RegExp.$1;this.units=RegExp.$2;switch(this.units.toLowerCase()){case"em":case"rem":case"ex":case"px":case"cm":case"mm":case"in":case"pt":case"pc":case"ch":case"vh":case"vw":case"vm":this.type="length";break;case"deg":case"rad":case"grad":this.type="angle";break;case"ms":case"s":this.type="time";break;case"hz":case"khz":this.type="frequency";break;case"dpi":case"dpcm":this.type="resolution";break;}}else{if(/^([+\-]?[\d\.]+)%$/i.test(text)){this.type="percentage";this.value=+RegExp.$1;}else{if(/^([+\-]?[\d\.]+)%$/i.test(text)){this.type="percentage";this.value=+RegExp.$1;}else{if(/^([+\-]?\d+)$/i.test(text)){this.type="integer";this.value=+RegExp.$1;}else{if(/^([+\-]?[\d\.]+)$/i.test(text)){this.type="number";this.value=+RegExp.$1;}else{if(/^#([a-f0-9]{3,6})/i.test(text)){this.type="color";temp=RegExp.$1;if(temp.length==3){this.red=parseInt(temp.charAt(0)+temp.charAt(0),16);this.green=parseInt(temp.charAt(1)+temp.charAt(1),16);this.blue=parseInt(temp.charAt(2)+temp.charAt(2),16);}else{this.red=parseInt(temp.substring(0,2),16);this.green=parseInt(temp.substring(2,4),16);this.blue=parseInt(temp.substring(4,6),16);}}else{if(/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i.test(text)){this.type="color";this.red=+RegExp.$1;this.green=+RegExp.$2;this.blue=+RegExp.$3;}else{if(/^rgb\(\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/i.test(text)){this.type="color";this.red=+RegExp.$1*255/100;this.green=+RegExp.$2*255/100;this.blue=+RegExp.$3*255/100;}else{if(/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/i.test(text)){this.type="color";this.red=+RegExp.$1;this.green=+RegExp.$2;this.blue=+RegExp.$3;this.alpha=+RegExp.$4;}else{if(/^rgba\(\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*,\s*([\d\.]+)\s*\)/i.test(text)){this.type="color";this.red=+RegExp.$1*255/100;this.green=+RegExp.$2*255/100;this.blue=+RegExp.$3*255/100;this.alpha=+RegExp.$4;}else{if(/^hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/i.test(text)){this.type="color";this.hue=+RegExp.$1;this.saturation=+RegExp.$2/100;this.lightness=+RegExp.$3/100;}else{if(/^hsla\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*,\s*([\d\.]+)\s*\)/i.test(text)){this.type="color";this.hue=+RegExp.$1;this.saturation=+RegExp.$2/100;this.lightness=+RegExp.$3/100;this.alpha=+RegExp.$4;}else{if(/^url\(["']?([^\)"']+)["']?\)/i.test(text)){this.type="uri";this.uri=RegExp.$1;}else{if(/^([^\(]+)\(/i.test(text)){this.type="function";this.name=RegExp.$1;this.value=text;}else{if(/^["'][^"']*["']/.test(text)){this.type="string";this.value=eval(text);}else{if(Colors[text.toLowerCase()]){this.type="color";temp=Colors[text.toLowerCase()].substring(1);this.red=parseInt(temp.substring(0,2),16);this.green=parseInt(temp.substring(2,4),16);this.blue=parseInt(temp.substring(4,6),16);}else{if(/^[\,\/]$/.test(text)){this.type="operator";this.value=text;}else{if(/^[a-z\-\u0080-\uFFFF][a-z0-9\-\u0080-\uFFFF]*$/i.test(text)){this.type="identifier";this.value=text;}}}}}}}}}}}}}}}}}}}PropertyValuePart.prototype=new SyntaxUnit();PropertyValuePart.prototype.constructor=PropertyValuePart;PropertyValuePart.fromToken=function(token){return new PropertyValuePart(token.value,token.startLine,token.startCol);};var Pseudos={":first-letter":1,":first-line":1,":before":1,":after":1};Pseudos.ELEMENT=1;Pseudos.CLASS=2;Pseudos.isElement=function(pseudo){return pseudo.indexOf("::")===0||Pseudos[pseudo.toLowerCase()]==Pseudos.ELEMENT;};function Selector(parts,line,col){SyntaxUnit.call(this,parts.join(" "),line,col,Parser.SELECTOR_TYPE);this.parts=parts;this.specificity=Specificity.calculate(this);}Selector.prototype=new SyntaxUnit();Selector.prototype.constructor=Selector;function SelectorPart(elementName,modifiers,text,line,col){SyntaxUnit.call(this,text,line,col,Parser.SELECTOR_PART_TYPE);this.elementName=elementName;this.modifiers=modifiers;}SelectorPart.prototype=new SyntaxUnit();SelectorPart.prototype.constructor=SelectorPart;function SelectorSubPart(text,type,line,col){SyntaxUnit.call(this,text,line,col,Parser.SELECTOR_SUB_PART_TYPE);this.type=type;this.args=[];}SelectorSubPart.prototype=new SyntaxUnit();SelectorSubPart.prototype.constructor=SelectorSubPart;function Specificity(a,b,c,d){this.a=a;this.b=b;this.c=c;this.d=d;}Specificity.prototype={constructor:Specificity,compare:function(other){var comps=["a","b","c","d"],i,len;for(i=0,len=comps.length;i<len;i++){if(this[comps[i]]<other[comps[i]]){return -1;}else{if(this[comps[i]]>other[comps[i]]){return 1;}}}return 0;},valueOf:function(){return(this.a*1000)+(this.b*100)+(this.c*10)+this.d;},toString:function(){return this.a+","+this.b+","+this.c+","+this.d;}};Specificity.calculate=function(selector){var i,len,part,b=0,c=0,d=0;function updateValues(part){var i,j,len,num,elementName=part.elementName?part.elementName.text:"",modifier;if(elementName&&elementName.charAt(elementName.length-1)!="*"){d++;}for(i=0,len=part.modifiers.length;i<len;i++){modifier=part.modifiers[i];switch(modifier.type){case"class":case"attribute":c++;break;case"id":b++;break;case"pseudo":if(Pseudos.isElement(modifier.text)){d++;}else{c++;}break;case"not":for(j=0,num=modifier.args.length;j<num;j++){updateValues(modifier.args[j]);}}}}for(i=0,len=selector.parts.length;i<len;i++){part=selector.parts[i];if(part instanceof SelectorPart){updateValues(part);}}return new Specificity(0,b,c,d);};var h=/^[0-9a-fA-F]$/,nonascii=/^[\u0080-\uFFFF]$/,nl=/\n|\r\n|\r|\f/;function isHexDigit(c){return c!==null&&h.test(c);}function isDigit(c){return c!==null&&/\d/.test(c);}function isWhitespace(c){return c!==null&&/\s/.test(c);}function isNewLine(c){return c!==null&&nl.test(c);}function isNameStart(c){return c!==null&&(/[a-z_\u0080-\uFFFF\\]/i.test(c));}function isNameChar(c){return c!==null&&(isNameStart(c)||/[0-9\-\\]/.test(c));}function isIdentStart(c){return c!==null&&(isNameStart(c)||/\-\\/.test(c));}function mix(receiver,supplier){for(var prop in supplier){if(supplier.hasOwnProperty(prop)){receiver[prop]=supplier[prop];}}return receiver;}function TokenStream(input){TokenStreamBase.call(this,input,Tokens);}TokenStream.prototype=mix(new TokenStreamBase(),{_getToken:function(channel){var c,reader=this._reader,token=null,startLine=reader.getLine(),startCol=reader.getCol();c=reader.read();while(c){switch(c){case"/":if(reader.peek()=="*"){token=this.commentToken(c,startLine,startCol);}else{token=this.charToken(c,startLine,startCol);}break;case"|":case"~":case"^":case"$":case"*":if(reader.peek()=="="){token=this.comparisonToken(c,startLine,startCol);}else{token=this.charToken(c,startLine,startCol);}break;case'"':case"'":token=this.stringToken(c,startLine,startCol);break;case"#":if(isNameChar(reader.peek())){token=this.hashToken(c,startLine,startCol);}else{token=this.charToken(c,startLine,startCol);}break;case".":if(isDigit(reader.peek())){token=this.numberToken(c,startLine,startCol);}else{token=this.charToken(c,startLine,startCol);}break;case"-":if(reader.peek()=="-"){token=this.htmlCommentEndToken(c,startLine,startCol);}else{if(isNameStart(reader.peek())){token=this.identOrFunctionToken(c,startLine,startCol);}else{token=this.charToken(c,startLine,startCol);}}break;case"!":token=this.importantToken(c,startLine,startCol);break;case"@":token=this.atRuleToken(c,startLine,startCol);break;case":":token=this.notToken(c,startLine,startCol);break;case"<":token=this.htmlCommentStartToken(c,startLine,startCol);break;case"U":case"u":if(reader.peek()=="+"){token=this.unicodeRangeToken(c,startLine,startCol);break;}default:if(isDigit(c)){token=this.numberToken(c,startLine,startCol);}else{if(isWhitespace(c)){token=this.whitespaceToken(c,startLine,startCol);}else{if(isIdentStart(c)){token=this.identOrFunctionToken(c,startLine,startCol);}else{token=this.charToken(c,startLine,startCol);}}}}break;}if(!token&&c===null){token=this.createToken(Tokens.EOF,null,startLine,startCol);}return token;},createToken:function(tt,value,startLine,startCol,options){var reader=this._reader;options=options||{};return{value:value,type:tt,channel:options.channel,hide:options.hide||false,startLine:startLine,startCol:startCol,endLine:reader.getLine(),endCol:reader.getCol()};},atRuleToken:function(first,startLine,startCol){var rule=first,reader=this._reader,tt=Tokens.CHAR,valid=false,ident,c;reader.mark();ident=this.readName();rule=first+ident;tt=Tokens.type(rule.toLowerCase());if(tt==Tokens.CHAR||tt==Tokens.UNKNOWN){if(rule.length>1){tt=Tokens.UNKNOWN_SYM;}else{tt=Tokens.CHAR;rule=first;reader.reset();}}return this.createToken(tt,rule,startLine,startCol);},charToken:function(c,startLine,startCol){var tt=Tokens.type(c);if(tt==-1){tt=Tokens.CHAR;}return this.createToken(tt,c,startLine,startCol);},commentToken:function(first,startLine,startCol){var reader=this._reader,comment=this.readComment(first);return this.createToken(Tokens.COMMENT,comment,startLine,startCol);},comparisonToken:function(c,startLine,startCol){var reader=this._reader,comparison=c+reader.read(),tt=Tokens.type(comparison)||Tokens.CHAR;return this.createToken(tt,comparison,startLine,startCol);},hashToken:function(first,startLine,startCol){var reader=this._reader,name=this.readName(first);return this.createToken(Tokens.HASH,name,startLine,startCol);},htmlCommentStartToken:function(first,startLine,startCol){var reader=this._reader,text=first;reader.mark();text+=reader.readCount(3);if(text=="<!--"){return this.createToken(Tokens.CDO,text,startLine,startCol);}else{reader.reset();return this.charToken(first,startLine,startCol);}},htmlCommentEndToken:function(first,startLine,startCol){var reader=this._reader,text=first;reader.mark();text+=reader.readCount(2);if(text=="-->"){return this.createToken(Tokens.CDC,text,startLine,startCol);}else{reader.reset();return this.charToken(first,startLine,startCol);}},identOrFunctionToken:function(first,startLine,startCol){var reader=this._reader,ident=this.readName(first),tt=Tokens.IDENT;if(reader.peek()=="("){ident+=reader.read();if(ident.toLowerCase()=="url("){tt=Tokens.URI;ident=this.readURI(ident);if(ident.toLowerCase()=="url("){tt=Tokens.FUNCTION;}}else{tt=Tokens.FUNCTION;}}else{if(reader.peek()==":"){if(ident.toLowerCase()=="progid"){ident+=reader.readTo("(");tt=Tokens.IE_FUNCTION;}}}return this.createToken(tt,ident,startLine,startCol);},importantToken:function(first,startLine,startCol){var reader=this._reader,important=first,tt=Tokens.CHAR,temp,c;reader.mark();c=reader.read();while(c){if(c=="/"){if(reader.peek()!="*"){break;}else{temp=this.readComment(c);if(temp===""){break;}}}else{if(isWhitespace(c)){important+=c+this.readWhitespace();}else{if(/i/i.test(c)){temp=reader.readCount(8);if(/mportant/i.test(temp)){important+=c+temp;tt=Tokens.IMPORTANT_SYM;}break;}else{break;}}}c=reader.read();}if(tt==Tokens.CHAR){reader.reset();return this.charToken(first,startLine,startCol);}else{return this.createToken(tt,important,startLine,startCol);}},notToken:function(first,startLine,startCol){var reader=this._reader,text=first;reader.mark();text+=reader.readCount(4);if(text.toLowerCase()==":not("){return this.createToken(Tokens.NOT,text,startLine,startCol);}else{reader.reset();return this.charToken(first,startLine,startCol);}},numberToken:function(first,startLine,startCol){var reader=this._reader,value=this.readNumber(first),ident,tt=Tokens.NUMBER,c=reader.peek();if(isIdentStart(c)){ident=this.readName(reader.read());value+=ident;if(/^em$|^ex$|^px$|^gd$|^rem$|^vw$|^vh$|^vm$|^ch$|^cm$|^mm$|^in$|^pt$|^pc$/i.test(ident)){tt=Tokens.LENGTH;}else{if(/^deg|^rad$|^grad$/i.test(ident)){tt=Tokens.ANGLE;}else{if(/^ms$|^s$/i.test(ident)){tt=Tokens.TIME;}else{if(/^hz$|^khz$/i.test(ident)){tt=Tokens.FREQ;}else{if(/^dpi$|^dpcm$/i.test(ident)){tt=Tokens.RESOLUTION;}else{tt=Tokens.DIMENSION;}}}}}}else{if(c=="%"){value+=reader.read();tt=Tokens.PERCENTAGE;}}return this.createToken(tt,value,startLine,startCol);},stringToken:function(first,startLine,startCol){var delim=first,string=first,reader=this._reader,prev=first,tt=Tokens.STRING,c=reader.read();while(c){string+=c;if(c==delim&&prev!="\\"){break;}if(isNewLine(reader.peek())&&c!="\\"){tt=Tokens.INVALID;break;}prev=c;c=reader.read();}if(c===null){tt=Tokens.INVALID;}return this.createToken(tt,string,startLine,startCol);},unicodeRangeToken:function(first,startLine,startCol){var reader=this._reader,value=first,temp,tt=Tokens.CHAR;if(reader.peek()=="+"){reader.mark();value+=reader.read();value+=this.readUnicodeRangePart(true);if(value.length==2){reader.reset();}else{tt=Tokens.UNICODE_RANGE;if(value.indexOf("?")==-1){if(reader.peek()=="-"){reader.mark();temp=reader.read();temp+=this.readUnicodeRangePart(false);if(temp.length==1){reader.reset();}else{value+=temp;}}}}}return this.createToken(tt,value,startLine,startCol);},whitespaceToken:function(first,startLine,startCol){var reader=this._reader,value=first+this.readWhitespace();return this.createToken(Tokens.S,value,startLine,startCol);},readUnicodeRangePart:function(allowQuestionMark){var reader=this._reader,part="",c=reader.peek();while(isHexDigit(c)&&part.length<6){reader.read();part+=c;c=reader.peek();}if(allowQuestionMark){while(c=="?"&&part.length<6){reader.read();part+=c;c=reader.peek();}}return part;},readWhitespace:function(){var reader=this._reader,whitespace="",c=reader.peek();while(isWhitespace(c)){reader.read();whitespace+=c;c=reader.peek();}return whitespace;},readNumber:function(first){var reader=this._reader,number=first,hasDot=(first=="."),c=reader.peek();while(c){if(isDigit(c)){number+=reader.read();}else{if(c=="."){if(hasDot){break;}else{hasDot=true;number+=reader.read();}}else{break;}}c=reader.peek();}return number;},readString:function(){var reader=this._reader,delim=reader.read(),string=delim,prev=delim,c=reader.peek();while(c){c=reader.read();string+=c;if(c==delim&&prev!="\\"){break;}if(isNewLine(reader.peek())&&c!="\\"){string="";break;}prev=c;c=reader.peek();}if(c===null){string="";}return string;},readURI:function(first){var reader=this._reader,uri=first,inner="",c=reader.peek();reader.mark();while(c&&isWhitespace(c)){reader.read();c=reader.peek();}if(c=="'"||c=='"'){inner=this.readString();}else{inner=this.readURL();}c=reader.peek();while(c&&isWhitespace(c)){reader.read();c=reader.peek();}if(inner===""||c!=")"){uri=first;reader.reset();}else{uri+=inner+reader.read();}return uri;},readURL:function(){var reader=this._reader,url="",c=reader.peek();while(/^[!#$%&\\*-~]$/.test(c)){url+=reader.read();c=reader.peek();}return url;},readName:function(first){var reader=this._reader,ident=first||"",c=reader.peek();while(true){if(c=="\\"){ident+=this.readEscape(reader.read());c=reader.peek();}else{if(c&&isNameChar(c)){ident+=reader.read();c=reader.peek();}else{break;}}}return ident;},readEscape:function(first){var reader=this._reader,cssEscape=first||"",i=0,c=reader.peek();if(isHexDigit(c)){do{cssEscape+=reader.read();c=reader.peek();}while(c&&isHexDigit(c)&&++i<6);}if(cssEscape.length==3&&/\s/.test(c)||cssEscape.length==7||cssEscape.length==1){reader.read();}else{c="";}return cssEscape+c;},readComment:function(first){var reader=this._reader,comment=first||"",c=reader.read();if(c=="*"){while(c){comment+=c;if(comment.length>2&&c=="*"&&reader.peek()=="/"){comment+=reader.read();break;}c=reader.read();}return comment;}else{return"";}}});var Tokens=[{name:"CDO"},{name:"CDC"},{name:"S",whitespace:true},{name:"COMMENT",comment:true,hide:true,channel:"comment"},{name:"INCLUDES",text:"~="},{name:"DASHMATCH",text:"|="},{name:"PREFIXMATCH",text:"^="},{name:"SUFFIXMATCH",text:"$="},{name:"SUBSTRINGMATCH",text:"*="},{name:"STRING"},{name:"IDENT"},{name:"HASH"},{name:"IMPORT_SYM",text:"@import"},{name:"PAGE_SYM",text:"@page"},{name:"MEDIA_SYM",text:"@media"},{name:"FONT_FACE_SYM",text:"@font-face"},{name:"CHARSET_SYM",text:"@charset"},{name:"NAMESPACE_SYM",text:"@namespace"},{name:"VIEWPORT_SYM",text:"@viewport"},{name:"UNKNOWN_SYM"},{name:"KEYFRAMES_SYM",text:["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"]},{name:"IMPORTANT_SYM"},{name:"LENGTH"},{name:"ANGLE"},{name:"TIME"},{name:"FREQ"},{name:"DIMENSION"},{name:"PERCENTAGE"},{name:"NUMBER"},{name:"URI"},{name:"FUNCTION"},{name:"UNICODE_RANGE"},{name:"INVALID"},{name:"PLUS",text:"+"},{name:"GREATER",text:">"},{name:"COMMA",text:","},{name:"TILDE",text:"~"},{name:"NOT"},{name:"TOPLEFTCORNER_SYM",text:"@top-left-corner"},{name:"TOPLEFT_SYM",text:"@top-left"},{name:"TOPCENTER_SYM",text:"@top-center"},{name:"TOPRIGHT_SYM",text:"@top-right"},{name:"TOPRIGHTCORNER_SYM",text:"@top-right-corner"},{name:"BOTTOMLEFTCORNER_SYM",text:"@bottom-left-corner"},{name:"BOTTOMLEFT_SYM",text:"@bottom-left"},{name:"BOTTOMCENTER_SYM",text:"@bottom-center"},{name:"BOTTOMRIGHT_SYM",text:"@bottom-right"},{name:"BOTTOMRIGHTCORNER_SYM",text:"@bottom-right-corner"},{name:"LEFTTOP_SYM",text:"@left-top"},{name:"LEFTMIDDLE_SYM",text:"@left-middle"},{name:"LEFTBOTTOM_SYM",text:"@left-bottom"},{name:"RIGHTTOP_SYM",text:"@right-top"},{name:"RIGHTMIDDLE_SYM",text:"@right-middle"},{name:"RIGHTBOTTOM_SYM",text:"@right-bottom"},{name:"RESOLUTION",state:"media"},{name:"IE_FUNCTION"},{name:"CHAR"},{name:"PIPE",text:"|"},{name:"SLASH",text:"/"},{name:"MINUS",text:"-"},{name:"STAR",text:"*"},{name:"LBRACE",text:"{"},{name:"RBRACE",text:"}"},{name:"LBRACKET",text:"["},{name:"RBRACKET",text:"]"},{name:"EQUALS",text:"="},{name:"COLON",text:":"},{name:"SEMICOLON",text:";"},{name:"LPAREN",text:"("},{name:"RPAREN",text:")"},{name:"DOT",text:"."}];(function(){var nameMap=[],typeMap={};Tokens.UNKNOWN=-1;Tokens.unshift({name:"EOF"});for(var i=0,len=Tokens.length;i<len;i++){nameMap.push(Tokens[i].name);Tokens[Tokens[i].name]=i;if(Tokens[i].text){if(Tokens[i].text instanceof Array){for(var j=0;j<Tokens[i].text.length;j++){typeMap[Tokens[i].text[j]]=i;}}else{typeMap[Tokens[i].text]=i;}}}Tokens.name=function(tt){return nameMap[tt];};Tokens.type=function(c){return typeMap[c]||-1;};})();var Validation={validate:function(property,value){var name=property.toString().toLowerCase(),parts=value.parts,expression=new PropertyValueIterator(value),spec=Properties[name],part,valid,j,count,msg,types,last,literals,max,multi,group;if(!spec){if(name.indexOf("-")!==0){throw new ValidationError("Unknown property '"+property+"'.",property.line,property.col);}}else{if(typeof spec!="number"){if(typeof spec=="string"){if(spec.indexOf("||")>-1){this.groupProperty(spec,expression);}else{this.singleProperty(spec,expression,1);}}else{if(spec.multi){this.multiProperty(spec.multi,expression,spec.comma,spec.max||Infinity);}else{if(typeof spec=="function"){spec(expression);}}}}}},singleProperty:function(types,expression,max,partial){var result=false,value=expression.value,count=0,part;while(expression.hasNext()&&count<max){result=ValidationTypes.isAny(expression,types);if(!result){break;}count++;}if(!result){if(expression.hasNext()&&!expression.isFirst()){part=expression.peek();throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}else{throw new ValidationError("Expected ("+types+") but found '"+value+"'.",value.line,value.col);}}else{if(expression.hasNext()){part=expression.next();throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}}},multiProperty:function(types,expression,comma,max){var result=false,value=expression.value,count=0,sep=false,part;while(expression.hasNext()&&!result&&count<max){if(ValidationTypes.isAny(expression,types)){count++;if(!expression.hasNext()){result=true;}else{if(comma){if(expression.peek()==","){part=expression.next();}else{break;}}}}else{break;}}if(!result){if(expression.hasNext()&&!expression.isFirst()){part=expression.peek();throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}else{part=expression.previous();if(comma&&part==","){throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}else{throw new ValidationError("Expected ("+types+") but found '"+value+"'.",value.line,value.col);}}}else{if(expression.hasNext()){part=expression.next();throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}}},groupProperty:function(types,expression,comma){var result=false,value=expression.value,typeCount=types.split("||").length,groups={count:0},partial=false,name,part;while(expression.hasNext()&&!result){name=ValidationTypes.isAnyOfGroup(expression,types);if(name){if(groups[name]){break;}else{groups[name]=1;groups.count++;partial=true;if(groups.count==typeCount||!expression.hasNext()){result=true;}}}else{break;}}if(!result){if(partial&&expression.hasNext()){part=expression.peek();throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}else{throw new ValidationError("Expected ("+types+") but found '"+value+"'.",value.line,value.col);}}else{if(expression.hasNext()){part=expression.next();throw new ValidationError("Expected end of value but found '"+part+"'.",part.line,part.col);}}}};function ValidationError(message,line,col){this.col=col;this.line=line;this.message=message;}ValidationError.prototype=new Error();var ValidationTypes={isLiteral:function(part,literals){var text=part.text.toString().toLowerCase(),args=literals.split(" | "),i,len,found=false;for(i=0,len=args.length;i<len&&!found;i++){if(text==args[i].toLowerCase()){found=true;}}return found;},isSimple:function(type){return !!this.simple[type];},isComplex:function(type){return !!this.complex[type];},isAny:function(expression,types){var args=types.split(" | "),i,len,found=false;for(i=0,len=args.length;i<len&&!found&&expression.hasNext();i++){found=this.isType(expression,args[i]);}return found;},isAnyOfGroup:function(expression,types){var args=types.split(" || "),i,len,found=false;for(i=0,len=args.length;i<len&&!found;i++){found=this.isType(expression,args[i]);}return found?args[i-1]:false;},isType:function(expression,type){var part=expression.peek(),result=false;if(type.charAt(0)!="<"){result=this.isLiteral(part,type);if(result){expression.next();}}else{if(this.simple[type]){result=this.simple[type](part);if(result){expression.next();}}else{result=this.complex[type](expression);}}return result;},simple:{"<absolute-size>":function(part){return ValidationTypes.isLiteral(part,"xx-small | x-small | small | medium | large | x-large | xx-large");},"<attachment>":function(part){return ValidationTypes.isLiteral(part,"scroll | fixed | local");},"<attr>":function(part){return part.type=="function"&&part.name=="attr";},"<bg-image>":function(part){return this["<image>"](part)||this["<gradient>"](part)||part=="none";},"<gradient>":function(part){return part.type=="function"&&/^(?:\-(?:ms|moz|o|webkit)\-)?(?:repeating\-)?(?:radial\-|linear\-)?gradient/i.test(part);},"<box>":function(part){return ValidationTypes.isLiteral(part,"padding-box | border-box | content-box");},"<content>":function(part){return part.type=="function"&&part.name=="content";},"<relative-size>":function(part){return ValidationTypes.isLiteral(part,"smaller | larger");},"<ident>":function(part){return part.type=="identifier";},"<length>":function(part){if(part.type=="function"&&/^(?:\-(?:ms|moz|o|webkit)\-)?calc/i.test(part)){return true;}else{return part.type=="length"||part.type=="number"||part.type=="integer"||part=="0";}},"<color>":function(part){return part.type=="color"||part=="transparent";},"<number>":function(part){return part.type=="number"||this["<integer>"](part);},"<integer>":function(part){return part.type=="integer";},"<line>":function(part){return part.type=="integer";},"<angle>":function(part){return part.type=="angle";},"<uri>":function(part){return part.type=="uri";},"<image>":function(part){return this["<uri>"](part);},"<percentage>":function(part){return part.type=="percentage"||part=="0";},"<border-width>":function(part){return this["<length>"](part)||ValidationTypes.isLiteral(part,"thin | medium | thick");},"<border-style>":function(part){return ValidationTypes.isLiteral(part,"none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset");},"<margin-width>":function(part){return this["<length>"](part)||this["<percentage>"](part)||ValidationTypes.isLiteral(part,"auto");},"<padding-width>":function(part){return this["<length>"](part)||this["<percentage>"](part);},"<shape>":function(part){return part.type=="function"&&(part.name=="rect"||part.name=="inset-rect");},"<time>":function(part){return part.type=="time";}},complex:{"<bg-position>":function(expression){var types=this,result=false,numeric="<percentage> | <length>",xDir="left | right",yDir="top | bottom",count=0,hasNext=function(){return expression.hasNext()&&expression.peek()!=",";};while(expression.peek(count)&&expression.peek(count)!=","){count++;}if(count<3){if(ValidationTypes.isAny(expression,xDir+" | center | "+numeric)){result=true;ValidationTypes.isAny(expression,yDir+" | center | "+numeric);}else{if(ValidationTypes.isAny(expression,yDir)){result=true;ValidationTypes.isAny(expression,xDir+" | center");}}}else{if(ValidationTypes.isAny(expression,xDir)){if(ValidationTypes.isAny(expression,yDir)){result=true;ValidationTypes.isAny(expression,numeric);}else{if(ValidationTypes.isAny(expression,numeric)){if(ValidationTypes.isAny(expression,yDir)){result=true;ValidationTypes.isAny(expression,numeric);}else{if(ValidationTypes.isAny(expression,"center")){result=true;}}}}}else{if(ValidationTypes.isAny(expression,yDir)){if(ValidationTypes.isAny(expression,xDir)){result=true;ValidationTypes.isAny(expression,numeric);}else{if(ValidationTypes.isAny(expression,numeric)){if(ValidationTypes.isAny(expression,xDir)){result=true;ValidationTypes.isAny(expression,numeric);}else{if(ValidationTypes.isAny(expression,"center")){result=true;}}}}}else{if(ValidationTypes.isAny(expression,"center")){if(ValidationTypes.isAny(expression,xDir+" | "+yDir)){result=true;ValidationTypes.isAny(expression,numeric);}}}}}return result;},"<bg-size>":function(expression){var types=this,result=false,numeric="<percentage> | <length> | auto",part,i,len;if(ValidationTypes.isAny(expression,"cover | contain")){result=true;}else{if(ValidationTypes.isAny(expression,numeric)){result=true;ValidationTypes.isAny(expression,numeric);}}return result;},"<repeat-style>":function(expression){var result=false,values="repeat | space | round | no-repeat",part;if(expression.hasNext()){part=expression.next();if(ValidationTypes.isLiteral(part,"repeat-x | repeat-y")){result=true;}else{if(ValidationTypes.isLiteral(part,values)){result=true;if(expression.hasNext()&&ValidationTypes.isLiteral(expression.peek(),values)){expression.next();}}}}return result;},"<shadow>":function(expression){var result=false,count=0,inset=false,color=false,part;if(expression.hasNext()){if(ValidationTypes.isAny(expression,"inset")){inset=true;}if(ValidationTypes.isAny(expression,"<color>")){color=true;}while(ValidationTypes.isAny(expression,"<length>")&&count<4){count++;}if(expression.hasNext()){if(!color){ValidationTypes.isAny(expression,"<color>");}if(!inset){ValidationTypes.isAny(expression,"inset");}}result=(count>=2&&count<=4);}return result;},"<x-one-radius>":function(expression){var result=false,simple="<length> | <percentage> | inherit";if(ValidationTypes.isAny(expression,simple)){result=true;ValidationTypes.isAny(expression,simple);}return result;}}};parserlib.css={Colors:Colors,Combinator:Combinator,Parser:Parser,PropertyName:PropertyName,PropertyValue:PropertyValue,PropertyValuePart:PropertyValuePart,MediaFeature:MediaFeature,MediaQuery:MediaQuery,Selector:Selector,SelectorPart:SelectorPart,SelectorSubPart:SelectorSubPart,Specificity:Specificity,TokenStream:TokenStream,Tokens:Tokens,ValidationError:ValidationError};})();(function(){for(var prop in parserlib){exports[prop]=parserlib[prop];}})();var CSSLint=(function(){var rules=[],formatters=[],embeddedRuleset=/\/\*csslint([^\*]*)\*\//,api=new parserlib.util.EventTarget();api.version="0.10.0";api.addRule=function(rule){rules.push(rule);rules[rule.id]=rule;};api.clearRules=function(){rules=[];};api.getRules=function(){return[].concat(rules).sort(function(a,b){return a.id>b.id?1:0;});};api.getRuleset=function(){var ruleset={},i=0,len=rules.length;while(i<len){ruleset[rules[i++].id]=1;}return ruleset;};function applyEmbeddedRuleset(text,ruleset){var valueMap,embedded=text&&text.match(embeddedRuleset),rules=embedded&&embedded[1];if(rules){valueMap={"true":2,"":1,"false":0,"2":2,"1":1,"0":0};rules.toLowerCase().split(",").forEach(function(rule){var pair=rule.split(":"),property=pair[0]||"",value=pair[1]||"";ruleset[property.trim()]=valueMap[value.trim()];});}return ruleset;}api.addFormatter=function(formatter){formatters[formatter.id]=formatter;};api.getFormatter=function(formatId){return formatters[formatId];};api.format=function(results,filename,formatId,options){var formatter=this.getFormatter(formatId),result=null;if(formatter){result=formatter.startFormat();result+=formatter.formatResults(results,filename,options||{});result+=formatter.endFormat();}return result;};api.hasFormat=function(formatId){return formatters.hasOwnProperty(formatId);};api.verify=function(text,ruleset){var i=0,len=rules.length,reporter,lines,report,parser=new parserlib.css.Parser({starHack:true,ieFilters:true,underscoreHack:true,strict:false});lines=text.replace(/\n\r?/g,"$split$").split("$split$");if(!ruleset){ruleset=this.getRuleset();}if(embeddedRuleset.test(text)){ruleset=applyEmbeddedRuleset(text,ruleset);}reporter=new Reporter(lines,ruleset);ruleset.errors=2;for(i in ruleset){if(ruleset.hasOwnProperty(i)&&ruleset[i]){if(rules[i]){rules[i].init(parser,reporter);}}}try{parser.parse(text);}catch(ex){reporter.error("Fatal error, cannot continue: "+ex.message,ex.line,ex.col,{});}report={messages:reporter.messages,stats:reporter.stats,ruleset:reporter.ruleset};report.messages.sort(function(a,b){if(a.rollup&&!b.rollup){return 1;}else{if(!a.rollup&&b.rollup){return -1;}else{return a.line-b.line;}}});return report;};return api;})();function Reporter(lines,ruleset){this.messages=[];this.stats=[];this.lines=lines;this.ruleset=ruleset;}Reporter.prototype={constructor:Reporter,error:function(message,line,col,rule){this.messages.push({type:"error",line:line,col:col,message:message,evidence:this.lines[line-1],rule:rule||{}});},warn:function(message,line,col,rule){this.report(message,line,col,rule);},report:function(message,line,col,rule){this.messages.push({type:this.ruleset[rule.id]==2?"error":"warning",line:line,col:col,message:message,evidence:this.lines[line-1],rule:rule});},info:function(message,line,col,rule){this.messages.push({type:"info",line:line,col:col,message:message,evidence:this.lines[line-1],rule:rule});},rollupError:function(message,rule){this.messages.push({type:"error",rollup:true,message:message,rule:rule});},rollupWarn:function(message,rule){this.messages.push({type:"warning",rollup:true,message:message,rule:rule});},stat:function(name,value){this.stats[name]=value;}};CSSLint._Reporter=Reporter;CSSLint.Util={mix:function(receiver,supplier){var prop;for(prop in supplier){if(supplier.hasOwnProperty(prop)){receiver[prop]=supplier[prop];}}return prop;},indexOf:function(values,value){if(values.indexOf){return values.indexOf(value);}else{for(var i=0,len=values.length;i<len;i++){if(values[i]===value){return i;}}return -1;}},forEach:function(values,func){if(values.forEach){return values.forEach(func);}else{for(var i=0,len=values.length;i<len;i++){func(values[i],i,values);}}}};CSSLint.addRule({id:"adjoining-classes",name:"Disallow adjoining classes",desc:"Don't use adjoining classes.",browsers:"IE6",init:function(parser,reporter){var rule=this;parser.addListener("startrule",function(event){var selectors=event.selectors,selector,part,modifier,classCount,i,j,k;for(i=0;i<selectors.length;i++){selector=selectors[i];for(j=0;j<selector.parts.length;j++){part=selector.parts[j];if(part.type==parser.SELECTOR_PART_TYPE){classCount=0;for(k=0;k<part.modifiers.length;k++){modifier=part.modifiers[k];if(modifier.type=="class"){classCount++;}if(classCount>1){reporter.report("Don't use adjoining classes.",part.line,part.col,rule);}}}}}});}});CSSLint.addRule({id:"box-model",name:"Beware of broken box size",desc:"Don't use width or height when using padding or border.",browsers:"All",init:function(parser,reporter){var rule=this,widthProperties={border:1,"border-left":1,"border-right":1,padding:1,"padding-left":1,"padding-right":1},heightProperties={border:1,"border-bottom":1,"border-top":1,padding:1,"padding-bottom":1,"padding-top":1},properties,boxSizing=false;function startRule(){properties={};boxSizing=false;}function endRule(){var prop,value;if(!boxSizing){if(properties.height){for(prop in heightProperties){if(heightProperties.hasOwnProperty(prop)&&properties[prop]){value=properties[prop].value;if(!(prop=="padding"&&value.parts.length===2&&value.parts[0].value===0)){reporter.report("Using height with "+prop+" can sometimes make elements larger than you expect.",properties[prop].line,properties[prop].col,rule);}}}}if(properties.width){for(prop in widthProperties){if(widthProperties.hasOwnProperty(prop)&&properties[prop]){value=properties[prop].value;if(!(prop=="padding"&&value.parts.length===2&&value.parts[1].value===0)){reporter.report("Using width with "+prop+" can sometimes make elements larger than you expect.",properties[prop].line,properties[prop].col,rule);}}}}}}parser.addListener("startrule",startRule);parser.addListener("startfontface",startRule);parser.addListener("startpage",startRule);parser.addListener("startpagemargin",startRule);parser.addListener("startkeyframerule",startRule);parser.addListener("property",function(event){var name=event.property.text.toLowerCase();if(heightProperties[name]||widthProperties[name]){if(!/^0\S*$/.test(event.value)&&!(name=="border"&&event.value=="none")){properties[name]={line:event.property.line,col:event.property.col,value:event.value};}}else{if(/^(width|height)/i.test(name)&&/^(length|percentage)/.test(event.value.parts[0].type)){properties[name]=1;}else{if(name=="box-sizing"){boxSizing=true;}}}});parser.addListener("endrule",endRule);parser.addListener("endfontface",endRule);parser.addListener("endpage",endRule);parser.addListener("endpagemargin",endRule);parser.addListener("endkeyframerule",endRule);}});CSSLint.addRule({id:"box-sizing",name:"Disallow use of box-sizing",desc:"The box-sizing properties isn't supported in IE6 and IE7.",browsers:"IE6, IE7",tags:["Compatibility"],init:function(parser,reporter){var rule=this;parser.addListener("property",function(event){var name=event.property.text.toLowerCase();if(name=="box-sizing"){reporter.report("The box-sizing property isn't supported in IE6 and IE7.",event.line,event.col,rule);}});}});CSSLint.addRule({id:"bulletproof-font-face",name:"Use the bulletproof @font-face syntax",desc:"Use the bulletproof @font-face syntax to avoid 404's in old IE (http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax).",browsers:"All",init:function(parser,reporter){var rule=this,count=0,fontFaceRule=false,firstSrc=true,ruleFailed=false,line,col;parser.addListener("startfontface",function(event){fontFaceRule=true;});parser.addListener("property",function(event){if(!fontFaceRule){return;}var propertyName=event.property.toString().toLowerCase(),value=event.value.toString();line=event.line;col=event.col;if(propertyName==="src"){var regex=/^\s?url\(['"].+\.eot\?.*['"]\)\s*format\(['"]embedded-opentype['"]\).*$/i;if(!value.match(regex)&&firstSrc){ruleFailed=true;firstSrc=false;}else{if(value.match(regex)&&!firstSrc){ruleFailed=false;}}}});parser.addListener("endfontface",function(event){fontFaceRule=false;if(ruleFailed){reporter.report("@font-face declaration doesn't follow the fontspring bulletproof syntax.",line,col,rule);}});}});CSSLint.addRule({id:"compatible-vendor-prefixes",name:"Require compatible vendor prefixes",desc:"Include all compatible vendor prefixes to reach a wider range of users.",browsers:"All",init:function(parser,reporter){var rule=this,compatiblePrefixes,properties,prop,variations,prefixed,i,len,inKeyFrame=false,arrayPush=Array.prototype.push,applyTo=[];compatiblePrefixes={animation:"webkit moz","animation-delay":"webkit moz","animation-direction":"webkit moz","animation-duration":"webkit moz","animation-fill-mode":"webkit moz","animation-iteration-count":"webkit moz","animation-name":"webkit moz","animation-play-state":"webkit moz","animation-timing-function":"webkit moz",appearance:"webkit moz","border-end":"webkit moz","border-end-color":"webkit moz","border-end-style":"webkit moz","border-end-width":"webkit moz","border-image":"webkit moz o","border-radius":"webkit","border-start":"webkit moz","border-start-color":"webkit moz","border-start-style":"webkit moz","border-start-width":"webkit moz","box-align":"webkit moz ms","box-direction":"webkit moz ms","box-flex":"webkit moz ms","box-lines":"webkit ms","box-ordinal-group":"webkit moz ms","box-orient":"webkit moz ms","box-pack":"webkit moz ms","box-sizing":"webkit moz","box-shadow":"webkit moz","column-count":"webkit moz ms","column-gap":"webkit moz ms","column-rule":"webkit moz ms","column-rule-color":"webkit moz ms","column-rule-style":"webkit moz ms","column-rule-width":"webkit moz ms","column-width":"webkit moz ms",hyphens:"epub moz","line-break":"webkit ms","margin-end":"webkit moz","margin-start":"webkit moz","marquee-speed":"webkit wap","marquee-style":"webkit wap","padding-end":"webkit moz","padding-start":"webkit moz","tab-size":"moz o","text-size-adjust":"webkit ms",transform:"webkit moz ms o","transform-origin":"webkit moz ms o",transition:"webkit moz o","transition-delay":"webkit moz o","transition-duration":"webkit moz o","transition-property":"webkit moz o","transition-timing-function":"webkit moz o","user-modify":"webkit moz","user-select":"webkit moz ms","word-break":"epub ms","writing-mode":"epub ms"};for(prop in compatiblePrefixes){if(compatiblePrefixes.hasOwnProperty(prop)){variations=[];prefixed=compatiblePrefixes[prop].split(" ");for(i=0,len=prefixed.length;i<len;i++){variations.push("-"+prefixed[i]+"-"+prop);}compatiblePrefixes[prop]=variations;arrayPush.apply(applyTo,variations);}}parser.addListener("startrule",function(){properties=[];});parser.addListener("startkeyframes",function(event){inKeyFrame=event.prefix||true;});parser.addListener("endkeyframes",function(event){inKeyFrame=false;});parser.addListener("property",function(event){var name=event.property;if(CSSLint.Util.indexOf(applyTo,name.text)>-1){if(!inKeyFrame||typeof inKeyFrame!="string"||name.text.indexOf("-"+inKeyFrame+"-")!==0){properties.push(name);}}});parser.addListener("endrule",function(event){if(!properties.length){return;}var propertyGroups={},i,len,name,prop,variations,value,full,actual,item,propertiesSpecified;for(i=0,len=properties.length;i<len;i++){name=properties[i];for(prop in compatiblePrefixes){if(compatiblePrefixes.hasOwnProperty(prop)){variations=compatiblePrefixes[prop];if(CSSLint.Util.indexOf(variations,name.text)>-1){if(!propertyGroups[prop]){propertyGroups[prop]={full:variations.slice(0),actual:[],actualNodes:[]};}if(CSSLint.Util.indexOf(propertyGroups[prop].actual,name.text)===-1){propertyGroups[prop].actual.push(name.text);propertyGroups[prop].actualNodes.push(name);}}}}}for(prop in propertyGroups){if(propertyGroups.hasOwnProperty(prop)){value=propertyGroups[prop];full=value.full;actual=value.actual;if(full.length>actual.length){for(i=0,len=full.length;i<len;i++){item=full[i];if(CSSLint.Util.indexOf(actual,item)===-1){propertiesSpecified=(actual.length===1)?actual[0]:(actual.length==2)?actual.join(" and "):actual.join(", ");reporter.report("The property "+item+" is compatible with "+propertiesSpecified+" and should be included as well.",value.actualNodes[0].line,value.actualNodes[0].col,rule);}}}}}});}});CSSLint.addRule({id:"display-property-grouping",name:"Require properties appropriate for display",desc:"Certain properties shouldn't be used with certain display property values.",browsers:"All",init:function(parser,reporter){var rule=this;var propertiesToCheck={display:1,"float":"none",height:1,width:1,margin:1,"margin-left":1,"margin-right":1,"margin-bottom":1,"margin-top":1,padding:1,"padding-left":1,"padding-right":1,"padding-bottom":1,"padding-top":1,"vertical-align":1},properties;function reportProperty(name,display,msg){if(properties[name]){if(typeof propertiesToCheck[name]!="string"||properties[name].value.toLowerCase()!=propertiesToCheck[name]){reporter.report(msg||name+" can't be used with display: "+display+".",properties[name].line,properties[name].col,rule);}}}function startRule(){properties={};}function endRule(){var display=properties.display?properties.display.value:null;if(display){switch(display){case"inline":reportProperty("height",display);reportProperty("width",display);reportProperty("margin",display);reportProperty("margin-top",display);reportProperty("margin-bottom",display);reportProperty("float",display,"display:inline has no effect on floated elements (but may be used to fix the IE6 double-margin bug).");break;case"block":reportProperty("vertical-align",display);break;case"inline-block":reportProperty("float",display);break;default:if(display.indexOf("table-")===0){reportProperty("margin",display);reportProperty("margin-left",display);reportProperty("margin-right",display);reportProperty("margin-top",display);reportProperty("margin-bottom",display);reportProperty("float",display);}}}}parser.addListener("startrule",startRule);parser.addListener("startfontface",startRule);parser.addListener("startkeyframerule",startRule);parser.addListener("startpagemargin",startRule);parser.addListener("startpage",startRule);parser.addListener("property",function(event){var name=event.property.text.toLowerCase();if(propertiesToCheck[name]){properties[name]={value:event.value.text,line:event.property.line,col:event.property.col};}});parser.addListener("endrule",endRule);parser.addListener("endfontface",endRule);parser.addListener("endkeyframerule",endRule);parser.addListener("endpagemargin",endRule);parser.addListener("endpage",endRule);}});CSSLint.addRule({id:"duplicate-background-images",name:"Disallow duplicate background images",desc:"Every background-image should be unique. Use a common class for e.g. sprites.",browsers:"All",init:function(parser,reporter){var rule=this,stack={};parser.addListener("property",function(event){var name=event.property.text,value=event.value,i,len;if(name.match(/background/i)){for(i=0,len=value.parts.length;i<len;i++){if(value.parts[i].type=="uri"){if(typeof stack[value.parts[i].uri]==="undefined"){stack[value.parts[i].uri]=event;}else{reporter.report("Background image '"+value.parts[i].uri+"' was used multiple times, first declared at line "+stack[value.parts[i].uri].line+", col "+stack[value.parts[i].uri].col+".",event.line,event.col,rule);}}}}});}});CSSLint.addRule({id:"duplicate-properties",name:"Disallow duplicate properties",desc:"Duplicate properties must appear one after the other.",browsers:"All",init:function(parser,reporter){var rule=this,properties,lastProperty;function startRule(event){properties={};}parser.addListener("startrule",startRule);parser.addListener("startfontface",startRule);parser.addListener("startpage",startRule);parser.addListener("startpagemargin",startRule);parser.addListener("startkeyframerule",startRule);parser.addListener("property",function(event){var property=event.property,name=property.text.toLowerCase();if(properties[name]&&(lastProperty!=name||properties[name]==event.value.text)){reporter.report("Duplicate property '"+event.property+"' found.",event.line,event.col,rule);}properties[name]=event.value.text;lastProperty=name;});}});CSSLint.addRule({id:"empty-rules",name:"Disallow empty rules",desc:"Rules without any properties specified should be removed.",browsers:"All",init:function(parser,reporter){var rule=this,count=0;parser.addListener("startrule",function(){count=0;});parser.addListener("property",function(){count++;});parser.addListener("endrule",function(event){var selectors=event.selectors;if(count===0){reporter.report("Rule is empty.",selectors[0].line,selectors[0].col,rule);}});}});CSSLint.addRule({id:"errors",name:"Parsing Errors",desc:"This rule looks for recoverable syntax errors.",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("error",function(event){reporter.error(event.message,event.line,event.col,rule);});}});CSSLint.addRule({id:"fallback-colors",name:"Require fallback colors",desc:"For older browsers that don't support RGBA, HSL, or HSLA, provide a fallback color.",browsers:"IE6,IE7,IE8",init:function(parser,reporter){var rule=this,lastProperty,propertiesToCheck={color:1,background:1,"border-color":1,"border-top-color":1,"border-right-color":1,"border-bottom-color":1,"border-left-color":1,border:1,"border-top":1,"border-right":1,"border-bottom":1,"border-left":1,"background-color":1},properties;function startRule(event){properties={};lastProperty=null;}parser.addListener("startrule",startRule);parser.addListener("startfontface",startRule);parser.addListener("startpage",startRule);parser.addListener("startpagemargin",startRule);parser.addListener("startkeyframerule",startRule);parser.addListener("property",function(event){var property=event.property,name=property.text.toLowerCase(),parts=event.value.parts,i=0,colorType="",len=parts.length;if(propertiesToCheck[name]){while(i<len){if(parts[i].type=="color"){if("alpha" in parts[i]||"hue" in parts[i]){if(/([^\)]+)\(/.test(parts[i])){colorType=RegExp.$1.toUpperCase();}if(!lastProperty||(lastProperty.property.text.toLowerCase()!=name||lastProperty.colorType!="compat")){reporter.report("Fallback "+name+" (hex or RGB) should precede "+colorType+" "+name+".",event.line,event.col,rule);}}else{event.colorType="compat";}}i++;}}lastProperty=event;});}});CSSLint.addRule({id:"floats",name:"Disallow too many floats",desc:"This rule tests if the float property is used too many times",browsers:"All",init:function(parser,reporter){var rule=this;var count=0;parser.addListener("property",function(event){if(event.property.text.toLowerCase()=="float"&&event.value.text.toLowerCase()!="none"){count++;}});parser.addListener("endstylesheet",function(){reporter.stat("floats",count);if(count>=10){reporter.rollupWarn("Too many floats ("+count+"), you're probably using them for layout. Consider using a grid system instead.",rule);}});}});CSSLint.addRule({id:"font-faces",name:"Don't use too many web fonts",desc:"Too many different web fonts in the same stylesheet.",browsers:"All",init:function(parser,reporter){var rule=this,count=0;parser.addListener("startfontface",function(){count++;});parser.addListener("endstylesheet",function(){if(count>5){reporter.rollupWarn("Too many @font-face declarations ("+count+").",rule);}});}});CSSLint.addRule({id:"font-sizes",name:"Disallow too many font sizes",desc:"Checks the number of font-size declarations.",browsers:"All",init:function(parser,reporter){var rule=this,count=0;parser.addListener("property",function(event){if(event.property=="font-size"){count++;}});parser.addListener("endstylesheet",function(){reporter.stat("font-sizes",count);if(count>=10){reporter.rollupWarn("Too many font-size declarations ("+count+"), abstraction needed.",rule);}});}});CSSLint.addRule({id:"gradients",name:"Require all gradient definitions",desc:"When using a vendor-prefixed gradient, make sure to use them all.",browsers:"All",init:function(parser,reporter){var rule=this,gradients;parser.addListener("startrule",function(){gradients={moz:0,webkit:0,oldWebkit:0,o:0};});parser.addListener("property",function(event){if(/\-(moz|o|webkit)(?:\-(?:linear|radial))\-gradient/i.test(event.value)){gradients[RegExp.$1]=1;}else{if(/\-webkit\-gradient/i.test(event.value)){gradients.oldWebkit=1;}}});parser.addListener("endrule",function(event){var missing=[];if(!gradients.moz){missing.push("Firefox 3.6+");}if(!gradients.webkit){missing.push("Webkit (Safari 5+, Chrome)");}if(!gradients.oldWebkit){missing.push("Old Webkit (Safari 4+, Chrome)");}if(!gradients.o){missing.push("Opera 11.1+");}if(missing.length&&missing.length<4){reporter.report("Missing vendor-prefixed CSS gradients for "+missing.join(", ")+".",event.selectors[0].line,event.selectors[0].col,rule);}});}});CSSLint.addRule({id:"ids",name:"Disallow IDs in selectors",desc:"Selectors should not contain IDs.",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("startrule",function(event){var selectors=event.selectors,selector,part,modifier,idCount,i,j,k;for(i=0;i<selectors.length;i++){selector=selectors[i];idCount=0;for(j=0;j<selector.parts.length;j++){part=selector.parts[j];if(part.type==parser.SELECTOR_PART_TYPE){for(k=0;k<part.modifiers.length;k++){modifier=part.modifiers[k];if(modifier.type=="id"){idCount++;}}}}if(idCount==1){reporter.report("Don't use IDs in selectors.",selector.line,selector.col,rule);}else{if(idCount>1){reporter.report(idCount+" IDs in the selector, really?",selector.line,selector.col,rule);}}}});}});CSSLint.addRule({id:"import",name:"Disallow @import",desc:"Don't use @import, use <link> instead.",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("import",function(event){reporter.report("@import prevents parallel downloads, use <link> instead.",event.line,event.col,rule);});}});CSSLint.addRule({id:"important",name:"Disallow !important",desc:"Be careful when using !important declaration",browsers:"All",init:function(parser,reporter){var rule=this,count=0;parser.addListener("property",function(event){if(event.important===true){count++;reporter.report("Use of !important",event.line,event.col,rule);}});parser.addListener("endstylesheet",function(){reporter.stat("important",count);if(count>=10){reporter.rollupWarn("Too many !important declarations ("+count+"), try to use less than 10 to avoid specificity issues.",rule);}});}});CSSLint.addRule({id:"known-properties",name:"Require use of known properties",desc:"Properties should be known (listed in CSS3 specification) or be a vendor-prefixed property.",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("property",function(event){var name=event.property.text.toLowerCase();if(event.invalid){reporter.report(event.invalid.message,event.line,event.col,rule);}});}});CSSLint.addRule({id:"outline-none",name:"Disallow outline: none",desc:"Use of outline: none or outline: 0 should be limited to :focus rules.",browsers:"All",tags:["Accessibility"],init:function(parser,reporter){var rule=this,lastRule;function startRule(event){if(event.selectors){lastRule={line:event.line,col:event.col,selectors:event.selectors,propCount:0,outline:false};}else{lastRule=null;}}function endRule(event){if(lastRule){if(lastRule.outline){if(lastRule.selectors.toString().toLowerCase().indexOf(":focus")==-1){reporter.report("Outlines should only be modified using :focus.",lastRule.line,lastRule.col,rule);}else{if(lastRule.propCount==1){reporter.report("Outlines shouldn't be hidden unless other visual changes are made.",lastRule.line,lastRule.col,rule);}}}}}parser.addListener("startrule",startRule);parser.addListener("startfontface",startRule);parser.addListener("startpage",startRule);parser.addListener("startpagemargin",startRule);parser.addListener("startkeyframerule",startRule);parser.addListener("property",function(event){var name=event.property.text.toLowerCase(),value=event.value;if(lastRule){lastRule.propCount++;if(name=="outline"&&(value=="none"||value=="0")){lastRule.outline=true;}}});parser.addListener("endrule",endRule);parser.addListener("endfontface",endRule);parser.addListener("endpage",endRule);parser.addListener("endpagemargin",endRule);parser.addListener("endkeyframerule",endRule);}});CSSLint.addRule({id:"overqualified-elements",name:"Disallow overqualified elements",desc:"Don't use classes or IDs with elements (a.foo or a#foo).",browsers:"All",init:function(parser,reporter){var rule=this,classes={};parser.addListener("startrule",function(event){var selectors=event.selectors,selector,part,modifier,i,j,k;for(i=0;i<selectors.length;i++){selector=selectors[i];for(j=0;j<selector.parts.length;j++){part=selector.parts[j];if(part.type==parser.SELECTOR_PART_TYPE){for(k=0;k<part.modifiers.length;k++){modifier=part.modifiers[k];if(part.elementName&&modifier.type=="id"){reporter.report("Element ("+part+") is overqualified, just use "+modifier+" without element name.",part.line,part.col,rule);}else{if(modifier.type=="class"){if(!classes[modifier]){classes[modifier]=[];}classes[modifier].push({modifier:modifier,part:part});}}}}}}});parser.addListener("endstylesheet",function(){var prop;for(prop in classes){if(classes.hasOwnProperty(prop)){if(classes[prop].length==1&&classes[prop][0].part.elementName){reporter.report("Element ("+classes[prop][0].part+") is overqualified, just use "+classes[prop][0].modifier+" without element name.",classes[prop][0].part.line,classes[prop][0].part.col,rule);}}}});}});CSSLint.addRule({id:"qualified-headings",name:"Disallow qualified headings",desc:"Headings should not be qualified (namespaced).",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("startrule",function(event){var selectors=event.selectors,selector,part,i,j;for(i=0;i<selectors.length;i++){selector=selectors[i];for(j=0;j<selector.parts.length;j++){part=selector.parts[j];if(part.type==parser.SELECTOR_PART_TYPE){if(part.elementName&&/h[1-6]/.test(part.elementName.toString())&&j>0){reporter.report("Heading ("+part.elementName+") should not be qualified.",part.line,part.col,rule);}}}}});}});CSSLint.addRule({id:"regex-selectors",name:"Disallow selectors that look like regexs",desc:"Selectors that look like regular expressions are slow and should be avoided.",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("startrule",function(event){var selectors=event.selectors,selector,part,modifier,i,j,k;for(i=0;i<selectors.length;i++){selector=selectors[i];for(j=0;j<selector.parts.length;j++){part=selector.parts[j];if(part.type==parser.SELECTOR_PART_TYPE){for(k=0;k<part.modifiers.length;k++){modifier=part.modifiers[k];if(modifier.type=="attribute"){if(/([\~\|\^\$\*]=)/.test(modifier)){reporter.report("Attribute selectors with "+RegExp.$1+" are slow!",modifier.line,modifier.col,rule);}}}}}}});}});CSSLint.addRule({id:"rules-count",name:"Rules Count",desc:"Track how many rules there are.",browsers:"All",init:function(parser,reporter){var rule=this,count=0;parser.addListener("startrule",function(){count++;});parser.addListener("endstylesheet",function(){reporter.stat("rule-count",count);});}});CSSLint.addRule({id:"selector-max-approaching",name:"Warn when approaching the 4095 selector limit for IE",desc:"Will warn when selector count is >= 3800 selectors.",browsers:"IE",init:function(parser,reporter){var rule=this,count=0;parser.addListener("startrule",function(event){count+=event.selectors.length;});parser.addListener("endstylesheet",function(){if(count>=3800){reporter.report("You have "+count+" selectors. Internet Explorer supports a maximum of 4095 selectors per stylesheet. Consider refactoring.",0,0,rule);}});}});CSSLint.addRule({id:"selector-max",name:"Error when past the 4095 selector limit for IE",desc:"Will error when selector count is > 4095.",browsers:"IE",init:function(parser,reporter){var rule=this,count=0;parser.addListener("startrule",function(event){count+=event.selectors.length;});parser.addListener("endstylesheet",function(){if(count>4095){reporter.report("You have "+count+" selectors. Internet Explorer supports a maximum of 4095 selectors per stylesheet. Consider refactoring.",0,0,rule);}});}});CSSLint.addRule({id:"shorthand",name:"Require shorthand properties",desc:"Use shorthand properties where possible.",browsers:"All",init:function(parser,reporter){var rule=this,prop,i,len,propertiesToCheck={},properties,mapping={margin:["margin-top","margin-bottom","margin-left","margin-right"],padding:["padding-top","padding-bottom","padding-left","padding-right"]};for(prop in mapping){if(mapping.hasOwnProperty(prop)){for(i=0,len=mapping[prop].length;i<len;i++){propertiesToCheck[mapping[prop][i]]=prop;}}}function startRule(event){properties={};}function endRule(event){var prop,i,len,total;for(prop in mapping){if(mapping.hasOwnProperty(prop)){total=0;for(i=0,len=mapping[prop].length;i<len;i++){total+=properties[mapping[prop][i]]?1:0;}if(total==mapping[prop].length){reporter.report("The properties "+mapping[prop].join(", ")+" can be replaced by "+prop+".",event.line,event.col,rule);}}}}parser.addListener("startrule",startRule);parser.addListener("startfontface",startRule);parser.addListener("property",function(event){var name=event.property.toString().toLowerCase(),value=event.value.parts[0].value;if(propertiesToCheck[name]){properties[name]=1;}});parser.addListener("endrule",endRule);parser.addListener("endfontface",endRule);}});CSSLint.addRule({id:"star-property-hack",name:"Disallow properties with a star prefix",desc:"Checks for the star property hack (targets IE6/7)",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("property",function(event){var property=event.property;if(property.hack=="*"){reporter.report("Property with star prefix found.",event.property.line,event.property.col,rule);}});}});CSSLint.addRule({id:"text-indent",name:"Disallow negative text-indent",desc:"Checks for text indent less than -99px",browsers:"All",init:function(parser,reporter){var rule=this,textIndent,direction;function startRule(event){textIndent=false;direction="inherit";}function endRule(event){if(textIndent&&direction!="ltr"){reporter.report("Negative text-indent doesn't work well with RTL. If you use text-indent for image replacement explicitly set direction for that item to ltr.",textIndent.line,textIndent.col,rule);}}parser.addListener("startrule",startRule);parser.addListener("startfontface",startRule);parser.addListener("property",function(event){var name=event.property.toString().toLowerCase(),value=event.value;if(name=="text-indent"&&value.parts[0].value<-99){textIndent=event.property;}else{if(name=="direction"&&value=="ltr"){direction="ltr";}}});parser.addListener("endrule",endRule);parser.addListener("endfontface",endRule);}});CSSLint.addRule({id:"underscore-property-hack",name:"Disallow properties with an underscore prefix",desc:"Checks for the underscore property hack (targets IE6)",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("property",function(event){var property=event.property;if(property.hack=="_"){reporter.report("Property with underscore prefix found.",event.property.line,event.property.col,rule);}});}});CSSLint.addRule({id:"unique-headings",name:"Headings should only be defined once",desc:"Headings should be defined only once.",browsers:"All",init:function(parser,reporter){var rule=this;var headings={h1:0,h2:0,h3:0,h4:0,h5:0,h6:0};parser.addListener("startrule",function(event){var selectors=event.selectors,selector,part,pseudo,i,j;for(i=0;i<selectors.length;i++){selector=selectors[i];part=selector.parts[selector.parts.length-1];if(part.elementName&&/(h[1-6])/i.test(part.elementName.toString())){for(j=0;j<part.modifiers.length;j++){if(part.modifiers[j].type=="pseudo"){pseudo=true;break;}}if(!pseudo){headings[RegExp.$1]++;if(headings[RegExp.$1]>1){reporter.report("Heading ("+part.elementName+") has already been defined.",part.line,part.col,rule);}}}}});parser.addListener("endstylesheet",function(event){var prop,messages=[];for(prop in headings){if(headings.hasOwnProperty(prop)){if(headings[prop]>1){messages.push(headings[prop]+" "+prop+"s");}}}if(messages.length){reporter.rollupWarn("You have "+messages.join(", ")+" defined in this stylesheet.",rule);}});}});CSSLint.addRule({id:"universal-selector",name:"Disallow universal selector",desc:"The universal selector (*) is known to be slow.",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("startrule",function(event){var selectors=event.selectors,selector,part,modifier,i,j,k;for(i=0;i<selectors.length;i++){selector=selectors[i];part=selector.parts[selector.parts.length-1];if(part.elementName=="*"){reporter.report(rule.desc,part.line,part.col,rule);}}});}});CSSLint.addRule({id:"unqualified-attributes",name:"Disallow unqualified attribute selectors",desc:"Unqualified attribute selectors are known to be slow.",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("startrule",function(event){var selectors=event.selectors,selector,part,modifier,i,j,k;for(i=0;i<selectors.length;i++){selector=selectors[i];part=selector.parts[selector.parts.length-1];if(part.type==parser.SELECTOR_PART_TYPE){for(k=0;k<part.modifiers.length;k++){modifier=part.modifiers[k];if(modifier.type=="attribute"&&(!part.elementName||part.elementName=="*")){reporter.report(rule.desc,part.line,part.col,rule);}}}}});}});CSSLint.addRule({id:"vendor-prefix",name:"Require standard property with vendor prefix",desc:"When using a vendor-prefixed property, make sure to include the standard one.",browsers:"All",init:function(parser,reporter){var rule=this,properties,num,propertiesToCheck={"-webkit-border-radius":"border-radius","-webkit-border-top-left-radius":"border-top-left-radius","-webkit-border-top-right-radius":"border-top-right-radius","-webkit-border-bottom-left-radius":"border-bottom-left-radius","-webkit-border-bottom-right-radius":"border-bottom-right-radius","-o-border-radius":"border-radius","-o-border-top-left-radius":"border-top-left-radius","-o-border-top-right-radius":"border-top-right-radius","-o-border-bottom-left-radius":"border-bottom-left-radius","-o-border-bottom-right-radius":"border-bottom-right-radius","-moz-border-radius":"border-radius","-moz-border-radius-topleft":"border-top-left-radius","-moz-border-radius-topright":"border-top-right-radius","-moz-border-radius-bottomleft":"border-bottom-left-radius","-moz-border-radius-bottomright":"border-bottom-right-radius","-moz-column-count":"column-count","-webkit-column-count":"column-count","-moz-column-gap":"column-gap","-webkit-column-gap":"column-gap","-moz-column-rule":"column-rule","-webkit-column-rule":"column-rule","-moz-column-rule-style":"column-rule-style","-webkit-column-rule-style":"column-rule-style","-moz-column-rule-color":"column-rule-color","-webkit-column-rule-color":"column-rule-color","-moz-column-rule-width":"column-rule-width","-webkit-column-rule-width":"column-rule-width","-moz-column-width":"column-width","-webkit-column-width":"column-width","-webkit-column-span":"column-span","-webkit-columns":"columns","-moz-box-shadow":"box-shadow","-webkit-box-shadow":"box-shadow","-moz-transform":"transform","-webkit-transform":"transform","-o-transform":"transform","-ms-transform":"transform","-moz-transform-origin":"transform-origin","-webkit-transform-origin":"transform-origin","-o-transform-origin":"transform-origin","-ms-transform-origin":"transform-origin","-moz-box-sizing":"box-sizing","-webkit-box-sizing":"box-sizing","-moz-user-select":"user-select","-khtml-user-select":"user-select","-webkit-user-select":"user-select"};function startRule(){properties={};num=1;}function endRule(event){var prop,i,len,standard,needed,actual,needsStandard=[];for(prop in properties){if(propertiesToCheck[prop]){needsStandard.push({actual:prop,needed:propertiesToCheck[prop]});}}for(i=0,len=needsStandard.length;i<len;i++){needed=needsStandard[i].needed;actual=needsStandard[i].actual;if(!properties[needed]){reporter.report("Missing standard property '"+needed+"' to go along with '"+actual+"'.",properties[actual][0].name.line,properties[actual][0].name.col,rule);}else{if(properties[needed][0].pos<properties[actual][0].pos){reporter.report("Standard property '"+needed+"' should come after vendor-prefixed property '"+actual+"'.",properties[actual][0].name.line,properties[actual][0].name.col,rule);}}}}parser.addListener("startrule",startRule);parser.addListener("startfontface",startRule);parser.addListener("startpage",startRule);parser.addListener("startpagemargin",startRule);parser.addListener("startkeyframerule",startRule);parser.addListener("property",function(event){var name=event.property.text.toLowerCase();if(!properties[name]){properties[name]=[];}properties[name].push({name:event.property,value:event.value,pos:num++});});parser.addListener("endrule",endRule);parser.addListener("endfontface",endRule);parser.addListener("endpage",endRule);parser.addListener("endpagemargin",endRule);parser.addListener("endkeyframerule",endRule);}});CSSLint.addRule({id:"zero-units",name:"Disallow units for 0 values",desc:"You don't need to specify units when a value is 0.",browsers:"All",init:function(parser,reporter){var rule=this;parser.addListener("property",function(event){var parts=event.value.parts,i=0,len=parts.length;while(i<len){if((parts[i].units||parts[i].type=="percentage")&&parts[i].value===0&&parts[i].type!="time"){reporter.report("Values of 0 shouldn't have units specified.",parts[i].line,parts[i].col,rule);}i++;}});}});(function(){var xmlEscape=function(str){if(!str||str.constructor!==String){return"";}return str.replace(/[\"&><]/g,function(match){switch(match){case'"':return"&quot;";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";}});};CSSLint.addFormatter({id:"checkstyle-xml",name:"Checkstyle XML format",startFormat:function(){return'<?xml version="1.0" encoding="utf-8"?><checkstyle>';},endFormat:function(){return"</checkstyle>";},readError:function(filename,message){return'<file name="'+xmlEscape(filename)+'"><error line="0" column="0" severty="error" message="'+xmlEscape(message)+'"></error></file>';},formatResults:function(results,filename,options){var messages=results.messages,output=[];var generateSource=function(rule){if(!rule||!("name" in rule)){return"";}return"net.csslint."+rule.name.replace(/\s/g,"");};if(messages.length>0){output.push('<file name="'+filename+'">');CSSLint.Util.forEach(messages,function(message,i){if(!message.rollup){output.push('<error line="'+message.line+'" column="'+message.col+'" severity="'+message.type+'" message="'+xmlEscape(message.message)+'" source="'+generateSource(message.rule)+'"/>');}});output.push("</file>");}return output.join("");}});}());CSSLint.addFormatter({id:"compact",name:"Compact, 'porcelain' format",startFormat:function(){return"";},endFormat:function(){return"";},formatResults:function(results,filename,options){var messages=results.messages,output="";options=options||{};var capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1);};if(messages.length===0){return options.quiet?"":filename+": Lint Free!";}CSSLint.Util.forEach(messages,function(message,i){if(message.rollup){output+=filename+": "+capitalize(message.type)+" - "+message.message+"\n";}else{output+=filename+": line "+message.line+", col "+message.col+", "+capitalize(message.type)+" - "+message.message+"\n";}});return output;}});CSSLint.addFormatter({id:"csslint-xml",name:"CSSLint XML format",startFormat:function(){return'<?xml version="1.0" encoding="utf-8"?><csslint>';},endFormat:function(){return"</csslint>";},formatResults:function(results,filename,options){var messages=results.messages,output=[];var escapeSpecialCharacters=function(str){if(!str||str.constructor!==String){return"";}return str.replace(/\"/g,"'").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");};if(messages.length>0){output.push('<file name="'+filename+'">');CSSLint.Util.forEach(messages,function(message,i){if(message.rollup){output.push('<issue severity="'+message.type+'" reason="'+escapeSpecialCharacters(message.message)+'" evidence="'+escapeSpecialCharacters(message.evidence)+'"/>');}else{output.push('<issue line="'+message.line+'" char="'+message.col+'" severity="'+message.type+'" reason="'+escapeSpecialCharacters(message.message)+'" evidence="'+escapeSpecialCharacters(message.evidence)+'"/>');}});output.push("</file>");}return output.join("");}});CSSLint.addFormatter({id:"junit-xml",name:"JUNIT XML format",startFormat:function(){return'<?xml version="1.0" encoding="utf-8"?><testsuites>';},endFormat:function(){return"</testsuites>";},formatResults:function(results,filename,options){var messages=results.messages,output=[],tests={error:0,failure:0};var generateSource=function(rule){if(!rule||!("name" in rule)){return"";}return"net.csslint."+rule.name.replace(/\s/g,"");};var escapeSpecialCharacters=function(str){if(!str||str.constructor!==String){return"";}return str.replace(/\"/g,"'").replace(/</g,"&lt;").replace(/>/g,"&gt;");};if(messages.length>0){messages.forEach(function(message,i){var type=message.type==="warning"?"error":message.type;if(!message.rollup){output.push('<testcase time="0" name="'+generateSource(message.rule)+'">');output.push("<"+type+' message="'+escapeSpecialCharacters(message.message)+'"><![CDATA['+message.line+":"+message.col+":"+escapeSpecialCharacters(message.evidence)+"]]></"+type+">");output.push("</testcase>");tests[type]+=1;}});output.unshift('<testsuite time="0" tests="'+messages.length+'" skipped="0" errors="'+tests.error+'" failures="'+tests.failure+'" package="net.csslint" name="'+filename+'">');output.push("</testsuite>");}return output.join("");}});CSSLint.addFormatter({id:"lint-xml",name:"Lint XML format",startFormat:function(){return'<?xml version="1.0" encoding="utf-8"?><lint>';},endFormat:function(){return"</lint>";},formatResults:function(results,filename,options){var messages=results.messages,output=[];var escapeSpecialCharacters=function(str){if(!str||str.constructor!==String){return"";}return str.replace(/\"/g,"'").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");};if(messages.length>0){output.push('<file name="'+filename+'">');CSSLint.Util.forEach(messages,function(message,i){if(message.rollup){output.push('<issue severity="'+message.type+'" reason="'+escapeSpecialCharacters(message.message)+'" evidence="'+escapeSpecialCharacters(message.evidence)+'"/>');}else{output.push('<issue line="'+message.line+'" char="'+message.col+'" severity="'+message.type+'" reason="'+escapeSpecialCharacters(message.message)+'" evidence="'+escapeSpecialCharacters(message.evidence)+'"/>');}});output.push("</file>");}return output.join("");}});CSSLint.addFormatter({id:"text",name:"Plain Text",startFormat:function(){return"";},endFormat:function(){return"";},formatResults:function(results,filename,options){var messages=results.messages,output="";options=options||{};if(messages.length===0){return options.quiet?"":"\n\ncsslint: No errors in "+filename+".";}output="\n\ncsslint: There are "+messages.length+" problems in "+filename+".";var pos=filename.lastIndexOf("/"),shortFilename=filename;if(pos===-1){pos=filename.lastIndexOf("\\");}if(pos>-1){shortFilename=filename.substring(pos+1);}CSSLint.Util.forEach(messages,function(message,i){output=output+"\n\n"+shortFilename;if(message.rollup){output+="\n"+(i+1)+": "+message.type;output+="\n"+message.message;}else{output+="\n"+(i+1)+": "+message.type+" at line "+message.line+", col "+message.col;output+="\n"+message.message;output+="\n"+message.evidence;}});return output;}});return CSSLint;})();(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a);}else{a(CodeMirror);}}})(function(o){var b="CodeMirror-lint-markers";function f(w,v){var u=document.createElement("div");u.className="CodeMirror-lint-tooltip";u.appendChild(v.cloneNode(true));document.body.appendChild(u);function t(x){if(!u.parentNode){return o.off(document,"mousemove",t);}u.style.top=Math.max(0,x.clientY-u.offsetHeight-5)+"px";u.style.left=(x.clientX+5)+"px";}o.on(document,"mousemove",t);t(w);if(u.style.opacity!=null){u.style.opacity=1;}return u;}function k(t){if(t.parentNode){t.parentNode.removeChild(t);}}function i(t){if(!t.parentNode){return;}if(t.style.opacity==null){k(t);}t.style.opacity=0;setTimeout(function(){k(t);},600);}function s(x,v,u){var w=f(x,v);function t(){o.off(u,"mouseout",t);if(w){i(w);w=null;}}var y=setInterval(function(){if(w){for(var z=u;;z=z.parentNode){if(z==document.body){return;}if(!z){t();break;}}}if(!w){return clearInterval(y);}},400);o.on(u,"mouseout",t);}function m(t,v,u){this.marked=[];this.options=v;this.timeout=null;this.hasGutter=u;this.onMouseOver=function(w){n(t,w);};}function a(t,u){if(u instanceof Function){return{getAnnotations:u};}if(!u||u===true){u={};}if(!u.getAnnotations){u.getAnnotations=t.getHelper(o.Pos(0,0),"lint");}if(!u.getAnnotations){throw new Error("Required option 'getAnnotations' missing (lint addon)");}return u;}function e(t){var v=t.state.lint;if(v.hasGutter){t.clearGutter(b);}for(var u=0;u<v.marked.length;++u){v.marked[u].clear();}v.marked.length=0;}function r(y,w,t,x){var u=document.createElement("div"),v=u;u.className="CodeMirror-lint-marker-"+w;if(t){v=u.appendChild(document.createElement("div"));v.className="CodeMirror-lint-marker-multiple";}if(x!=false){o.on(v,"mouseover",function(z){s(z,y,v);});}return u;}function g(u,t){if(u=="error"){return u;}else{return t;}}function h(x){var u=[];for(var v=0;v<x.length;++v){var w=x[v],t=w.from.line;(u[t]||(u[t]=[])).push(w);}return u;}function c(v){var t=v.severity;if(!t){t="error";}var u=document.createElement("div");u.className="CodeMirror-lint-message-"+t;u.appendChild(document.createTextNode(v.message));return u;}function q(t){var v=t.state.lint,u=v.options;if(u.async){u.getAnnotations(t,l,u);}else{l(t,u.getAnnotations(t.getValue(),u.options));}}function l(A,z){e(A);var u=A.state.lint,C=u.options;var y=h(z);for(var D=0;D<y.length;++D){var w=y[D];if(!w){continue;}var E=null;var v=u.hasGutter&&document.createDocumentFragment();for(var x=0;x<w.length;++x){var t=w[x];var B=t.severity;if(!B){B="error";}E=g(E,B);if(C.formatAnnotation){t=C.formatAnnotation(t);}if(u.hasGutter){v.appendChild(c(t));}if(t.to){u.marked.push(A.markText(t.from,t.to,{className:"CodeMirror-lint-mark-"+B,__annotation:t}));}}if(u.hasGutter){A.setGutterMarker(D,b,r(v,E,w.length>1,u.options.tooltips));}}if(C.onUpdateLinting){C.onUpdateLinting(z,y,A);}}function p(t){var u=t.state.lint;clearTimeout(u.timeout);u.timeout=setTimeout(function(){q(t);},u.options.delay||500);}function j(t,v){var u=v.target||v.srcElement;s(v,c(t),u);}var d=[0,0,0,5,0,-5,5,0,-5,0];function n(t,z){if(!/\bCodeMirror-lint-mark-/.test((z.target||z.srcElement).className)){return;}for(var w=0;w<d.length;w+=2){var v=t.findMarksAt(t.coordsChar({left:z.clientX+d[w],top:z.clientY+d[w+1]},"client"));for(var u=0;u<v.length;++u){var x=v[u],y=x.__annotation;if(y){return j(y,z);}}}}o.defineOption("lint",false,function(t,z,u){if(u&&u!=o.Init){e(t);t.off("change",p);o.off(t.getWrapperElement(),"mouseover",t.state.lint.onMouseOver);delete t.state.lint;}if(z){var v=t.getOption("gutters"),x=false;for(var w=0;w<v.length;++w){if(v[w]==b){x=true;}}var y=t.state.lint=new m(t,a(t,z),x);t.on("change",p);if(y.options.tooltips!=false){o.on(t.getWrapperElement(),"mouseover",y.onMouseOver);}q(t);}});});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a);}else{a(CodeMirror);}}})(function(f){var d=["Dangerous comment"];var g=[["Expected '{'","Statement body should be inside '{ }' braces."]];var h=["Missing semicolon","Extra comma","Missing property name","Unmatched "," and instead saw"," is not defined","Unclosed string","Stopping, unable to continue"];function a(l,k){if(!window.JSHINT){return[];}JSHINT(l,k);var m=JSHINT.data().errors,j=[];if(m){i(m,j);}return j;}f.registerHelper("lint","javascript",a);function c(j){e(j,g,"warning",true);e(j,h,"error");return b(j)?null:j;}function e(o,p,s,j){var q,m,n,k,r;q=o.description;for(var l=0;l<p.length;l++){m=p[l];n=(typeof m==="string"?m:m[0]);k=(typeof m==="string"?null:m[1]);r=q.indexOf(n)!==-1;if(j||r){o.severity=s;}if(r&&k){o.description=k;}}}function b(j){var l=j.description;for(var k=0;k<d.length;k++){if(l.indexOf(d[k])!==-1){return true;}}return false;}function i(s,m){for(var o=0;o<s.length;o++){var q=s[o];if(q){var t,p;t=[];if(q.evidence){var j=t[q.line];if(!j){var l=q.evidence;j=[];Array.prototype.forEach.call(l,function(v,u){if(v==="\t"){j.push(u+1);}});t[q.line]=j;}if(j.length>0){var r=q.character;j.forEach(function(u){if(r>u){r-=1;}});q.character=r;}}var k=q.character-1,n=k+1;if(q.evidence){p=q.evidence.substring(k).search(/.\b/);if(p>-1){n+=p;}}q.description=q.reason;q.start=q.character;q.end=n;q=c(q);if(q){m.push({message:q.description,severity:q.severity,from:f.Pos(q.line-1,k),to:f.Pos(q.line-1,n)});}}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a);}else{a(CodeMirror);}}})(function(a){a.registerHelper("lint","json",function(d){var b=[];jsonlint.parseError=function(g,e){var f=e.loc;b.push({from:a.Pos(f.first_line-1,f.first_column),to:a.Pos(f.last_line-1,f.last_column),message:g});};try{jsonlint.parse(d);}catch(c){}return b;});});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a);}else{a(CodeMirror);}}})(function(a){a.registerHelper("lint","css",function(h){var k=[];if(!window.CSSLint){return k;}var e=CSSLint.verify(h),d=e.messages,l=null;for(var f=0;f<d.length;f++){l=d[f];var j=l.line-1,c=l.line-1,b=l.col-1,g=l.col;k.push({from:a.Pos(j,b),to:a.Pos(c,g),message:l.message,severity:l.type});}return k;});});